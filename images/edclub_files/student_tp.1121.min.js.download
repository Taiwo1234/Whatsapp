var student_tp;(self.webpackChunkstudent_tp=self.webpackChunkstudent_tp||[]).push([[839],{95343:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Locale:()=>u,SpaceContext:()=>w,SpaceProvider:()=>k,default:()=>x,i18n:()=>b,t:()=>_});var n=r(31697),a=r(65538),o=r(96486);const i=new(r(26071).Z)({languageUtils:{getBestMatchFromCodes:!1}},{order:["cookie","localStorage","path"],lookupQuerystring:"lng",lookupCookie:"user.pref.language",lookupLocalStorage:"user.pref.language",lookupSessionStorage:"user.pref.language",lookupFromPathIndex:0,lookupFromSubdomainIndex:0,caches:["localStorage","cookie"],excludeCacheFor:["cimode"]}),s=JSON.parse('{"hW":{"419":["MXN","LATAM","LATAM"],"AU":["AUD","Australia","Australia"],"BG":["BGN","България","Bulgaria"],"BR":["BRL","Brasil","Brazil"],"CA":["CAD","Canada","Canada"],"CN":["CNY","中国","China"],"CH":["EUR","Schweiz","Switzerland"],"CZ":["CZK","Česko","Czechia"],"DE":["EUR","Deutschland","Germany"],"ES":["EUR","España","Spain"],"FI":["EUR","Suopma","Finland"],"FR":["EUR","France","France"],"GB":["GBP","Great Britain","Great Britain"],"GR":["EUR","Ελλάδα","Greece"],"HU":["HUF","Magyarország","Hungary"],"IL":["ILS","ישראל","Israel"],"IR":["IRR","ایران","Iran"],"IS":["ISK","Ísland","Iceland"],"IT":["EUR","Italia","Italy"],"JP":["JPY","日本","Japan"],"MX":["MXN","México","Mexico"],"NL":["EUR","Nederland","Netherlands"],"PL":["PLN","Polska","Poland"],"PT":["EUR","Portugal","Portugal"],"RO":["RON","România","Romania"],"RU":["RUB","Россия","Russia"],"SA":["SAR","المملكة العربية السعودية","Saudi Arabia"],"SE":["SEK","Sverige","Sweden"],"SI":["EUR","Slovenija","Slovenia"],"SK":["EUR","Slovensko","Slovakia"],"TH":["THB","ไทย","Thailand"],"TR":["TRT","Türkiye","Turkey"],"TW":["USD","台湾","Taiwan"],"US":["USD","United States","United States"],"AZ":["USD","Azerbaijan","Azərbaycan"],"BY":["USD","Беларусь","Belarus"],"IE":["USD","Éire","Ireland"],"IN":["USD","India","Bhārat"],"FO":["USD","Føroyar","Faroe Islands"],"AM":["USD","Հայաստան","Armenia"],"CK":["USD","Kūki \'Āirani","Cook Islands"],"MK":["USD","Северна Македонија","North Macedonia"],"MM":["USD","မြန်မာ","Myanmar"],"NP":["USD","नेपाल","Nepal"],"NO":["USD","Norge","Norway"],"AF":["USD","افغانستان","Afghanistan"]},"Mj":{"af":["Afrikaans","Afrikaans"],"bg":["Български","Bulgarian"],"ca":["Català","Catalan"],"cs":["Čeština","Czech"],"cy":["Cymraeg","Welsh"],"da":["Dansk","Danish"],"de":["Deutsch","German"],"el":["Ελληνικά","Greek"],"en":["English","English"],"es":["Español","Spanish"],"et":["Eesti keel","Estonian"],"eu":["Euskara","Basque"],"fi":["Suomi","Finnish"],"fr":["Français","French"],"hr":["Hrvatski","Croatian"],"hu":["Magyar","Hungarian"],"id":["Bahasa Indonesia","Indonesian"],"is":["Íslenska","Icelandic"],"it":["Italiano","Italian"],"la":["Latina","Latin"],"lt":["Lietuvių kalba","Lithuanian"],"lv":["Latviešu","Latvian"],"mn":["Монгол","Mongolian"],"nb":["Norsk bokmål","Norwegian (Bokmål)"],"nl":["Nederlands","Dutch"],"nn":["Norsk nynorsk","Norwegian (Nynorsk)"],"pl":["Polski","Polish"],"pt":["Português","Portuguese"],"ro":["Română","Romanian"],"ru":["Русский","Russian"],"se":["Davvisámegiella","Northern Sami"],"sk":["Slovenčina","Slovak"],"sl":["Slovenščina","Slovenian"],"sr":["Српски / Srpski","Serbian"],"sv":["Svenska","Swedish"],"tr":["Türkçe","Turkish"],"uk":["Українська","Ukrainian"],"vi":["Tiếng Việt","Vietnamese"],"ar":["العربية","Arabic"],"fa":["فارسی","Persian"],"he":["עברית","Hebrew"],"ja":["日本語","Japanese"],"km":["ភាសាខ្មែរ","Khmer"],"th":["ไทย","Thai"],"hi":["हिंदी","Hindi"],"ko":["한국어","Korean"],"zh":["中文","Chinese"],"az":["Azerbaijani","Azərbaycan dili"],"be":["Беларуская мова","Belarusian"],"ga":["Gaoidhealg","Irish"],"gu":["ગુજરાતી","Gujarati"],"fo":["føroyskt","Faroese"],"haw":["ʻŌlelo Hawaiʻi","Hawaiian"],"hy":["Հայերէն","Armenian"],"iu":["ᐃᓄᒃᑎᑐᑦ","Inuktitut"],"mi":["Te Reo Māori","Māori"],"mk":["македонски јазик","Macedonian"],"my":["မြန်မာစာ","Burmese"],"ne":["नेपाली भाषा","Nepali"],"no":["Norsk","Norwegian"],"ps":["پښتو","Pushto"],"chr":["ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ","Cherokee"]},"zW":{"af":"af_ZA","ar":"ar_SA","bg":"bg_BG","ca":"ca_AD","cs":"cs_CZ","cy":"cy_GB","da":"da_DK","de":"de_DE","el":"el_GR","en":"en_US","es":"es_ES","et":"et_EE","eu":"eu","fa":"fa_IR","fi":"fi_FI","fr":"fr_FR","he":"he_IL","hi":"hi_IN","hr":"hr_HR","hu":"hu_HU","id":"id_ID","is":"is_IS","it":"it_IT","ja":"ja_JP","km":"km_KH","ko":"ko_KR","la":"la","lt":"lt_LT","lv":"lv_LV","mn":"mn_MN","nb":"nb_NO","nl":"nl_NL","nn":"nn_NO","pl":"pl_PL","pt":"pt_PT","ro":"ro_RO","ru":"ru_RU","se":"se_FI","sk":"sk_SK","sl":"sl_SI","sr":"sr_RS","sv":"sv_SE","th":"th_TH","tr":"tr_TR","uk":"uk_UA","vi":"vi_VN","zh":"zh_CN","az":"az_AZ","be":"be_BY","ga":"ga_IE","gu":"gu_IN","fo":"fo_FO","haw":"haw_US","hy":"hy_AM","iu":"iu_CA","mi":"mi_CK","mk":"mk_MK","my":"my_MM","ne":"ne_NP","no":"no_NO","ps":"ps_AF","chr":"chr_US"},"OB":["ar","he","fa","ps"],"zJ":{"af":0,"bg":1,"ca":1,"cs":1,"cy":0,"da":1,"de":1,"el":1,"en-AU":1,"en-CA":0,"en-GB":1,"en-US":0,"es":1,"et":1,"eu":1,"fi":1,"fr":1,"fr-CA":0,"hr":1,"hu":1,"id":1,"is":1,"it":1,"lt":1,"lv":1,"mn":1,"nb":1,"nl":1,"nn":1,"pl":1,"pt":1,"pt-BR":0,"ro":1,"ru":1,"sk":1,"sl":1,"sr":1,"sv":1,"tr":1,"uk":1,"vi":1,"ar":6,"ar-SA":0,"fa-IR":6,"he":0,"ja":0,"km":0,"th":0,"hi":0,"ko":0,"zh-CN":1}}');class u{constructor(e,t){var r;this.countryCode=t||p(s.zW[e]),this.id=`${e}${this.countryCode?"_"+this.countryCode:""}`,this.langCode=e,this.langNativeName=s.Mj[e][0],this.scriptDirection=s.OB.includes(e)?"rtl":"ltr",this.currency=(null===(r=s.hW[this.countryCode])||void 0===r?void 0:r[0])||"USD",this.startOfWeek=s.zJ[this.alias]||s.zJ[this.langCode]||s.zJ["en-US"]}get alias(){return this.id.replace("_","-")}get tag(){return l(this)?this.langCode:this.alias}get langName(){return this.langNativeName}get viewName(){let e=this.langNativeName;return l(this)||(e=this.countryName.length>8?`${e} (${this.countryCode})`:`${e} (${this.countryName})`),e}get countryName(){return s.hW[this.countryCode]&&s.hW[this.countryCode][1]||""}get dir(){return this.scriptDirection}priceSign(e=0){return(e=Math.abs(e/100)).toLocaleString(this.alias,{style:"currency",currency:this.currency||"USD"})}}function l(e){return s.zW[e.langCode]===e.id}function c(e){return{langCode:f(e=s.zW[e]||e),countryCode:p(e)}}function f(e){let t=e;const r=e.indexOf("_");return r>0&&(t=e.slice(0,r)),t}function p(e){let t;const r=e.indexOf("_");return r>0&&(t=e.slice(r+1)),t}function d(e=""){if("string"!=typeof e)return;const t=h([e.replace("-","_")]);return t.length?t[0]:void 0}function h(e=[]){const t=[];for(let r of e){const e=c(r);if(!s.Mj[e.langCode])continue;const n=new u(e.langCode,e.countryCode);t.push(n),t[n.id]=n}return t}var m=function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))};var y=r(67294),v=r(88721);const g=new class{constructor(){this.settings={},this.defaultCurrency="USD",this.staticURL="",this.spaceLocales=[],this.contentLocales=[],this._context={},this.t=this.t.bind(this),this.i18n=n.ZP}init(e){return m(this,void 0,void 0,(function*(){this.settings=e,this.staticURL=e.staticURL.replace(/\/$/,""),this.defaultCurrency=e.localization.defaultCurrency||this.defaultCurrency,this.spaceLocales=h(e.localization.spaceLocales),this.contentLocales=h(e.localization.contentLocales),this._defaultLocale=d(e.localization.defaultLocale||"en_US");const t=this.getUserLocale();return this._t=yield n.ZP.use(a.Z).init({lng:t.id,fallbackLng:[this._defaultLocale.id],load:"currentOnly",ns:e.localization.namespaces,fallbackNS:e.localization.namespaces,backend:{loadPath:`${window.location.origin}/${this.staticURL}/locales/{{lng}}/{{ns}}.json`,crossDomain:!0},debug:!1,nsSeparator:"::",keySeparator:"||",compatibilityJSON:"v2"}),n.ZP.services.languageUtils.getLanguagePartFromCode=e=>Object.getPrototypeOf(this.i18n.services.languageUtils).getLanguagePartFromCode.call(this.i18n.services.languageUtils,e.replace("_","-")),this}))}getUserLocale(e){let t=function(e,t,r){let n="";const a=i.detect();n=Array.isArray(a)?a[0]:a;let s=d(n||e||"en_US");if(t)for(let e of r)s=d((0,o.get)(t,e))||s;return s||d(e)}(this.settings.localization.defaultLocale||"en_US",e,this.settings.localization.userLocaleKeys||["account.locale","locale"]);return this.spaceLocales[t.id]||(t=this._defaultLocale),t}getLocale(e){if(e)return d(e)}get defaultLocale(){return this._defaultLocale}get context(){return this._context}t(e,t){return this._t(e,t)}},_=g.t,b=g.i18n,{SpaceContext:w,SpaceProvider:k}=function(e){const t=y.createContext(void 0);return{SpaceContext:t,SpaceProvider:({children:r})=>{const[n,a]=(0,y.useState)(e.getUserLocale()),o=(0,v.k6)();function i(){const t=e.getUserLocale();if(t.id!==e.defaultLocale.id){const e=`/${t.tag}${window.location.pathname.replace(`/${t.tag}`,"")}`;e!==window.location.pathname&&setTimeout((()=>o.replace(e)))}}return(0,y.useEffect)((()=>{i()}),[window.location.pathname]),i(),y.createElement(t.Provider,{value:{locale:n,setLocale:a}},r)}}}(g),x=g},10662:(e,t,r)=>{"use strict";r.r(t),r.d(t,{durationToTime:()=>o,formatDate:()=>i,getWeekDayTitle:()=>s,addDays:()=>u,startOfWeek:()=>l,endOfWeek:()=>c,startOfDay:()=>f,endOfDay:()=>p,startOfDayUTC:()=>d,endOfDayUTC:()=>h,apiDateFormat:()=>m});var n=r(22605),a=r(95343);function o(e){if(!e)return"00:00";const t=Math.floor(e/60),r=Math.floor(e-60*t);return`${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function i(e,t,r){if(!e)return"";if(r=r||a.default.getUserLocale().alias,"full.long.medium.short".includes(t))return new Intl.DateTimeFormat(r,{dateStyle:t}).format(e);const n=new RegExp(/(?:)(yyyy|yy|MMMM|MMM|MM|M|dd|d|hh|HH|h|mm|m|ss|s|z)(?:)/g);let i,s=t,u="";for(;i=n.exec(t);){let t,n,a,l,c,f,p;const d=i[1];switch(d){case"yyyy":t="numeric";break;case"yy":t="2-digit";break;case"MMMM":n="long";break;case"MMM":n="short";break;case"MM":n="2-digit";break;case"M":n="numeric";break;case"dd":a="2-digit";break;case"d":a="numeric";break;case"hh":l="2-digit";break;case"HH":l="2-digit",p=!1;break;case"h":l="numeric";break;case"mm":c="2-digit";break;case"m":c="numeric";break;case"ss":f="2-digit";break;case"s":f="numeric"}let h;if("z"===d){const t=e.getTimezoneOffset();h=(t<0?"+":"-")+o(Math.abs(t))}else{h=e.toLocaleString(r,{year:t,month:n,day:a,hour:l,minute:c,second:f,hour12:p}),1!==h.length||"2-digit"!==l&&"2-digit"!==c&&"2-digit"!==f||(h=`0${h}`),"HH"===d&&"24"===h&&(h="00");const o=/[\d]([\sa-zA-z]*)$/g.exec(h);o&&o[1]&&(u=o[1],h=h.replace(u,""))}s=s.replace(new RegExp(d,"g"),h)}return`${s}${u}`}function s(e,t){t=t||a.default.getUserLocale();const r=l(new Date,t);return new Date(r.setDate(r.getDate()+e)).toLocaleString(t.alias,{weekday:"narrow"})}function u(e,t){let r=new Date(e);return r.setDate(r.getDate()+t),r}function l(e,t){t=t||a.default.getUserLocale();const r=new Date(e),n=t.startOfWeek>1?5-t.startOfWeek:t.startOfWeek;return r.setDate(e.getDate()-e.getDay()+n),f(r)}function c(e,t){t=t||a.default.getUserLocale();const r=l(new Date(e),t);return r.setDate(e.getDate()+7),p(r)}function f(e){return new Date(e.setHours(0,0,0,0))}function p(e){return new Date(e.setHours(23,59,59,999))}function d(e){return new Date(e.setUTCHours(0,0,0,0))}function h(e){return new Date(e.setUTCHours(23,59,59,999))}function m(e){return(0,n.Z)(e,"yyyy-MM-dd")}},33946:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(57327),r(82772),r(21249),r(2707),r(96078),r(9653),r(47941),r(41539),r(91058),r(74916),r(39714),r(27852),r(64765),r(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.admanager=S,t.cleanup_ads=function(){var e=S();if(!e||!e.ads.length)return;e.destroySlots();var t,r=s(e.ads);try{for(r.s();!(t=r.n()).done;){var n,a=t.value;null===(n=document.getElementById(a.id))||void 0===n||n.remove()}}catch(e){r.e(e)}finally{r.f()}},t.per_level_ads=P,t.plug_ads=function(e,t,a){if(r.g.cordova)return null;if(approuter.program){var o=approuter.program;if(!o.is_basic||o.is_junior)return null}else if(!approuter.profile.programs.length||approuter.profile.programs.filter((function(e){return!e.is_basic})).length)return null;if(a&&approuter.profile.adlevel<=a)return null;if(!approuter.profile||!approuter.profile.adlevel||!P())return null;var i,u=S(),l=s(e);try{for(l.s();!(i=l.n()).done;){var c=i.value,f=c.parent||(0,n.default)(document.body),p=document.getElementById(c.id);p||(p=(0,n.default)("<div>",{id:c.id}),f.append(p)),f.addClass("with-ads").addClass("adlevel-"+approuter.profile.adlevel)}}catch(e){l.e(e)}finally{l.f()}return u.registerSlots(e,t),u};var n=i(r(69606)),a=i(r(23493)),o=r(95343);function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var a=m(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function g(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var w=function(){function e(){y(this,e),_(this,"inventory",{})}return g(e,[{key:"defineSlot",value:function(e,t){console.warn("defineSlot not implemented in AdPlatformWrapper")}},{key:"display",value:function(e){console.warn("display not implemented in AdPlatformWrapper")}},{key:"destroySlots",value:function(){console.warn("destroySlots not implemented in AdPlatformWrapper")}},{key:"getSizeForDiv",value:function(e){if(!e)return null;var t=e.offsetWidth,r=e.offsetHeight;if(!t&&!r)return null;var n=Object.keys(this.inventory||{}).map((function(e){return e.split("x")})).map((function(e){return e.map((function(e){return parseInt(e)}))})).filter((function(e){return e[0]<=t&&e[1]<=r})).sort((function(e,t){return e[0]*e[1]<t[0]*t[1]?1:-1}));return n.length?"".concat(n[0][0],"x").concat(n[0][1]):(console.warn("no inventory size found for",e.id,"(".concat(t,"x").concat(r,")")),null)}}]),e}(),k=function(e){c(r,e);var t=p(r);function r(){var e;if(y(this,r),_(h(e=t.call(this)),"GOOGLE_AD_MANAGER_ID","43370161"),_(h(e),"inventory",{"300x600":["half-page",[300,600]],"160x600":["wide-skyscraper",[160,600]],"120x600":["skyscraper",[120,600]],"336x280":["large-rectangle",[336,280]],"300x250":["medium-rectangle",[300,250]],"250x250":["square",[250,250]],"200x200":["small-square",[200,200]],"728x90":["smart-banner",[728,90]],"320x50":["smart-banner",[320,50]]}),0===(0,n.default)("#google_ads_script").length){var a=(0,n.default)("<script>",{id:"google_ads_script",type:"text/javascript",src:"//securepubads.g.doubleclick.net/tag/js/gpt.js",async:""});(0,n.default)(document.body).append(a)}return window.googletag=window.googletag||{cmd:[]},googletag.cmd.push((function(){return googletag.pubads().enableSingleRequest()})),e}return g(r,[{key:"defineSlot",value:function(e,t){var r=this;googletag.cmd.push((function(){googletag.defineSlot("/".concat(r.GOOGLE_AD_MANAGER_ID,"/").concat(e[0]),e[1],t).setTargeting("location",approuter.current_app.app).addService(googletag.pubads())}))}},{key:"display",value:function(e){googletag.cmd.push((function(){googletag.pubads().setRequestNonPersonalizedAds(window.personalized_ads_okay?0:1),googletag.enableServices();var t,r=s(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;googletag.display(n)}}catch(e){r.e(e)}finally{r.f()}}))}},{key:"destroySlots",value:function(){googletag.cmd.push((function(){return googletag.destroySlots()}))}}]),r}(w),x=function(e){c(r,e);var t=p(r);function r(){var e;if(y(this,r),_(h(e=t.call(this)),"typingclub_inventory",{"300x600":"typingclub_300x600_Half_Page","160x600":"typingclub_160x600_Wide_Skyscraper","120x600":"typingclub_120x600_Skyscraper","336x280":"typingclub_new-page-res-2","300x250":"typingclub_LessonPlan2","250x250":"typingclub_250x250_Square","200x200":"typingclub_200x200_Small_Square","728x90":"typingclub_728x90_videoplayer","320x50":"typingclub_728x90_videoplayer"}),_(h(e),"edclub_inventory",{"300x600":"edclub_300x600_Half_Page","160x600":"edclub_160x600_Wide_Skyscraper","120x600":"edclub_120x600_Skyscraper","336x280":"edclub_336x280_Large_Rectangle","300x250":"edclub_300x250_Medium_Rectangle","250x250":"edclub_250x250_Square","200x200":"edclub_200x200_Small_Square","728x90":"edclub_728x90","970x90":"edclub_970x90_Large_Leaderboard","468x60":"edclub_468x60_Banners","320x50":"edclub_320x50_Mobile_Leaderboard"}),window.freestar)return d(e);var a=location.hostname.endsWith(".edclub.com");e.inventory=a?e.edclub_inventory:e.typingclub_inventory,window.freestar={hitTime:Date.now(),queue:[],config:{},debug:-1!==window.location.search.indexOf("fsdebug")},freestar.config.enabled_slots=[],freestar.initCallback=function(){0===freestar.config.enabled_slots.length?freestar.initCallbackCalled=!1:freestar.newAdSlots(freestar.config.enabled_slots)};var o=document.createElement("script");return o.async=!0,o.src="https://a.pub.network/".concat(a?"edclub":"typingclub2","-com")+(freestar.debug?"/qa/pubfig.min.js":"/pubfig.min.js"),(0,n.default)(document.body).append(o),e}return g(r,[{key:"freestar_queue",value:function(e){approuter.has_freestar_ads?e():freestar.queue.push(e)}},{key:"defineSlot",value:function(e,t,r){var n="FreeStarVideoAdContainer";if(r){var a=document.getElementById(t);a.id=n;var o=document.createElement("div");o.id="freestar-video-parent";var i=document.createElement("div");i.id="freestar-video-child",o.appendChild(i),a.appendChild(o)}this.freestar_queue((function(){approuter.has_freestar_ads=!0,r?freestar.newVideo(n):freestar.newAdSlots([{placementName:e,slotId:t}])}))}},{key:"display",value:function(e){}},{key:"destroySlots",value:function(){this.freestar_queue((function(){return freestar.deleteAdSlots()}))}}]),r}(w),j=2e3,O=function(){function e(t){var r=this;y(this,e),this.driver=new t,window.addriver=t,this.slots=[],this.registerTimeout=null,this.lastRefresh=null,this.ads=[],this.onRemoveAd=null,approuter.events.on("unload",(function(){return r.destroySlots()}))}return g(e,[{key:"registerSlots",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.ads=e,this.onRemoveAd=r||this.onRemoveAd,this.registerTimeout&&(clearTimeout(this.registerTimeout),this.registerTimeout=null);var a=Date.now();if(this.lastRefresh&&a-this.lastRefresh<j)this.registerTimeout=setTimeout((function(){return t.registerSlots(e)}),j-(a-this.lastRefresh));else{this.lastRefresh=a,this.slots.length&&this.destroySlots();var o,i=s(e);try{for(i.s();!(o=i.n()).done;){var u=o.value,l=document.getElementById(u.id);if(l){var c=u.video?"video":this.driver.getSizeForDiv(l);c&&(l=this.defineSlotWithDisableAdLink(l,c)),this.slots.push([l,c])}}}catch(e){i.e(e)}finally{i.f()}this.driver.display(this.slots.map((function(e){return e[0].id}))),setTimeout((function(){return(0,n.default)(".disable-ads-banner").css("opacity",1)}),2e3)}}},{key:"defineSlotWithDisableAdLink",value:function(e,t){var r="video"===t;e.innerHTML="",e.setAttribute("aria-hidden",!0),e.setAttribute("role","presentation"),e.setAttribute("tabindex",-1),e.appendChild(this.get_disable_ads_link());var n=document.createElement("div");n.id=e.id+"-"+Math.random().toString(32).substring(2),n.style.textAlign="right",e.appendChild(n);var a=r?"video":this.driver.inventory[t];return this.driver.defineSlot(a,n.id,r),n}},{key:"get_disable_ads_link",value:function(){var e=this,t=(0,n.default)("<div class='disable-ads-banner'><a>"+(0,o.t)("Close")+" <i>&times;</i></a></div>");return t.on("click",(function(){setTimeout((function(){return e.destroySlots()}),1e3),e.onRemoveAd&&e.onRemoveAd()})),t[0]}},{key:"destroySlots",value:function(){var e,t=[],r=s(this.slots);try{for(r.s();!(e=r.n()).done;){var n=e.value;n[1]&&n[0].parentElement&&t.push(n[0].parentElement)}}catch(e){r.e(e)}finally{r.f()}this.driver.destroySlots();for(var a=0,o=t;a<o.length;a++){o[a].innerHTML=""}this.slots=[]}},{key:"onResize",value:function(){var e=this;if(this.registerTimeout)return clearTimeout(this.registerTimeout),void(this.registerTimeout=setTimeout((function(){return e.registerSlots(e.ads)}),1e3));var t,r=!1,n=s(this.slots);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(("video"===a[1]?"video":this.driver.getSizeForDiv(a[1]?a[0].parentElement:a[0]))!==a[1]){r=!0;break}}}catch(e){n.e(e)}finally{n.f()}r&&(this.destroySlots(),this.registerTimeout=setTimeout((function(){return e.registerSlots(e.ads)}),1e3))}}]),e}(),E=null;function S(){var e;E||(e=approuter.profile&&approuter.profile.freestar_ok&&"en-US"===navigator.language?x:k,E=new O(e),window.addEventListener("resize",(0,a.default)((function(){return E.onResize()}),500)));return E}function P(){var e=approuter.lesson,t=approuter.profile;if(e){if(1===t.adlevel&&e.index<7)return!1;if(2===t.adlevel&&e.index<4)return!1;if(3===t.adlevel)return!0}return!0}},75564:(e,t,r)=>{r(69826),r(43371),r(41539),r(88674),r(74916),r(39714),r(64765),r(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(35666);var n=f(r(67294)),a=f(r(42644)),o=f(r(69606)),i=f(r(30381));r(15461);f(r(84463));var s=f(r(48583)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(58200)),l=r(56392);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){p(o,n,a,i,s,"next",e)}function s(e){p(o,n,a,i,s,"throw",e)}i(void 0)}))}}function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=Object.freeze({Accepted:202,BadRequest:400,Unauthorized:401,NotFound:404,InternalServerError:500,ServiceUnavailable:503,Offline:0}),v="1.1";function g(e,t,i){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;switch(e.status){case y.Unauthorized:return(0,s.default)(l&&l!==window),u.getFreshSession().then((function(e){e?e.is_student?o.default.ajax(l):u.takeMeHome(e):approuter.login_page({next_app:approuter.current_app})})),!0;case y.InternalServerError:try{_(JSON.parse(e.responseText).traceback),console.error(JSON.parse(e.responseText).traceback)}catch(e){}break;case y.ServiceUnavailable:approuter.show_modal(n.default.createElement(a.default,{id:"err503",width:450,show_x:!1,close_outside:!1,esc_close:!1},n.default.createElement("h3",null,"Service Temporarily Unavailable"),n.default.createElement("hr",null),n.default.createElement("p",null,"TypingClub is currently unavailable. Please try again in a few seconds, or try refreshing the page. We apologize for the inconvenience.")));break;case y.NotFound:return approuter.not_found(),!0;case y.Offline:if(r.g.cordova)return approuter.not_found(),!0}}function _(e){var t=(0,o.default)("<div />").css({margin:20,border:"1px solid #bbb",borderRadius:10});(0,o.default)("body").append(t);var r,n=h(e.split("\n\n"));try{for(n.s();!(r=n.n()).done;){var a=r.value,i=(0,o.default)("<pre />").html(a).css({borderRadius:0});i.css({border:0,margin:0}),a.search(/\/tpclub\//)>-1&&i.css({background:"#ddd",color:"darkred"}),t.append(i)}}catch(e){n.e(e)}finally{n.f()}t.find("pre").last().css({background:"darkred",color:"white"})}function b(e,t,r){return new Promise((function(n,a){o.default.ajax({beforeSend:function(e,t){return e.setRequestHeader("Authorization","Token "+u.getToken()),!0},url:(0,l.getBaseUrl)()+e,dataType:"json",cache:!1,success:function(e){t&&t(e),n(e)},error:function(e,t,n){r?r(e,t,n):g(e,t,n,this)||a(e)}})}))}function w(e,t,r,n){return new Promise((function(a,i){o.default.ajax({beforeSend:function(e,t){return e.setRequestHeader("Authorization","Token "+u.getToken()),!0},type:"POST",contentType:"application/json",url:(0,l.getBaseUrl)()+e,data:JSON.stringify(t),dataType:"json",success:function(e){r?r(e):a(e)},error:function(e,t,r){g(e,t,r,this)||(n?n(e,t,r):i(e))}})}))}function k(){return(k=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,approuter.materialize_profile();case 2:return e.next=4,w("/api/v1.1/lessonfeedback/",t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",approuter.update_profile((function(){return w("/api/v1.1/student/join_program/",{mprogram_id:t})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",approuter.update_profile((function(){return w("/api/v1.1/student/join_team/",{team_id:t.id})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",approuter.update_profile({password:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,approuter.update_profile((function(){return w("/api/v1.1/student/reset_progress/",{program_id:t})}),{is_full_refresh:!0});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,approuter.update_profile((function(){return w("/api/v1.1/student/remove_from_dashboard/",{program_id:t})}),{is_full_refresh:!0});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P={StatusCode:y,get:b,patch:function(e,t,r,n){return new Promise((function(a,i){o.default.ajax({beforeSend:function(e,t){return e.setRequestHeader("Authorization","Token "+u.getToken()),e.setRequestHeader("X-HTTP-Method-Override","PATCH"),!0},type:"POST",contentType:"application/json",url:(0,l.getBaseUrl)()+e,data:JSON.stringify(t),dataType:"json",success:function(e){r?r(e):a(e)},error:function(e,t,o){if(e.status==y.Accepted){var s=e.responseText;r?r(s):a(s)}else n?n(e,t,o):g(e,t,o,this)||i(e)}})}))},post:w,postLessonFeedback:function(e){return k.apply(this,arguments)},changePassword:function(e){return O.apply(this,arguments)},forgotPassword:function(e,t,r,n){w("/auth/forgot_password/",{domain:e,email:t},r,n)},checkClassCode:function(e,t,r,n){o.default.get("https://s.typingclub.com/auth/check_class_code/?domain="+e+"&code="+t,r,n)},signup2Class:function(e,t,r){e.is_authenticated?w("/api/v1.1/student/signup2class/",e,t,r):w("/auth/signup2class/",e,t,r)},deleteAccount:function(e){!function(e,t,r,n){new Promise((function(a,i){o.default.ajax({beforeSend:function(e,t){return e.setRequestHeader("Authorization","Token "+u.getToken()),!0},type:"DELETE",contentType:"application/json",url:(0,l.getBaseUrl)()+e,data:JSON.stringify(t),dataType:"json",success:function(e){r?r(e):a(e)},error:function(e,t,r){n?n(e,t,r):g(e,t,r,this)||i(e)}})}))}("/api/v1.1/student/",{password:e},(function(e){try{localStorage.setItem("homepage-message",JSON.stringify({type:"success",text:"Your account was succesfully deleted. We are sorry to see you go."}))}catch(e){}u.signUserOut().then(u.redirectAfterLogout)}),(function(e){try{localStorage.setItem("homepage-message",JSON.stringify({type:"warning",text:"Your request could not be completed at this time. For security reasons you have been logged out of your account."}))}catch(e){}u.signUserOut().then(u.redirectAfterLogout)}))},getSubjectStats:function(e,t,r){t||(t=approuter.profile);var n=t.resource_uri+"stats/subject_stats/";r&&(n+="?subject_id="+r),b(n,e)},getStudentBadges:function(e,t){t||(t=approuter.profile),b(t.resource_uri+"badges/",e)},joinProgram:function(e){return x.apply(this,arguments)},joinTeam:function(e){return j.apply(this,arguments)},version:v,getRecentActivity:function(e,t){t||(t=approuter.profile),b(t.resource_uri+"recent_activity/",e)},getStudentKPIComparison:function(e,t,r,n,a){var o={team_id:e?e.team_id:null,program_id:e?e.program_id:null,grade:a.grade,school_id:a.school_id,subject:t,period:r,timezone:a.timezone};w(a.resource_uri+"stats/typing_student_kpi_comparison/",o,n)},getStudentOverallStats:function(e,t,r,n,a){var o={team_id:e?e.team_id:null,program_id:e?e.program_id:null,grade:a.grade,subject:t};r>0&&(o.begin_time=(0,i.default)().locale("en").subtract(r,"days").format("YYYY-MM-DD"),o.end_time=(0,i.default)().locale("en").format("YYYY-MM-DD")),w(a.resource_uri+"stats/typing_student_kpi_comparison/",o,n)},getTeamprogramOverallStats:function(e,t,r){var n={team_id:e.team_id,grade:e.grade};e.program_id&&(n.program_id=e.program_id),t>0&&(n.begin_time=(0,i.default)().locale("en").subtract(t,"days").format("YYYY-MM-DD"),n.end_time=(0,i.default)().locale("en").format("YYYY-MM-DD")),w("/api/v1.1/team/"+e.team_id+"/stats/typing_kpi_comparison/",n,r)},getSchoolOverallStats:function(e,t,r,n){var a={subject_id:t};r>0&&(a.begin_time=(0,i.default)().locale("en").subtract(r,"days").format("YYYY-MM-DD"),a.end_time=(0,i.default)().locale("en").format("YYYY-MM-DD")),w("/api/v1.1/school/"+e+"/stats/typing_kpi_comparison/",a,n)},getStudentProgressStats:function(e,t,r,n,a){var o={period:e,subject:a};n&&(o.begin_time=(0,i.default)().locale("en").subtract(n-1,"days").format("YYYY-MM-DD")),w(r.resource_uri+"stats/typing_student_overview/",o,t)},getTeamprogramProgressStats:function(e,t,r,n){var a={period:e,limit:n||0};r.program_id&&(a.program_id=r.program_id),w("/api/v1.1/team/"+r.team_id+"/stats/typing_overview/",a,t)},getSchoolProgressStats:function(e,t,r,n,a){w("/api/v1.1/school/"+r+"/stats/typing_overview/",{period:e,limit:a||0,subject_id:n},t)},getStudentProgressInClasStats:function(e,t,r,n){var a={period:t,team_id:e.team_id,program_id:e.program_id};w(n.resource_uri+"stats/typing_student_progress/",a,r)},getTeamprogramProgressInClassStats:function(e,t,r){var n={period:t,program_id:e.program_id};w("/api/v1.1/team/"+e.team_id+"/stats/typing_progress/",n,r)},getStudentClassHistogramStats:function(e,t,r,n){var a={metric:t,team_id:e.team_id,program_id:e.program_id};w(n.resource_uri+"stats/typing_student_histogram/",a,r)},getTeamprogramHistogramStats:function(e,t,r){var n={metric:t,program_id:e.program_id};w("/api/v1.1/team/"+e.team_id+"/stats/typing_histogram/",n,r)},getSchoolHistogramStats:function(e,t,r,n){w("/api/v1.1/school/"+e+"/stats/typing_histogram/",{metric:r,subject_id:t},n)},getStudentPunchCardStats:function(e,t,r){var n={};e.length&&(n.begin_time=(0,i.default)().locale("en").subtract(e,"months").format("YYYY-MM-DD"),n.end_time=(0,i.default)().locale("en").format("YYYY-MM-DD")),w(r.resource_uri+"stats/typing_student_weekday_practice/",n,t)},getTeamPunchCardStats:function(e,t,r){var n={};e.length&&(n.begin_time=(0,i.default)().locale("en").subtract(e,"months").format("YYYY-MM-DD"),n.end_time=(0,i.default)().locale("en").format("YYYY-MM-DD")),r.program_id&&(n.program_id=r.program_id),w("/api/v1.1/team/"+r.team_id+"/stats/typing_weekday_practice/",n,t)},getSchoolPunchCardStats:function(e,t,r,n){var a={subject_id:n};e.length&&(a.begin_time=(0,i.default)().locale("en").subtract(e,"months").format("YYYY-MM-DD"),a.end_time=(0,i.default)().locale("en").format("YYYY-MM-DD")),w("/api/v1.1/school/"+r+"/stats/typing_weekday_practice/",a,t)},getStudentGradeLevelStats:function(e,t,r){var n={team_id:e.team_id,program_id:e.program_id,weeks:4};w(r.resource_uri+"stats/typing_student_weekly_kpi/",n,t)},getStudentCurrentStats:function(e,t,r){w(t.resource_uri+"stats/typing_student_current_stats/",{timezone:t.timezone,weekday_start:r},e)},getStudentQuickStats:function(e,t,r,n){w(t.resource_uri+"stats/typing_student_quick_stats/",{subject_id:r,weekday_start:n,timezone:t.timezone},e)},reactivateUserSubscription:function(e,t){w("/api/v1.1/usersubscription/reactivate/",e,t)},updatePaymentUserSubscription:function(e,t,r){w("/api/v1.1/usersubscription/update-payment/",e,t,r)},getUserPaymentMethod:function(e,t){b("/api/v1.1/usersubscription/payment-method/",e,t)},createUserSubscription:function(e,t,r){w("/api/v1.1/usersubscription/subscribe_plan/",e,t,r)},cancelUserSubscription:function(e,t){w("/api/v1.1/usersubscription/cancel_subscription/",e,t)},getUserSubscription:function(e){b("/api/v1.1/usersubscription/",(function(t){0!=t.objects.length?e(t.objects[0]):e(null)}))},resolveOAauthToken:function(e,t,r,n,a){w("/auth/resolve_oauth_token/",{issuer:e,domain:t,code:r},n,a)},getSchoolAccount:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o="/auth/get_account/";w(o,{domain:e,forSchoolAccount:n,forClassImport:a},(function(e){~document.location.host.search("localhost")&&u.setDomain(e.domain),t(e)}),r)},getUserToken:function(e,t,r,n,a){w("/auth/get_token/",{domain:e,username:t,password:r},n,a)},getLessonPlanManifest:function(e){b("/lessonplans.json",e)},resetLessonPlan:function(e){return E.apply(this,arguments)},removeFromDashboard:function(e){return S.apply(this,arguments)},createCardLicenseSubscription:function(e,t,r){w("/api/v1.1/usersubscription/activate_license_card/",e,t,r)},getJoinableTeams:function(){return b("/api/v1.1/team/?joinable=true&limit=1000")},getTpPlans:function(){return b("/api/v1.1/subscriptionplan/")},getVideo:function(e){return b("/api/v1.1/video/"+e+"/")}};t.default=P},51891:(e,t,r)=>{r(92222),r(69826),r(66992),r(85827),r(65069),r(47042),r(9653),r(9494),r(19601),r(38880),r(47941),r(41539),r(88674),r(74916),r(64765),r(54747),r(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(35666);var n=p(r(28787)),a=r(51454),o=r(15239),i=c(r(48583)),s=c(r(23560)),u=c(r(14779)),l=p(r(71327));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var a=k(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function x(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function O(e,t,r,n,a){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var E=function(e){var t,r,c;return t=(0,o.log_catch_promise)("goto_app"),r=(0,o.log_catch_promise)("goto_window_url"),c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(b,e);var t,r,c,f,p,h=_(b);function b(){var e;y(this,b);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(w(e=h.call.apply(h,[this].concat(r))),"root",void 0),x(w(e),"current_app",void 0),x(w(e),"is_lesson_to_plan_transition",!1),x(w(e),"start_time",void 0),e}return t=b,r=[{key:"redirect",value:function(e){document.location=e}},{key:"refresh",value:function(){return this.apply_env(this.current_app)}},{key:"unload_current_app",value:function(){this.setState({component:null}),l.flush_timeouts(),this.events.fire_event("unload"),this.events.flush("unload"),$(window).unbind("resize"),this.keymanager.flush(),this.resourceAudioManager.stopAllAudio(),this._attempt=null}},{key:"apply_env",value:(f=regeneratorRuntime.mark((function e(t){var r,l,c,f,p,h,m,y,v,g,_,b,w,k,x=this,j=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(e){return"blank"!==e.type&&!e.is_instructor},r=j.length>1&&void 0!==j[1]&&j[1],this.modals=[],(0,o.addBreadcrumb)({category:"log",level:"info",message:"apply_env: "+t.app}),n.configureScope((function(e){e.setExtra("env",t)})),r||this.unload_current_app(),this.frobAudioContext(),e.next=9,this.refresh_badges();case 9:return e.next=11,this.refresh_profile();case 11:return e.next=13,this.refresh_debug();case 13:return l=t.app,(0,i.default)(l,"missing app name"),f=c,e.next=18,this.resolveAppRoute(l);case 18:if((p=e.sent)&&p.authorization&&(f=p.authorization),f(this.profile,c)){e.next=23;break}return this.login_page({next_app:t}),e.abrupt("return");case 23:this.is_lesson_to_plan_transition=!1,h=document.location.search,e.t0=t.app,e.next="lesson"===e.t0?28:"student.testplan"===e.t0||"student.lessonplan"===e.t0||"student.placementtest_app"===e.t0?53:"student.dashboard_app"===e.t0?58:"student.scoreboard"===e.t0?65:66;break;case 28:return e.next=30,this.refresh_lesson(t.id,t.program_id);case 30:e.prev=30,m=this.lesson.activity,"typing.classic_typing_app"==(l=m.app)&&"boxed"==m.render_engine&&(l="typing.boxed_typing"),e.t1=l,e.next="typing.games.BalloonValley"===e.t1||"typing.games.MonsterAttack"===e.t1||"typing.games.TempleBash"===e.t1||"typing.games.FloatingBubbles"===e.t1||"typing.games.AppleThieves"===e.t1?37:"typing.videotyping_app"===e.t1?39:41;break;case 37:return(this.profile.is_blind||this.profile.is_low_vision)&&(l="typing.classic_typing_app"),e.abrupt("break",41);case 39:return(this.profile.is_blind||this.profile.is_low_vision)&&(l="typing.classic_typing_app",Object.assign(m,{text1:this.lesson.activity.text,render_engine:"normal",voiceover_words:!0})),e.abrupt("break",41);case 41:if(!m||!m.is_dynamic||m.dynamic_text_generated){e.next=44;break}return e.next=44,(0,a.generate_dynamic_lesson)(this.lesson,this.program);case 44:e.next=50;break;case 46:throw e.prev=46,e.t2=e.catch(30),(0,o.captureException)(e.t2,{extra:{same_app_lesson:this.current_app&&this.lesson.id==this.current_app.id,lesson:JSON.stringify(this.lesson)}}),e.t2;case 50:return!this.is_rigged&&this.lesson.is_unassigned&&(l="student.lesson_locked"),e.abrupt("break",66);case 53:return this.lesson=null,e.next=56,this.refresh_program(t.id);case 56:return this.current_app&&"lesson"===this.current_app.app&&(this.is_lesson_to_plan_transition=!0),e.abrupt("break",66);case 58:if(!this.is_dirty_profile){e.next=63;break}return this.profile=null,e.next=62,this.refresh_profile();case 62:this.is_dirty_profile=!1;case 63:return h="",e.abrupt("break",66);case 65:this.teamprogram_id=t.id;case 66:v=d(this.url_routes),e.prev=67,v.s();case 69:if((g=v.n()).done){e.next=76;break}if(_=g.value,t.app!=_.app){e.next=74;break}return y=u.default.compile(_.path)(t),e.abrupt("break",76);case 74:e.next=69;break;case 76:e.next=81;break;case 78:e.prev=78,e.t3=e.catch(67),v.e(e.t3);case 81:return e.prev=81,v.f(),e.finish(81);case 84:return!window.cordova&&y&&(this.current_app?document.location.pathname+document.location.search!=y+h&&(history.pushState(t,t.title,y+h),window.ga&&ga("send","pageview",y)):history.replaceState(t,t.title,y+h)),e.next=87,this.resolveAppRoute(l);case 87:if(b=e.sent){e.next=94;break}return w="shared.frame_app",e.next=92,this.resolveAppRoute(w);case 92:b=e.sent,t.app=l;case 94:return(0,i.default)((0,s.default)(b),"not a function ".concat(l)),e.next=97,b(t,this.profile);case 97:if(k=e.sent){e.next=100;break}return e.abrupt("return");case 100:return this.current_app=t,this.start_time=(new Date).getTime(),e.abrupt("return",new Promise((function(e){x.root.hasClass("with-ads")&&(x.root.attr("class",""),x.root.find("#adslot_1").remove(),x.root.find("#adslot_2").remove()),x.setState({component:k},(function(){"lesson"!=t.app&&$('[tabindex="1"]').focus(),e(k)}))})));case 103:case"end":return e.stop()}}),e,this,[[30,46],[67,78,81,84]])})),p=function(){var e=this,t=arguments;return new Promise((function(r,n){var a=f.apply(e,t);function o(e){m(a,r,n,o,i,"next",e)}function i(e){m(a,r,n,o,i,"throw",e)}o(void 0)}))},function(e){return p.apply(this,arguments)})},{key:"goto_app",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(t,{app:e}),this.apply_env(t)}},{key:"goto_window_url",value:function(e){var t,r={name:"404",path:e=e||window.document.location.pathname,app:"shared.not_found_app"},n={},a=d(this.url_routes);try{for(a.s();!(t=a.n()).done;){var o=t.value,i=o.compiled.exec(e);if(i){r=o,i.shift();for(var s=0;s<i.length;s++){var u=r.keys[s].name,l=r.keys[s].pattern,c=i[s];n[u]="\\d+"===l?Number.parseInt(c,10):c}break}}}catch(e){a.e(e)}finally{a.f()}return this.goto_app(r.app,n)}},{key:"set_resolveAppRoute",value:function(e){this.resolveAppRoute=e}},{key:"set_url_routes",value:function(e){var t,r=d(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.keys=[],n.compiled=(0,u.default)(n.path,n.keys)}}catch(e){r.e(e)}finally{r.f()}this.url_routes=e}}],r&&v(t.prototype,r),c&&v(t,c),Object.defineProperty(t,"prototype",{writable:!1}),b}(e),O(c.prototype,"goto_app",[t],Object.getOwnPropertyDescriptor(c.prototype,"goto_app"),c.prototype),O(c.prototype,"goto_window_url",[r],Object.getOwnPropertyDescriptor(c.prototype,"goto_window_url"),c.prototype),c};t.default=E},4716:(e,t,r)=>{r(82772),r(69600),r(2707),r(40561),r(5735),r(47941),r(41539),r(83753),Object.defineProperty(t,"__esModule",{value:!0}),t.checksum_for_data=function(e){return a.default.hash(s(e))},t.stable_stringify=s;var n,a=(n=r(43056))&&n.__esModule?n:{default:n};var o=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},i=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in e)t.call(e,n)&&r.push(n);return r};function s(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var n,a="boolean"==typeof t.cycles&&t.cycles,s=t.replacer||function(e,t){return t},u=t.cmp&&(n=t.cmp,function(e){return function(t,r){var a={key:t,value:e[t]},o={key:r,value:e[r]};return n(a,o)}}),l=[];return function e(t,n,c,f){var p=r?"\n"+new Array(f+1).join(r):"",d=r?": ":":";if(c&&c.toJSON&&"function"==typeof c.toJSON&&(c=c.toJSON()),void 0!==(c=s.call(t,n,c))){if("object"!=typeof c||null===c)return JSON.stringify(c);if(o(c)){for(var h=[],m=0;m<c.length;m++){var y=e(c,m,c[m],f+1)||JSON.stringify(null);h.push(p+r+y)}return"["+h.join(",")+p+"]"}if(-1!==l.indexOf(c)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(c);for(var v=i(c).sort(u&&u(c)),g=[],_=0;_<v.length;_++){var b=v[_],w=e(c,b,c[b],f+1);if(w){var k=JSON.stringify(b)+d+w;g.push(p+r+k)}}return l.splice(l.indexOf(c),1),"{"+g.join(",")+p+"}"}}({"":e},"",e,0)}},43056:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}r(82526),r(41817),r(96649),r(69600),r(21249),r(85827),r(47042),r(96078),r(9653),r(19601),r(41539),r(91058),r(74916),r(39714),r(4723),r(15306),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,a=[{key:"hash",value:function(t,r){var n,a=Object.assign({msgFormat:"string",outFormat:"hex"},r);t="hex-bytes"===a.msgFormat?""==(n=t.replace(" ",""))?"":n.match(/.{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""):function(e){try{return(new TextEncoder).encode(e,"utf-8").reduce((function(e,t){return e+String.fromCharCode(t)}),"")}catch(t){return unescape(encodeURIComponent(e))}}(t);for(var o=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520],s=(t+=String.fromCharCode(128)).length/4+2,u=Math.ceil(s/16),l=new Array(u),c=0;c<u;c++){l[c]=new Array(16);for(var f=0;f<16;f++)l[c][f]=t.charCodeAt(64*c+4*f+0)<<24|t.charCodeAt(64*c+4*f+1)<<16|t.charCodeAt(64*c+4*f+2)<<8|t.charCodeAt(64*c+4*f+3)<<0}l[u-1][14]=8*(t.length-1)/Math.pow(2,32),l[u-1][14]=Math.floor(l[u-1][14]),l[u-1][15]=8*(t.length-1)&4294967295;for(var p=0;p<u;p++){for(var d=new Array(80),h=0;h<16;h++)d[h]=l[p][h];for(var m=16;m<80;m++)d[m]=e.ROTL(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);for(var y=i[0],v=i[1],g=i[2],_=i[3],b=i[4],w=0;w<80;w++){var k=Math.floor(w/20),x=e.ROTL(y,5)+e.f(k,v,g,_)+b+o[k]+d[w]>>>0;b=_,_=g,g=e.ROTL(v,30)>>>0,v=y,y=x}i[0]=i[0]+y>>>0,i[1]=i[1]+v>>>0,i[2]=i[2]+g>>>0,i[3]=i[3]+_>>>0,i[4]=i[4]+b>>>0}for(var j=0;j<i.length;j++)i[j]=("00000000"+i[j].toString(16)).slice(-8);var O="hex-w"==a.outFormat?" ":"";return i.join(O)}},{key:"f",value:function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}},{key:"ROTL",value:function(e,t){return e<<t|e>>>32-t}}],(r=null)&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a},54153:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new a.default(["start","update_property","show_modal","hide_modal","unload","finish_activity","finish_activity_aux","done","retry","play","pause","tutorial","show_modal_callback","paid_feature","error","play_audio","stop_audio","stop_audio_all","wait_audio","speak","get_lessongamedata","save_lessongamedata"])};var n,a=(n=r(47642))&&n.__esModule?n:{default:n}},62342:(e,t,r)=>{r(82526),r(41817),r(96649),r(66992),r(96078),r(9653),r(41539),r(88674),r(39714),r(78783),r(33948),r(60285),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement(M,{env:e})},r(35666);var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(67294)),a=v(r(48583)),o=v(r(54153)),i=r(47642),s=v(r(57023)),u=v(r(24340)),l=v(r(3056)),c=v(r(28891)),f=v(r(24508)),p=v(r(53239)),d=v(r(42644)),h=r(71327),m=r(15239),y=v(r(52051));function v(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function _(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){_(o,n,a,i,s,"next",e)}function s(e){_(o,n,a,i,s,"throw",e)}i(void 0)}))}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function x(e,t,r){return t&&k(e.prototype,t),r&&k(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var a=C(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function N(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var R=new(r(868).BundleSettings),M=function(e){j(r,e);var t=E(r);function r(e){var n;return w(this,r),N(P(n=t.call(this,e)),"events",(0,o.default)()),N(P(n),"timeout",void 0),N(P(n),"onMessage",function(){var e=b(regeneratorRuntime.mark((function e(t){var r,o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,a.default)(n.state.url,"message event, but no url"),r=new URL(n.state.url,window.location).origin,t.origin===r){e.next=5;break}return console.error("origin mismatch",{actual:t.origin,expected:r}),e.abrupt("return");case 5:if(t.data&&t.data.type===i.EVENT_MANAGER_CHANNEL_MESSAGE){e.next=7;break}return e.abrupt("return");case 7:o=n.events,n.state.is_loaded&&o.closeChannel(),o.attachPort(t.ports[0]),n.setState({is_loaded:!0}),e.prev=11,s=0,u=["profile","lesson","program"];case 13:if(!(s<u.length)){e.next=20;break}return l=u[s],e.next=17,o.fire_event("update_property",{property:l,value:approuter[l],_id:approuter[l].id});case 17:s++,e.next=13;break;case 20:return void 0===n.playstate.initialTimestamp&&n.playstate.BEGIN(),e.next=23,o.fire_event("start",n.props.env);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(11),n.error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[11,25]])})));return function(t){return e.apply(this,arguments)}}()),N(P(n),"onFrame",(function(e){e?e.focus():n.events.closeChannel()})),N(P(n),"error",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&(0,m.addBreadcrumb)({type:"error",category:"error",level:"error",message:e}),n.setState({is_frame:!1,is_loaded:!1,is_error:!0,header_display:""})})),n.state={url:"",is_attempt:!1,is_frame:!0,is_loaded:!1,is_error:!1,header_display:"",header_theme:"",header_compact:!1},n.onFrame=n.onFrame.bind(P(n)),n.error=n.error.bind(P(n)),n.instanceKey=Math.round(1e8*Math.random()).toString(),n.playstate=new y.default,n.setupEvents(),n}return x(r,[{key:"setupEvents",value:function(){var e=this,t=this.events,r=function(t,r){return new Promise((function(n){e.playstate.END(),approuter.finish_activity(t,(function(t){e.setState({attempt:t}),n(t)}),{duration:e.playstate.time,endpoint:e.state.endpoint,print:r})}))};t.on("finish_activity",(function(e){return r(e)})),t.on("finish_activity_aux",(function(e){var t=e.stats,n=e.print;return r(t,n)})),t.on("done",(function(){e.state.attempt&&e.state.is_result_page?e.state.is_attempt||(e.setState({is_attempt:!0}),(0,h.setTimeout)((function(){return e.setState({is_frame:!1,is_loaded:!1})}),3e3)):approuter.next_lesson()})),t.on("play",(function(){return e.playstate.play()})),t.on("pause",(function(){return e.playstate.pause()})),t.on("tutorial",(function(){return e.playstate.tutorial()})),t.on("retry",(function(){e.reloadFrame()})),t.on("paid_feature",(function(e){var t=e.context;return new Promise((function(e){approuter.paid_feature((function(){return e(!0)}),(function(){return e(!1)}),t)}))})),t.on("show_modal",(function(e){approuter.show_modal((new p.default).deserialize(e,{components:{Modal:d.default},onCallback:function(e){return t.fire_event("show_modal_callback",e)}}))})),t.on("error",(function(t){var r=t.message;return e.error(r)})),t.on("play_audio",function(){var t=b(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.audioFile,(a=new URL(e.state.url)).pathname=n,t.abrupt("return",approuter.playAudio(a.toString()));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.on("speak",(function(e){var t=e.text;return approuter.speak(t)})),t.on("stop_audio",(function(e){var t=e.tag;return approuter.stopAudio(t)})),t.on("stop_audio_all",(function(){return approuter.stopAllAudio()})),t.on("wait_audio",(function(e){var t=e.tag;return approuter.waitAudio(t)})),t.on("get_lessongamedata",(function(e){var t=e.defaultValue;return approuter.getLessonGameData(t)})),t.on("save_lessongamedata",(function(e){var t=e.data,r=e.options;return approuter.saveLessonGameData(t,r)}))}},{key:"componentDidMount",value:function(){var e=this;R.get(this.appLabel,"player").then((function(t){e.setState(t),window.addEventListener("message",e.onMessage)})).catch((function(t){return e.error(t.toString())}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.onMessage),this.events.closeChannel()}},{key:"reloadFrame",value:function(){var e=this;approuter.debug.reload_frame_cycle?this.setState({is_frame:!1,is_loaded:!1,is_error:!1},(function(){e.events=(0,o.default)(),(0,h.setTimeout)((function(){return e.setState({is_frame:!0})}))})):approuter.redo_lesson()}},{key:"render",value:function(){var e=approuter.profile,t=this.state,r=t.is_attempt,a=t.is_frame,o=t.is_error,i=(t.is_loaded,t.attempt),p=t.header_display,d=t.header_compact,h=t.header_theme;return n.default.createElement(f.default,{header:!1,scroll:!1},n.default.createElement(s.default,{profile:e,display:p,theme:h,compact:d}),a&&n.default.createElement("iframe",{src:this.state.url,style:{position:"fixed",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",border:"none",margin:0,padding:0,overflow:"hidden",zIndex:0},ref:this.onFrame}),o&&n.default.createElement(A,null),r&&n.default.createElement(u.default,{resultContent:i&&i.requirements&&l.default,moreDetails:i&&i.requirements&&c.default,contentHeight:300,withExplanation:!0,theme:"typing-results",profile:e,attempt:i}))}},{key:"appLabel",get:function(){return this.props.env.app}}]),r}(n.default.Component),A=function(e){j(r,e);var t=E(r);function r(e){var n;return w(this,r),(n=t.call(this,e)).id="ERXP".concat((1048576*(1+Math.random())|0).toString(16).toUpperCase()),n}return x(r,[{key:"componentDidMount",value:function(){(0,m.addBreadcrumb)({message:"app error id ".concat(this.id)}),(0,m.captureMessage)("app error")}},{key:"render",value:function(){return n.default.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#FAFBFC",color:"#2B3749",font:"normal normal normal 20px/30px Open Sans",zIndex:0}},n.default.createElement("div",{style:{width:478,textAlign:"center"}},n.default.createElement("div",{style:{marginBottom:16,font:"normal normal bold 30px/45px Open Sans"}},"Sorry!"),n.default.createElement("div",{style:{marginBottom:32}},"The lesson has failed to run properly. You may continue to the next lesson. You can also contact support for help with reference id ",n.default.createElement("code",{style:{background:"#2B3749",color:"white",display:"inline-block",padding:"0 5px",borderRadius:8}},this.id),"."),n.default.createElement("button",{style:{background:"#2B3749",borderRadius:30,padding:"8px 32px",color:"white",font:"normal normal normal 16px/25px Lato"},onClick:function(){return approuter.next_lesson()}},"Skip to the next lesson")))}}]),r}(n.default.Component)},868:(e,t,r)=>{r(92222),r(91038),r(26699),r(66992),r(69600),r(19601),r(41539),r(26833),r(88674),r(74916),r(39714),r(70189),r(32023),r(78783),r(23123),r(33948),r(60285),Object.defineProperty(t,"__esModule",{value:!0}),t.BundleSettings=void 0,t.isObject=h,t.isPublic=y,t.mergeDeep=m,r(35666);var n;(n=r(48583))&&n.__esModule,r(23340);function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function l(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function f(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){f(o,n,a,i,s,"next",e)}function s(e){f(o,n,a,i,s,"throw",e)}i(void 0)}))}}var d=["authoring","demo"];function h(e){return e&&"object"==typeof e&&!Array.isArray(e)}function m(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e;var a=r.shift();if(h(e)&&h(a))for(var o in a)h(a[o])?(e[o]||Object.assign(e,{[o]:{}}),m(e[o],a[o])):Object.assign(e,{[o]:a[o]});return m.apply(void 0,[e].concat(r))}function y(){return!d.includes(document.location.hostname.split(/\./)[0])}function v(e,t,r,n,a){var o=[];return o.push(e||window.location.protocol,"//",t,".",r),a&&o.push("/",a),o.join("")}function g(e,t,r){return _.apply(this,arguments)}function _(){return(_=p(regeneratorRuntime.mark((function e(t,r,n){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v(t,n,r,0,"manifest.json"),e.next=3,fetch(a);case 3:if((o=e.sent).ok){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,o.json();case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(6),console.warn("malformed manifest",a,e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"index",{}),l(this,"_init_promise",void 0),l(this,"defaultPlayerSettings",{app:null,apps:null,header_display:"",header_theme:"",header_compact:!1,endpoint:"",is_result_page:!0}),l(this,"defaultEditorSettings",{lessonType:{name:"App",description:"App",image:null,template:{activity:{app:null},name:"App lesson",description:"",is_game:!1,is_hidden:!1,is_test:!1,key:"e-cmn cmn-dynamic",lesson_type:"app",objective_completion:!1,score:1e3}},lessonTypes:null}),this._init_promise=this.refreshIndex()}var t,r,n,i,s,c,f;return t=e,r=[{key:"refreshIndex",value:(f=p(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=p(regeneratorRuntime.mark((function e(t,n,a){var i,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((i=e.sent).ok){e.next=5;break}return e.abrupt("return",!1);case 5:return e.t0=o,e.next=8,i.json();case 8:e.t1=e.sent,s=(0,e.t0)(e.t1);try{for(s.s();!(u=s.n()).done;)(l=u.value).domain=a,n[[l.app,l.app_type]]=l,r.frobManifest(l)}catch(e){s.e(e)}finally{s.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),this.index={},e.next=4,t("https://index.edclub.app/apps-manifest.json",this.index,"edclub.app");case 4:if(y()){e.next=7;break}return e.next=7,t("https://index.apps.edclub.dev/apps-manifest.json",this.index,"apps.edclub.dev");case 7:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getLocalDev",value:(c=p(regeneratorRuntime.mark((function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URL("http://localhost")).port="player"===r?3e3:3001,i=new URL("manifest.json",n),e.prev=4,e.next=7,fetch(i);case 7:a=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",!1);case 13:if(a.ok){e.next=15;break}return e.abrupt("return",!1);case 15:return e.prev=15,e.next=18,a.json();case 18:o=e.sent,e.next=25;break;case 21:throw e.prev=21,e.t1=e.catch(15),"malformed manifest at ".concat(i);case 25:if(record={manifest:o,app_type:r},record.manifest.url=n.toString(),this.frobManifest(record),!t||record.manifest.apps.includes(t)){e.next=32;break}return e.abrupt("return",!1);case 32:record.app=t;case 33:return e.abrupt("return",record);case 34:case"end":return e.stop()}}),e,this,[[4,10],[15,21]])}))),function(e,t){return c.apply(this,arguments)})},{key:"get",value:(s=p(regeneratorRuntime.mark((function e(t,r){var n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._init_promise;case 2:if(a=!0,y()){e.next=7;break}return e.next=6,this.getLocalDev(t,r);case 6:n=e.sent;case 7:if(a=!n,n||(n=this.index[[t,r]]),n){e.next=12;break}return console.warn("missing manifest",t,r),e.abrupt("return",{});case 12:if(!a||n.manifest&&y()){e.next=20;break}return e.next=15,g(null,n.domain,n.id);case 15:if(o=e.sent){e.next=18;break}return e.abrupt("return",{});case 18:n.manifest=o,this.frobManifest(n);case 20:return e.abrupt("return",n.manifest);case 21:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"frobManifest",value:function(e){var t;e.manifest&&(t="player"===e.app_type?this.defaultPlayerSettings:this.defaultEditorSettings,e.manifest=m({},t,e.manifest),e.manifest.url||(e.manifest.url=v(null,e.id,e.domain)),"player"==e.app_type?this.frobPlayerManifest(e):this.frobEditorManifest(e))}},{key:"frobPlayerManifest",value:function(e){var t=e.manifest;t.apps||(t.apps=[]),t.app&&(t.apps.push(t.app),delete t.app)}},{key:"frobEditorManifest",value:function(e){var t=e.manifest;if("editor"===e.app_type){var r=new Set;t.lessonTypes||(t.lessonTypes=[]),t.lessonType&&(t.lessonTypes.push(t.lessonType),delete t.lessonType);var n=t.lessonTypes;if(n.length>0)for(var a=0;a<n.length;a++){n[a]=m({},this.defaultEditorSettings.lessonType,n[a]);var o=n[a].template.activity;o?o.app||(o.app=e.app):n[a].template.activity={app:e.app},r.add(o.app),n[a].image=new URL(n[a].image||"app-image.png",t.url).toString()}t.apps=Array.from(r)}}},{key:"appLessonTypes",value:(i=p(regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=0,n=Object.values(this.index);case 2:if(!(r<n.length)){e.next=12;break}if(o=n[r],!y()||o.is_public){e.next=6;break}return e.abrupt("continue",9);case 6:if("editor"===o.app_type){e.next=8;break}return e.abrupt("continue",9);case 8:t.unshift.apply(t,a(o.manifest.lessonTypes));case 9:r++,e.next=2;break;case 12:if(y()){e.next=17;break}return e.next=15,this.getLocalDev(null,"editor");case 15:extra=e.sent,extra&&t.unshift.apply(t,a(extra.manifest.lessonTypes));case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}],r&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.BundleSettings=b},12558:(e,t,r)=>{r(66992),r(21249),r(30489),r(41539),r(74916),r(39714),r(70189),r(78783),r(33948),r(60285),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(67294))&&n.__esModule?n:{default:n},o=r(15239);function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var a=y(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var v={position:"absolute",width:0,height:0,border:0};function g(){return(65536*(1+Math.random())|0).toString(16)}var _=function(e){f(r,e);var t=d(r);function r(e){var n;return u(this,r),(n=t.call(this,e)).tags=[g(),g()],n.state={winner:null},n.onMessage=n.onMessage.bind(m(n)),n.onFrame=n.onFrame.bind(m(n)),n}return c(r,[{key:"onMessage",value:function(e){if(!this.state.winner){var t=new URL(e.data),r=/#(.*)/.exec(t.hash)[1];this.setState({winner:r},(function(){})),window.removeEventListener("message",this.onMessage)}}},{key:"onFrame",value:function(e){}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",this.onMessage),this.timeout=setTimeout((function(){e.state.winner||e.props.onFail(e.props.src)}),5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),window.removeEventListener("message",this.onMessage)}},{key:"render",value:function(){var e=this,t=function(t){var r=new URL(e.props.src);return r.hash=t,r.toString()},r=this.state.winner;return a.default.createElement("div",null,this.tags.map((function(n){return r&&n!==r?null:a.default.createElement("iframe",{key:n,src:t(n),style:v,ref:e.onFrame})})))}}]),r}(a.default.Component),b=(a.default.Component,function(e){f(r,e);var t=d(r);function r(e){var n;return u(this,r),(n=t.call(this,e)).onMessage=n.onMessage.bind(m(n)),n.urls=["https://foo.apps.typingclub.com/test.html"],n.urlcheck=new Set,n.state={is_frames:!0},n}return c(r,[{key:"onMessage",value:function(e){this.urlcheck.add(e.data)}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",this.onMessage),this.waitForUrls=setTimeout((function(){e.setState({is_frames:!1},(function(){var t,r=!1,n=i(e.urls);try{for(n.s();!(t=n.n()).done;){var a=t.value;e.urlcheck.has(a)||(r=!0,(0,o.addBreadcrumb)({message:"failed to load ".concat(a)}))}}catch(e){n.e(e)}finally{n.f()}r&&(0,o.captureMessage)("failed to load iframe")}))}),5e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.onMessage),clearTimeout(this.waitForUrls)}},{key:"render",value:function(){return this.state.is_frames?this.urls.map((function(e,t){return a.default.createElement("iframe",{src:e,style:v,key:t})})):null}}]),r}(a.default.Component));t.default=b},23340:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}r(82526),r(41817),r(96649),r(96078),r(9653),r(19601),r(47941),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageBucket=void 0;var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bucket=t}var t,r,a;return t=e,r=[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=localStorage.getItem(this.bucket);if(null===r)return t;var n=JSON.parse(r),a=n[e];return void 0===a?t:a}},{key:"save",value:function(e,t){var r=localStorage.getItem(this.bucket),n={};null!==r&&(n=JSON.parse(r)),n[e]=t,localStorage.setItem(this.bucket,JSON.stringify(n))}},{key:"assign",value:function(e,t){var r=this.get(e,{});return Object.assign(r,t),this.save(e,r),r}},{key:"getAllKeys",value:function(){var e=localStorage.getItem(this.bucket);if(null===e)return[];var t=JSON.parse(e);return Object.keys(t)}},{key:"deleteAll",value:function(){localStorage.removeItem(this.bucket)}}],r&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.LocalStorageBucket=a},53239:(e,t,r)=>{r(82526),r(41817),r(96649),r(26699),r(21249),r(96078),r(9653),r(69720),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(67294))&&n.__esModule?n:{default:n};function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callbacks={},this.counter=0}var t,r,n;return t=e,r=[{key:"serialize",value:function(e){var t=this;return JSON.stringify(e,(function(e,r){return"type"===e&&"function"==typeof r?r.name:"function"==typeof r?t.addCallback(r):["_owner","_store","ref","key"].includes(e)?void 0:r}))}},{key:"deserialize",value:function(e,t){if("string"==typeof e&&(e=JSON.parse(e)),e instanceof Object)return this.deserializeElement(e,t);throw new Error("Deserialization error: incorrect data type")}},{key:"deserializeElement",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=r.components,s=void 0===o?{}:o,l=r.reviver,c=r.onCallback;if("object"!=typeof e)return e;if(null===e)return e;if(e instanceof Array)return e.map((function(e,n){return t.deserializeElement(e,r,n)}));for(var f=e.type,p=e.props,d=function(){var e=u(m[h],2),t=e[0],r=e[1];void 0!==r.__callback__&&(p[t]=function(e){return c(r.__callback__)})},h=0,m=Object.entries(p);h<m.length;h++)d();if("string"!=typeof f)throw new Error("Deserialization error: element type must be string");if(f=s[f]||f.toLowerCase(),p.children&&(p=i(i({},p),{},{children:this.deserializeElement(p.children,r)})),l){var y=l(f,p,n,s);f=y.type,p=y.props,n=y.key,s=y.components}return a.default.createElement(f,i(i({},p),{},{key:n}))}},{key:"addCallback",value:function(e){var t=this.counter;return this.counter++,this.callbacks[t]=e,{__callback__:t}}},{key:"call",value:function(e){this.callbacks[e]()}}],r&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=p},25318:(e,t,r)=>{r(92222),r(41539),r(88674),r(74916),r(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return j.apply(this,arguments)},r(35666);var n=c(r(67294)),a=c(r(24508)),o=c(r(57023)),i=c(r(24340)),s=r(33946),u=c(r(28891)),l=c(r(3056));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var a=v(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function b(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){b(o,n,a,i,s,"next",e)}function s(e){b(o,n,a,i,s,"throw",e)}i(void 0)}))}}var k=function(){var e=w(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(736),r.e(426),r.e(903)]).then(r.bind(r,10066));case 2:return n=e.sent,e.abrupt("return",n.default[t]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(v,e);var t,r,c,m=h(v);function v(){var e;f(this,v);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(y(e=m.call.apply(m,[this].concat(r))),"state",{attempt:null}),e}return t=v,(r=[{key:"componentDidMount",value:function(){var e=this;approuter.done=function(){(0,s.cleanup_ads)(),e.setState({attempt:approuter._attempt}),setTimeout((function(){return $("#game").hide()}),1e3)}}},{key:"render",value:function(){var e=this.state.attempt,t=approuter,r=t.lesson,s=t.profile,c=r.activity.app.toUpperCase().split(".")[2];return n.default.createElement("div",null,n.default.createElement(a.default,{styles:["TPGAME","GAME_"+c],key:"game"+c,header:!1,scroll:!1},e?null:this.props.component,n.default.createElement(o.default,{name:"",profile:s,display:"game"}),e&&n.default.createElement(i.default,{resultContent:e&&e.requirements&&l.default,moreDetails:e&&e.requirements&&u.default,contentHeight:300,withExplanation:!0,theme:"typing-results",profile:s,attempt:e})))}}])&&p(t.prototype,r),c&&p(t,c),Object.defineProperty(t,"prototype",{writable:!1}),v}(n.default.Component);function j(){return j=w(regeneratorRuntime.mark((function e(t,r){var a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=approuter.lesson.activity.app,o={"typing.games.BalloonValley":function(){var e=w(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("BalloonValley");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),"typing.games.MonsterAttack":function(){var e=w(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("MonsterAttack");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),"typing.games.TempleBash":function(){var e=w(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("TempleBash");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),"typing.games.FloatingBubbles":function(){var e=w(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("FloatingBubbles");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),"typing.games.AppleThieves":function(){var e=w(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("AppleThieves");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},e.next=4,o[a]();case 4:return i=e.sent,e.next=7,i(t,r);case 7:return s=e.sent,e.abrupt("return",n.default.createElement(x,{component:s}));case 9:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}},74872:(__unused_webpack_module,exports,__webpack_require__)=>{__webpack_require__(82526),__webpack_require__(41817),__webpack_require__(96649),__webpack_require__(92222),__webpack_require__(96078),__webpack_require__(9653),__webpack_require__(41539),__webpack_require__(88674),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(35666);var _api=_interopRequireDefault(__webpack_require__(75564)),_package=__webpack_require__(4147),_incident=__webpack_require__(15239);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){asyncGeneratorStep(o,n,a,i,s,"next",e)}function s(e){asyncGeneratorStep(o,n,a,i,s,"throw",e)}i(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var Debug=function Debug(superclass){return function(_superclass){_inherits(_class2,_superclass);var _super=_createSuper(_class2);function _class2(){var e;_classCallCheck(this,_class2);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _defineProperty(_assertThisInitialized(e=_super.call.apply(_super,[this].concat(r))),"debug",{}),e}return _createClass(_class2,[{key:"refresh_debug",value:function(){var _refresh_debug=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var cacheKey,response,debug;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,cacheKey=Math.round(1e8*Math.random()),_context.next=4,fetch("/api/v".concat(_api.default.version,"/student/debug/?").concat(cacheKey));case 4:if(response=_context.sent,response.ok){_context.next=7;break}return _context.abrupt("return");case 7:return _context.next=9,response.json();case 9:if(debug=_context.sent,debug.version===_package.version){_context.next=13;break}return this.debug={},_context.abrupt("return");case 13:this.debug=debug,debug&&eval(debug.inject),_context.next=20;break;case 17:_context.prev=17,_context.t0=_context.catch(0),(0,_incident.captureException)(_context.t0);case 20:case"end":return _context.stop()}}),_callee,this,[[0,17]])})));function refresh_debug(){return _refresh_debug.apply(this,arguments)}return refresh_debug}()}]),_class2}(superclass)},_default=Debug;exports.default=_default},53566:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(66992),r(96078),r(9653),r(41539),r(88674),r(78783),r(33948),r(60285),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FakeEphemeraManager=void 0,r(35666);var n=r(23340),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(58200)),o=r(56392);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){p(o,n,a,i,s,"next",e)}function s(e){p(o,n,a,i,s,"throw",e)}i(void 0)}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function y(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var _=function(){function e(t){h(this,e),v(this,"bucket",new n.LocalStorageBucket("activity-ephemera")),v(this,"inMemory",{}),v(this,"inStorageTimer",{}),v(this,"inBackendTimer",{}),v(this,"inStorageDelay",800),v(this,"inBackendDelay",1500),v(this,"inStorageLiveDelay",72e5),this.approuter=t}var t,r,i,s,u,l;return y(e,[{key:"get",value:(l=d(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRecord(this.approuter.lesson.id);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"save",value:(u=d(regeneratorRuntime.mark((function e(t){var r,n,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.length>1&&void 0!==o[1]?o[1]:{},n=this.approuter.lesson.id,a={timestamp:Date.now(),lesson_id:n,data:t},r.checkpoint?this.saveRecordCheckpoint(n,a):this.saveRecord(n,a);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"getRecord",value:(s=d(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.inMemory[t])){e.next=3;break}return e.abrupt("return",r);case 3:if(!(n=this.bucket.get(t))){e.next=8;break}if(this.inMemory[t]=n,!(n.timestamp>Date.now()-this.inStorageLiveDelay)){e.next=8;break}return e.abrupt("return",n);case 8:return e.next=10,this.getLessonGameData(t);case 10:if(!(a=e.sent)){e.next=16;break}return o=n&&n.timestamp?a.timestamp?n.timestamp>a.timestamp?n:a:n:a,this.inMemory[t]=o,this.bucket.save(t,o),e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"saveRecord",value:function(e,t){var r=this;function n(t,r,n,a){clearTimeout(r[e]),r[e]=setTimeout(a,n)}this.inMemory[e]=t,n(0,this.inStorageTimer,this.inStorageDelay,(function(){return r.bucket.save(e,t)})),n(0,this.inBackendTimer,this.inBackendDelay,(function(){return r.saveLessonGameData(e,t)}))}},{key:"saveRecordCheckpoint",value:(i=d(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.inMemory[t]=r,this.bucket.save(t,r),e.next=4,this.saveLessonGameData(t,r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getLessonGameData",value:(r=d(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("/api/v1.1/lessongamedata/".concat(t,"/"),(0,o.getBaseUrl)()||window.location),n=a.getToken(),e.next=4,fetch(r,{headers:{Authorization:"Token ".concat(n)}});case 4:if((i=e.sent).ok){e.next=14;break}e.t0=i.status,e.next=401===e.t0?9:404===e.t0?12:13;break;case 9:return e.next=11,a.getFreshSession();case 11:return e.abrupt("return",this.getLessonGameData(t));case 12:return e.abrupt("return",null);case 13:throw new Error("getLessonGameData ".concat(i.status));case 14:return e.next=16,i.json();case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"saveLessonGameData",value:(t=d(regeneratorRuntime.mark((function e(t,r){var n,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("/api/v1.1/lessongamedata/",(0,o.getBaseUrl)()||window.location),i=a.getToken(),e.next=4,fetch(n,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(i)},body:JSON.stringify(r)});case 4:if((s=e.sent).ok){e.next=13;break}e.t0=s.status,e.next=401===e.t0?9:12;break;case 9:return e.next=11,a.getFreshSession();case 11:return e.abrupt("return",this.saveLessonGameData(t,r));case 12:throw new Error("saveLessonGameData ".concat(s.status));case 13:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"dropEphemera",value:function(){this.bucket.deleteAll(),this.inMemory={}}}]),e}(),b=function(){function e(){h(this,e),v(this,"debounce",500),v(this,"timer",void 0),v(this,"bucket",new n.LocalStorageBucket("activity-ephemera"))}return y(e,[{key:"get",value:function(e){return this.bucket.get("default",e)}},{key:"save",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.checkpoint?this.bucket.save("default",e):(clearTimeout(this.timer),this.timer=setTimeout((function(){t.bucket.save("default",e)}),this.debounce))}}]),e}();t.FakeEphemeraManager=b;var w=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(r,e);var t=u(r);function r(){var e;h(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return v(c(e=t.call.apply(t,[this].concat(a))),"ephemeraManager",new _(c(e))),v(c(e),"getLessonGameData",(function(t){return e.ephemeraManager.get(t)})),v(c(e),"saveLessonGameData",(function(t,r){return e.ephemeraManager.save(t,r)})),e}return r}(e)};t.default=w},65477:(e,t,r)=>{r(82526),r(41817),r(96649),r(96078),r(9653),r(41539),r(88674),Object.defineProperty(t,"__esModule",{value:!0}),t.AppRouter=void 0,t.start=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;function i(e){window.approuter=e,e.set_resolveAppRoute(t),e.set_url_routes(r),n&&n(e),window.dispatchEvent(new CustomEvent("edload",{}))}return new Promise((function(t){o.default.render(a.default.createElement(I,{root:e,onMount:i}),e,t)}))};var n=E(r(69606)),a=E(r(67294)),o=E(r(73935)),i=E(r(47642)),s=r(17858),u=E(r(24040)),l=E(r(38452)),c=r(16436),f=E(r(90699)),p=E(r(52870)),d=E(r(65973)),h=E(r(51891)),m=E(r(85438)),y=E(r(15101)),v=E(r(95446)),g=E(r(4803)),_=E(r(81810)),b=E(r(52319)),w=E(r(12558)),k=E(r(74872)),x=E(r(58301)),j=E(r(53566)),O=E(r(4922));function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=M(e);if(t){var a=M(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function A(e,t,r){return(t=D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(p,e);var t,r,o,f=N(p);function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S(this,p),A(R(e=f.call(this,t)),"events",new i.default(["unload","show_modal","hide_modal","logout","play_started"])),A(R(e),"audio_player",void 0),(0,c.bindAll)(R(e)),e.root=(0,n.default)(e.props.root),e.state={},e}return t=p,(r=[{key:"componentDidMount",value:function(){this.register(),this.props.onMount(this)}},{key:"render",value:function(){return this.state.component?this.profile&&1&this.profile.crufty?a.default.createElement("div",null,this.state.component,a.default.createElement(w.default,null)):this.state.component:a.default.createElement("div",{className:"boxLoading boxLoading-dark"})}},{key:"register",value:function(){var e=this;this.audio_player=new u.default,this.keymanager.register((function(t){if(t.keyCode===l.default.escape&&approuter.modals.length){var r=approuter.modals[approuter.modals.length-1];return r.props.esc_close&&e.hide_modal(r.props.id),!0}}),-1),(0,s.registerApprouterEventBus)(this.events),window.addEventListener("popstate",(function(t){var r=t.state;if(r&&r.app)return e.apply_env(r)})),this.registerTryLesson(),this.events.on("logout",(function(){return e.ephemeraManager.dropEphemera()})),this.videoSettings=new O.default,this.videoSettings.load().catch((function(e){return console.warn("error loading player settings",e)}))}}])&&P(t.prototype,r),o&&P(t,o),Object.defineProperty(t,"prototype",{writable:!1}),p}((0,c.constructClass)(a.default.Component,f.default,p.default,d.default,h.default,m.default,y.default,_.default,b.default,v.default,g.default,k.default,x.default,j.default));t.AppRouter=I},15101:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(3317))&&n.__esModule?n:{default:n};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(r,e);var t=s(r);function r(){var e;o(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return f(l(e=t.call.apply(t,[this].concat(i))),"keymanager",new a.default({sys:0,low:50,normal:100,high:500,max:1e3},100)),e}return r}(e)};t.default=p},52870:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(82729))&&n.__esModule?n:{default:n};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var h=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(f,e);var t,r,n,l=u(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return p(c(e=l.call.apply(l,[this].concat(r))),"modals",[]),e}return t=f,r=[{key:"show_modal",value:function(e){this.modals.push(e),this.events.fire_event("show_modal",e)}},{key:"hide_modal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,a.default)(this.modals,(function(t){return t.props.id==e}))[0];!t&&r&&r.props.onClose&&r.props.onClose(),this.events.fire_event("hide_modal",e)}}],r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(e)};t.default=h},95446:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(69826),r(96078),r(9653),r(41539),r(88674),r(54747),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(35666);var n=s(r(75564)),a=r(264),o=s(r(7454)),i=s(r(10358));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,s,"next",e)}function s(e){u(o,n,a,i,s,"throw",e)}i(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var a=y(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var _=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(b,e);var t,r,s,u,h,y,g,_=d(b);function b(){var e;c(this,b);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(m(e=_.call.apply(_,[this].concat(r))),"profile",void 0),v(m(e),"program",void 0),v(m(e),"lesson",void 0),v(m(e),"last_lesson",void 0),v(m(e),"game",void 0),v(m(e),"_badges",void 0),e}return t=b,r=[{key:"refresh_program",value:(g=l(regeneratorRuntime.mark((function e(t){var r,s,u,l,c,f,p,d,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]&&h[1],s=!r,this.program&&t===this.program.id){e.next=26;break}if(l=this.profile.programs.find((function(e){return e.id==t})),l){e.next=6;break}return e.abrupt("return",this.not_found());case 6:if(!l.is_edclub){e.next=18;break}return c="".concat("https://static.typingclub.com/m/","build/lessonplans/").concat(t,".json"),e.next=10,fetch(c);case 10:if((f=e.sent).ok){e.next=13;break}throw"".concat(f.statusText," ").concat(c);case 13:return e.next=15,f.json();case 15:u=e.sent,e.next=21;break;case 18:return e.next=20,n.default.get("/api/v".concat(n.default.version,"/program2/").concat(t,"/"));case 20:u=e.sent;case 21:for(p=this.program=(0,a.wrap)(u,o.default.prototype),d=0;d<p.lessons.length;d++)p.lessons[d]=(0,a.wrap)(p.lessons[d],i.default.prototype);this.lesson=null,s=!0,p.is_basic=!l.is_adfree&&l.is_basic;case 26:if(r&&"test"===this.program.program_type&&(s=!0),!s){e.next=31;break}return this.guessTeam(),e.next=31,this.refresh_game();case 31:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"refresh_game",value:(y=l(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.default.get("/api/v".concat(n.default.version,"/program2/").concat(Math.abs(this.program.id),"/game/"));case 2:this.game=e.sent,this.program.merge_progress(this.game,this.team_program,this.team);case 4:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"refresh_lesson",value:(h=l(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lesson&&t===this.lesson.id){e.next=7;break}return e.next=3,this.refresh_program(r,!0);case 3:if(this.lesson=this.program.lessons.find((function(e){return e.id===t})),this.lesson){e.next=6;break}return e.abrupt("return",this.not_found());case 6:this.last_lesson=this.lesson;case 7:this.guessTeam();case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"refresh_badges",value:(u=l(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._badges){e.next=7;break}return e.next=3,n.default.get("/api/v".concat(n.default.version,"/badge/"));case 3:t=e.sent,r={},t.objects.forEach((function(e){r[e.resource_uri]=e})),this._badges=r;case 7:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})}],r&&f(t.prototype,r),s&&f(t,s),Object.defineProperty(t,"prototype",{writable:!1}),b}(e)};t.default=_},85438:(e,t,r)=>{r(30489),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(58200));r(264);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var f=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,r,a,l=u(c);function c(){return o(this,c),l.apply(this,arguments)}return t=c,r=[{key:"next_lesson",value:function(){if(this.lesson){var e=this.lesson.nextLessonId();if(!e)return this.exit_lesson();this.goto_app("lesson",{id:e,program_id:this.program.id})}}},{key:"redo_lesson",value:function(){if(!this.lesson)throw"no lesson";this.apply_env({app:"lesson",id:this.lesson.id,program_id:this.program.id,is_redo:!0})}},{key:"exit_lesson",value:function(){if(!this.program)return this.dashboard();this.lesson_plan()}},{key:"logout",value:function(){n.signUserOut().then(n.redirectAfterLogout)}},{key:"goto",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&t.target&&(t={}),this.goto_app(e,t)}},{key:"edit_profile",value:function(e){this.goto("student.profile.profiledetails_app",e)}},{key:"license_key_app",value:function(e){this.goto("student.profile.license_app",e)}},{key:"edit_password",value:function(e){this.goto("student.profile.changepassword_app",e)}},{key:"student_plans",value:function(e){this.goto("student.profile.plans_app",e)}},{key:"student_billing",value:function(e){this.goto("student.profile.billing_app",e)}},{key:"delete_account",value:function(e){this.goto("student.profile.deleteaccount_app",e)}},{key:"badges_page",value:function(e){this.goto("student.badge_app",e)}},{key:"stats_page",value:function(e){this.goto("student.stats_app",e)}},{key:"catalog_page",value:function(e){this.goto("student.catalog_app",e)}},{key:"more_tests",value:function(e){this.goto("student.more_tests",e)}},{key:"login_page",value:function(e){this.goto("shared.login_app",e)}},{key:"signup_page",value:function(e){this.goto("shared.signup_app",e)}},{key:"dashboard",value:function(){this.goto_app("student.dashboard_app")}},{key:"not_found",value:function(){this.goto_app("shared.not_found_app")}},{key:"lesson_plan",value:function(e){var t="student.lessonplan";!e&&this.program&&(e=this.program.id,"test"==this.program.program_type&&(t="student.testplan")),e&&this.goto_app(t,{id:e})}},{key:"has_scoreboard",value:function(){return!this.profile.block_share_grades&&(this.program&&this.team_program&&this.team_program.scoreboard||"student.scoreboard"==this.current_app.app)}},{key:"is_leaderboard",value:function(){return"student.scoreboard"==this.current_app.app?"top"==this.current_app.share_grades:this.program&&"top"==this.team_program.share_grades}},{key:"scoreboard",value:function(){"student.scoreboard"==this.current_app.app?this.refresh():this.program&&this.goto_app("student.scoreboard",{id:this.team_program.id})}}],r&&i(t.prototype,r),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(e)};t.default=f},52319:(e,t,r)=>{r(30489),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(45112);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(c,e);var t,r,u,l=s(c);function c(){return a(this,c),l.apply(this,arguments)}return t=c,r=[{key:"paid_feature",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,n.LaunchStudentPlansModal)(e,t,r)}}],r&&o(t.prototype,r),u&&o(t,u),Object.defineProperty(t,"prototype",{writable:!1}),c}(e)};t.default=c},52051:(e,t,r)=>{r(82526),r(41817),r(96649),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Swait=t.Splay=t.Spause=t.Sintro=t.Shelp=void 0;var n,a=(n=r(48583))&&n.__esModule?n:{default:n};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function s(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}t.Swait=0;t.Sintro=1;t.Splay=2;t.Spause=3;t.Shelp=4;var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return(new Date).getTime()},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,e),s(this,"state",0),s(this,"pauseCount",0),s(this,"time",0),s(this,"initialTimestamp",void 0),s(this,"lastTimestamp",void 0),s(this,"maxPause",void 0),s(this,"onStateChange",void 0),s(this,"onStateChangeAux",void 0),this.timeFunction=t,this.maxPause=r}var t,r,n;return t=e,r=[{key:"beginTime",value:function(){this.lastTimestamp=this.timeFunction()}},{key:"endTime",value:function(){this.time+=this.timeFunction()-this.lastTimestamp}},{key:"setState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.state=e,this.onStateChange&&this.onStateChange(e),t&&this.onStateChangeAux&&this.onStateChangeAux(e)}},{key:"tutorial",value:function(){switch(this.state){case 0:this.setState(1),this.beginTime();break;case 1:this.setState(0),this.endTime();break;case 2:this.setState(4),this.endTime();break;case 3:this.setState(4);break;case 4:this.setState(2),this.beginTime()}}},{key:"play",value:function(){switch(this.state){case 0:case 4:case 3:this.setState(2),this.beginTime();break;case 1:this.setState(2)}}},{key:"pause",value:function(){switch(this.state){case 0:case 1:case 4:break;case 2:if(this.maxPause&&this.pauseCount>this.maxPause)throw"no more pause";this.pauseCount++,this.setState(3),this.endTime();break;case 3:this.setState(2),this.beginTime()}}},{key:"BEGIN",value:function(){this.state=0,this.pauseCount=0,this.time=0,this.initialTimestamp=this.timeFunction()}},{key:"END",value:function(){switch(this.state){case 0:(0,a.default)(0===this.time),this.time=this.timeFunction()-this.initialTimestamp;break;case 1:case 2:this.endTime()}}}],r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=l},4803:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(21249),r(96078),r(9653),r(41539),r(74916),r(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(35666);var n=m(r(21294)),a=m(r(48583)),o=h(r(58200)),i=m(r(75564)),s=m(r(55586)),u=(h(r(71327)),r(264)),l=r(15239),c=m(r(38400)),f=m(r(30381)),p=h(r(95343));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){y(o,n,a,i,s,"next",e)}function s(e){y(o,n,a,i,s,"throw",e)}i(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var a=j(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return k(this,r)}}function k(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function O(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var S=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(j,e);var t,r,d,h,m,y,k=w(j);function j(){var e;g(this,j);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return O(x(e=k.call.apply(k,[this].concat(r))),"profile",void 0),e}return t=j,r=[{key:"refresh_profile",value:(y=v(regeneratorRuntime.mark((function e(t){var r,a,s,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.profile||t){e.next=2;break}return e.abrupt("return",this.profile);case 2:if(o.isLoggedIn()){e.next=5;break}return this.profile=new n.default,e.abrupt("return",this.profile);case 5:return e.next=7,i.default.get("/api/v"+i.default.version+"/student/me/");case 7:if(r=e.sent,(a=(0,u.wrap)(r,n.default.prototype)).teams=a.teams.map((function(e){return(0,u.wrap)(e,c.default.prototype).init()})),"zh"===(s=a.locale.split("_")[0])&&(s="zh-cn"),f.default.locale(s),this.profile=a,(d=p.default.getLocale(a.locale)).id===p.default.getUserLocale().id){e.next=18;break}return e.next=18,p.i18n.changeLanguage(d.id);case 18:return document.body.classList.contains("authoring-view")||("rtl"===d.dir?document.body.classList.add("rtl-body"):document.body.classList.remove("rtl-body")),(0,l.profile_changed)(a),e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"update_profile",value:(m=v(regeneratorRuntime.mark((function e(){var t,r,n,o,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:null,r=s.length>1&&void 0!==s[1]?s[1]:{},n=r.is_full_refresh||!1,e.next=5,this.materialize_profile();case 5:if(!t){e.next=19;break}if("object"!=typeof t){e.next=12;break}return e.next=9,i.default.patch("/api/v".concat(i.default.version,"/student/").concat(this.profile.id,"/"),t);case 9:o=e.sent,e.next=19;break;case 12:if("function"!=typeof t){e.next=18;break}return e.next=15,t();case 15:o=e.sent,e.next=19;break;case 18:(0,a.default)(!1,"don't know what to do with ".concat(t));case 19:if(t.locale){e.next=22;break}return e.next=22,this.refresh_profile(!0);case 22:if(!n){e.next=25;break}return e.next=25,this.refresh();case 25:return e.abrupt("return",o);case 26:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"materialize_profile",value:(h=v(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.profile.is_template){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,i.default.post("/api/v".concat(i.default.version,"/student/materialize_template_user/"),{timezone:s.default.determine().name()});case 4:return t=e.sent,e.next=7,o.signUserIn(t.login_token);case 7:return e.next=9,this.refresh_profile();case 9:return r=e.sent,(n=document.createElement("img")).src="https://s.typingclub.com/marketing/convert?env=tp&user_id="+this.profile.id,n.width=0,n.height=0,document.body.appendChild(n),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})}],r&&_(t.prototype,r),d&&_(t,d),Object.defineProperty(t,"prototype",{writable:!1}),j}(e)};t.default=S},81810:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(96078),r(9653),r(41539),r(88674),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(35666);var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(28787)),a=s(r(75564)),o=r(264),i=s(r(64489));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function l(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var a=v(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function b(e){return new Promise((function(t){return setTimeout(t,e)}))}var w=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(m,e);var t,r,s,u,l=h(m);function m(){var e;f(this,m);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(y(e=l.call.apply(l,[this].concat(r))),"is_dirty_profile",void 0),e}return t=m,r=[{key:"finish_activity",value:(u=c(regeneratorRuntime.mark((function e(t,r){var s,u,l,f,p,d,h,m,y,v=this,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=g.length>2&&void 0!==g[2]?g[2]:{},!this.is_rigged){e.next=3;break}return e.abrupt("return");case 3:if(u=this.lesson,l=u.activity,f=l.app,!(p=t.is_partial)||this.profile.save_partial_attempts){e.next=10;break}return e.abrupt("return");case 10:return d=s.endpoint,e.next=13,this.materialize_profile();case 13:if(h=(new Date).getTime()-this.start_time,void 0!==s.duration&&(h=Math.min(h,s.duration)),m={team_id:this.team.id,lesson_id:this.lesson.id,frotz:t,start_time:this.start_time,duration:h,print:s.print},y=function(){var e=c(regeneratorRuntime.mark((function e(t){var n,u,l,c,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.default.version,u=a.default.post,l="/api/v".concat(n,"/attempt/").concat(t,"/"),f=0;case 3:if(!(f<5)){e.next=21;break}return e.prev=4,e.next=7,u(l,m);case 7:return c=e.sent,e.abrupt("break",21);case 11:if(e.prev=11,e.t0=e.catch(4),400!==e.t0.status||"team_deleted"!==e.t0.responseJSON.code){e.next=16;break}return v.dashboard(),e.abrupt("return");case 16:return e.next=18,b(2500);case 18:f++,e.next=3;break;case 21:if(c){e.next=24;break}return p||v.redo_lesson(),e.abrupt("return");case 24:if(!c.error||!v._attempt){e.next=26;break}return e.abrupt("return");case 26:v.is_dirty_profile=!0,d=(0,o.wrap)(c,i.default.prototype).init(),s.print&&!d.print&&(d.print=s.print),v._attempt=d,r(d);case 31:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),!d){e.next=21;break}return e.next=20,y(d);case 20:return e.abrupt("return");case 21:e.t0=f,e.next="typing.classic_typing_app"===e.t0||"typing.videotyping_app"===e.t0||"typing.boxed_typing"===e.t0||"typing.games.BalloonValley"===e.t0||"typing.games.MonsterAttack"===e.t0||"typing.games.TempleBash"===e.t0||"typing.games.FloatingBubbles"===e.t0||"typing.games.AppleThieves"===e.t0||"student.placementtest_app"===e.t0?24:"student.videoplayer"===e.t0?30:"decisionmaking"===e.t0?33:"spelling.cards"===e.t0||"spelling.spellit"===e.t0?36:"spelling.crossword"===e.t0||"spelling.fillblank"===e.t0||"spelling.multichoice"===e.t0?39:"spelling.shuffle"===e.t0||"spelling.dictation"===e.t0?42:"spelling.dropquiz"===e.t0?45:"spelling.story"===e.t0?48:"reading"===e.t0?51:"spelling.proofreading"===e.t0?54:"spelling.quiz"===e.t0?57:60;break;case 24:if(m.frotz.history){e.next=27;break}return n.captureMessage("wrong data in postTypingResults"),e.abrupt("return");case 27:return e.next=29,y("postTypingResults");case 29:return e.abrupt("break",61);case 30:return e.next=32,y("postVideoResults");case 32:return e.abrupt("break",61);case 33:return e.next=35,y("postDecisionMakingResults");case 35:return e.abrupt("break",61);case 36:return e.next=38,y("postSpellingCardsResults");case 38:return e.abrupt("break",61);case 39:return e.next=41,y("postSpellingCrosswordResults");case 41:return e.abrupt("break",61);case 42:return e.next=44,y("postSpellingDictationResults");case 44:return e.abrupt("break",61);case 45:return e.next=47,y("postSpellingDropquizResults");case 47:return e.abrupt("break",61);case 48:return e.next=50,y("postSpellingCardsResults");case 50:return e.abrupt("break",61);case 51:return e.next=53,y("postReadingResults");case 53:return e.abrupt("break",61);case 54:return e.next=56,y("postProofReadingResults");case 56:return e.abrupt("break",61);case 57:return e.next=59,y("postSpellingQuizResults");case 59:return e.abrupt("break",61);case 60:console.log("finish_activity","unknown app",f);case 61:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})}],r&&p(t.prototype,r),s&&p(t,s),Object.defineProperty(t,"prototype",{writable:!1}),m}(e)};t.default=w},58301:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(66992),r(96078),r(9653),r(41539),r(26833),r(88674),r(17727),r(39714),r(78783),r(33948),r(60285),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AudioManager=void 0,r(35666);var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(58200)),a=r(56392);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){d(o,n,a,i,s,"next",e)}function s(e){d(o,n,a,i,s,"throw",e)}i(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function v(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var _=function(){function e(){m(this,e),v(this,"context",new AudioContext),v(this,"id",0),v(this,"pending",{})}var t,r,o,i,s,u,l,c,p;return t=e,r=[{key:"attemptToGetAWorkingContext",value:(p=h(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("suspended"!==(t=this.context).state){e.next=13;break}return e.prev=2,e.next=5,new Promise((function(e,n){t.resume().then((function(){r&&clearTimeout(r),e()})),r=setTimeout(n,500)}));case 5:case 13:return e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:e.next=14;break;case 14:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return p.apply(this,arguments)})},{key:"playAudio",value:(c=h(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("sound file not found");case 5:return e.t0=this,e.next=8,r.arrayBuffer();case 8:return e.t1=e.sent,e.abrupt("return",e.t0.playAudioBuffer.call(e.t0,e.t1));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"speak",value:(l=h(regeneratorRuntime.mark((function e(t){var r,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new URL("/api/v1.1/texttospeech/text/",(0,a.getBaseUrl)()||window.location),o=r.searchParams,i=n.getToken()){e.next=6;break}return console.error("approuter.speak","no valid token"),e.abrupt("return");case 6:return o.set("text",t),o.set("token",i),e.next=10,fetch(r.toString());case 10:if((s=e.sent).ok){e.next=20;break}if(401!==s.status){e.next=19;break}return e.next=15,n.getFreshSession();case 15:return e.sent,e.abrupt("return",this.speak(t));case 19:throw new Error("text to speech failed");case 20:return e.t0=this,e.next=23,s.arrayBuffer();case 23:return e.t1=e.sent,e.abrupt("return",e.t0.playAudioBuffer.call(e.t0,e.t1));case 25:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"playAudioBuffer",value:(u=h(regeneratorRuntime.mark((function e(t){var r,n,a,o,i,s,u,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.attemptToGetAWorkingContext();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",{duration:0});case 5:return(n=r.createGain()).connect(r.destination),a=r.createBufferSource(),e.next=10,r.decodeAudioData(t);case 10:return a.buffer=e.sent,o=a.buffer.duration,a.playbackRate.value=1,a.connect(n),i=this.id++,s=new Promise((function(e,t){a.addEventListener("ended",e)})),u={id:i,onended:s,source:a,gain:n,duration:o},this.pending[u.id]=u,s.finally((function(){delete l.pending[u.id]})),a.start(0),e.abrupt("return",{id:i,duration:o});case 21:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"stopAudio",value:(s=h(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:t=e.sent,(r=this.pending[t.id])&&r.source.stop();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"waitAudio",value:(i=h(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(t=e.sent,!(r=this.pending[t.id])){e.next=7;break}return e.next=7,r.onended;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"stopAllAudio",value:function(){var e,t=Object.values(this.pending),r=f(t);try{for(r.s();!(e=r.n()).done;)e.value.gain.gain.exponentialRampToValueAtTime(.01,this.context.currentTime+1)}catch(e){r.e(e)}finally{r.f()}setTimeout((function(){var e,r=f(t);try{for(r.s();!(e=r.n()).done;)e.value.source.stop()}catch(e){r.e(e)}finally{r.f()}}),2e3)}}],r&&y(t.prototype,r),o&&y(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.AudioManager=_;var b=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(r,e);var t=s(r);function r(){var e;m(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return v(l(e=t.call.apply(t,[this].concat(a))),"resourceAudioManager",new _),v(l(e),"frobAudioContext",(function(){"suspended"===e.resourceAudioManager.context.state&&e.resourceAudioManager.context.resume()})),v(l(e),"speak",(function(t){return e.resourceAudioManager.speak(t)})),v(l(e),"playAudio",(function(t){return e.resourceAudioManager.playAudio(t)})),v(l(e),"stopAudio",(function(t){return e.resourceAudioManager.stopAudio(t)})),v(l(e),"waitAudio",(function(t){return e.resourceAudioManager.waitAudio(t)})),v(l(e),"stopAllAudio",(function(){return e.resourceAudioManager.stopAllAudio()})),e}return r}(e)};t.default=b},65973:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(57327),r(69826),r(26699),r(69600),r(21249),r(85827),r(2707),r(96078),r(9653),r(41539),r(74916),r(32023),r(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(r(67294)),a=u(r(42644)),o=r(17858),i=r(15239),s=r(95343);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var a=m(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function g(e){(0,i.addBreadcrumb)({category:"log",level:"info",message:e})}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"team assert fail";e||(0,i.withScope)((function(e){throw approuter.program&&e.setExtra("program_id",approuter.program.id),approuter.team&&e.setExtra("team_id",approuter.team.id),e.setExtra("teamprograms",approuter.profile.teamprograms.map((function(e){return{id:e.id,team:e.team_id,program:e.program_id}}))),t}))}var b=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(d,e);var t,r,i,u=p(d);function d(){var e;l(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y(h(e=u.call.apply(u,[this].concat(r))),"team",void 0),y(h(e),"team_program",void 0),y(h(e),"team_for_program",new o.Persistence("team_for_program")),e}return t=d,(r=[{key:"_resetTeam",value:function(){this._clearTeam(),this.team_for_program.invalidate()}},{key:"_setTeam",value:function(e){var t=this;_(e,"setTeam: empty team"),g("setting team ".concat(e.id)),this.team=e,this.team_program=this.profile.teamprograms.find((function(e){return e.team_id==t.team.id&&e.program_id==t.program.id})),_(this.team_program,"setTeam: no team_program for ".concat(this.team.id,", ").concat(this.program.id)),this.team_for_program.set(this.program.id,this.team.id)}},{key:"_clearTeam",value:function(){this.team=null,this.team_program=null}},{key:"teamsForCurrentProgram",value:function(){return this.teamsForProgram(this.program)}},{key:"teamsForProgram",value:function(e){var t=this.profile,r=t.teamprograms.filter((function(t){return e.id==t.program_id})).map((function(e){return e.team_id})),n=t.teams.filter((function(e){return r.includes(e.id)}));return _(n.length>0,"teamsForProgram: no teams for ".concat(e.id)),n}},{key:"guessTeam",value:function(){var e=this;if(!this.is_rigged){var t=this.team_for_program.get(this.program.id);if(t){var r=this.profile.teams.find((function(e){return e.id==t}));r&&(g("team ".concat(r.id," from persistence ").concat(t)),this._setTeam(r))}var n=this.teamsForCurrentProgram();if(this.team){g("has team ".concat(this.team.id));var a=n.find((function(t){return t.id==e.team.id}));a?this.team_program.program_id!==this.program.id&&this._setTeam(this.team):(g("team is not in profile"),this._clearTeam())}this.team||(g("has no team"),n.length>0?(g("setting team ".concat(n[0].id)),this._setTeam(n[0]),n.length>1&&(g("team selection ".concat(n.length)),this._selectTeamFrom(n))):g("teams for current program is empty"))}}},{key:"selectTeam",value:function(){this._selectTeamFrom(this.teamsForCurrentProgram())}},{key:"_selectTeamFrom",value:function(e){var t=this;!function(e,t){e=e.sort((function(e,t){return e.name<t.name?-1:1})),approuter.show_modal(n.default.createElement(a.default,{id:"select-team-modal",width:400,show_x:!1,close_outside:!1,esc_close:!1,padding:0},n.default.createElement("h3",{style:{margin:20}},(0,s.t)("Select your class")),n.default.createElement("hr",{style:{marginBottom:0}}),e.map((function(e){return n.default.createElement("a",{className:"list-item-select",key:"team-selec-".concat(e.id),onClick:function(){g("selecting team ".concat(e.id)),t(e),approuter.hide_modal("select-team-modal")}},n.default.createElement("b",{style:{backgroundColor:(r=e.name,a=["#AD1457","#F4511E","#E4C441","#0B8043","#3F51B5","#8E24AA","#D81B60","#EF6C00","#C0CA33","#009688","#7986CB","#795548","#D50000","#F09300","#7CB342","#039BE5","#B39DDB","#616161","#E67C73","#F6BF26","#33B679","#4285F4","#9E69AF","#A79B8E","#1c3aa9"],a[r.split("").map((function(e){return e.charCodeAt()})).reduce((function(e,t){return e+t}),0)%a.length])}},e.name[0].toUpperCase()),e.name,n.default.createElement("br",null),n.default.createElement("small",null,e.instructors.join(", ")));var r,a}))))}(e,(function(e){_(e,"select_team: trying to set empty team");var r=!t.team||e.id!=t.team.id;t._setTeam(e),r&&t.refresh()}))}}])&&c(t.prototype,r),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(e)};t.default=b},90699:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(35666);var n=r(264),a=i(r(21294)),o=i(r(10358));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var v=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(v,e);var t,r,i,p,h,y=f(v);function v(){var e;u(this,v);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(d(e=y.call.apply(y,[this].concat(r))),"is_rigged",!1),e}return t=v,r=[{key:"receiveMessage",value:(p=regeneratorRuntime.mark((function e(t){var r,i,s,u,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data&&1==t.data.type){e.next=2;break}return e.abrupt("return",!1);case 2:if(this.resolveAppRoute){e.next=5;break}return setTimeout(this.receiveMessage,1e3,t),e.abrupt("return");case 5:if(r=t.data,i=r.env,s=r.profile,u=r.team,l=r.program,c=r.lesson,this.lesson=(0,n.wrap)(c,o.default.prototype),!s){e.next=11;break}return e.next=10,(0,n.wrap)(s,a.default.prototype);case 10:this.profile=e.sent;case 11:u&&(this.team=u),l&&(this.program=l),this.is_rigged=!0,this.apply_env(i,!1);case 15:case"end":return e.stop()}}),e,this)})),h=function(){var e=this,t=arguments;return new Promise((function(r,n){var a=p.apply(e,t);function o(e){s(a,r,n,o,i,"next",e)}function i(e){s(a,r,n,o,i,"throw",e)}o(void 0)}))},function(e){return h.apply(this,arguments)})},{key:"apply_env_message",value:function(e,t,r){e.postMessage({type:1,team:{settings:{}},profile:r.profile,program:r.program,env:t},"*")}},{key:"registerTryLesson",value:function(){window.addEventListener("message",this.receiveMessage)}}],r&&l(t.prototype,r),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),v}(e)};t.default=v},16436:(e,t,r)=>{r(66992),r(85827),r(36210),r(30489),r(41539),r(70189),r(78783),r(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.b64_to_utf8=s,t.bindAll=function(e){var t,r=new Set,n=a(function(e){var t=[];for(;e=Object.getPrototypeOf(e);)t.push(e);return t}(e));try{for(n.s();!(t=n.n()).done;){var o,i=t.value,s=a(Object.getOwnPropertyNames(i));try{for(s.s();!(o=s.n()).done;){var u=o.value;r.add(u)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){n.e(e)}finally{n.f()}var l,c=a(r);try{for(c.s();!(l=c.n()).done;){var f=l.value;"constructor"!==f&&(e[f]instanceof Function&&(e[f]=e[f].bind(e)))}}catch(e){c.e(e)}finally{c.f()}},t.compose=void 0,t.constructClass=function(e){for(var t=e,r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var o=0,i=n;o<i.length;o++){var s=i[o];t=s(t)}return t},t.deserializeJson=function(e){return JSON.parse(s(e))},t.serializeJson=function(e){return i((0,n.stable_stringify)(e))},t.utf8_to_b64=i;var n=r(4716);function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return window.btoa(unescape(encodeURIComponent(e)))}function s(e){return decodeURIComponent(escape(window.atob(e)))}t.compose=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}},4922:(e,t,r)=>{r(82526),r(41817),r(96649),r(96078),r(9653),r(19601),r(41539),r(88674),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(35666);var n,a=(n=r(61401))&&n.__esModule?n:{default:n};function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player={},this.prefer_hls=a.default.browser.IS_ANY_SAFARI}var t,r,n,i,l;return t=e,r=[{key:"load",value:(i=regeneratorRuntime.mark((function e(){var t,r,n,i,s,u,l,c,f,p,d,h,m,y,v,g,_,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.default.browser,r=t.IS_ANDROID,n=t.IS_ANY_SAFARI,i=t.IS_CHROME,s=t.IS_EDGE,u=t.IS_NATIVE_ANDROID,l=t.IS_IPAD,c=t.IS_IPHONE,f=t.IS_IPOD,p=t.IS_IOS,d=t.IS_SAFARI,h={android:r,any_safari:n,chrome:i,edge:s,native_android:u,ipad:l,iphone:c,ipod:f,ios:p,safari:d},e.next=4,fetch("https://videos.edclub.com/video_settings.json");case 4:if((m=e.sent).ok){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,m.json();case 9:if(y=e.sent,v=this.player,Object.assign(v,y.player),void 0!==y.prefer_hls&&(this.prefer_hls=y.prefer_hls),y.aux){g=o(y.aux);try{for(g.s();!(_=g.n()).done;)b=_.value,h[b.key]&&(void 0!==b.prefer_hls&&(this.prefer_hls=b.prefer_hls),void 0!==b.player&&Object.assign(v,b.player))}catch(e){g.e(e)}finally{g.f()}}case 14:case"end":return e.stop()}}),e,this)})),l=function(){var e=this,t=arguments;return new Promise((function(r,n){var a=i.apply(e,t);function o(e){s(a,r,n,o,u,"next",e)}function u(e){s(a,r,n,o,u,"throw",e)}o(void 0)}))},function(){return l.apply(this,arguments)})}],r&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=l},24040:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}r(82526),r(41817),r(96649),r(92222),r(26699),r(66992),r(96078),r(9653),r(41539),r(88674),r(74916),r(32023),r(15306),r(64765),r(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(35666);var s=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=window.AudioContext||window.webkitAudioContext;n&&(this.context=new n,this.keys={},t&&this.load(t).then((function(){return r.play(t)})))}var t,r,a,s,u;return t=e,r=[{key:"load",value:(s=regeneratorRuntime.mark((function e(t,r){var a,o,i,s,u,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.context){e.next=2;break}return e.abrupt("return");case 2:if(!this.keys[t]){e.next=4;break}return e.abrupt("return");case 4:if("object"!=typeof t){e.next=8;break}a=n(t);try{for(a.s();!(o=a.n()).done;)i=o.value,this.load(i)}catch(e){a.e(e)}finally{a.f()}return e.abrupt("return");case 8:return r||(s="mp3",~t.search(/.m4a$/)&&(t=t.replace(/.m4a$/,""),s="m4a"),r=t.includes("/")?t:"/m/audio/".concat(t,".").concat(s)),u=new AbortController,setTimeout((function(){return u.abort()}),1e4),e.abrupt("return",fetch(r,{signal:u.signal}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.arrayBuffer()})).then((function(e){return l.context.decodeAudioData(e)})).then((function(e){return l.keys[t]={buffer:e,is_playing:!1}})).catch((function(e){return console.warn("audio fail",r)})));case 12:case"end":return e.stop()}}),e,this)})),u=function(){var e=this,t=arguments;return new Promise((function(r,n){var a=s.apply(e,t);function i(e){o(a,r,n,i,u,"next",e)}function u(e){o(a,r,n,i,u,"throw",e)}i(void 0)}))},function(e,t){return u.apply(this,arguments)})},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.context){"suspended"===this.context.state&&this.context.resume();var r=this.keys[e];if(r&&(t||!r.is_playing)){var n=this.context.createBufferSource();r.source=n,n.buffer=r.buffer,n.connect(this.context.destination),n.start(0),t||(r.is_playing=!0,n.onended=function(){return r.is_playing=!1})}}}},{key:"stop",value:function(){if(this.context)for(var e in this.keys){var t=this.keys[e];t.source&&(t.source.stop(),t.source=null)}}}],r&&i(t.prototype,r),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=s},58200:(e,t,r)=>{r(92222),r(69826),r(69600),r(47042),r(41539),r(88674),r(74916),r(4723),r(15306),r(64765),r(23123),r(23157),Object.defineProperty(t,"__esModule",{value:!0}),t.getFreshSession=t.getDomain=t.events=t.constructPath=void 0,t.getSession=x,t.getSessionAsync=void 0,t.getSessionPref=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(JSON.parse(localStorage.getItem("session_prefs"))||{})[e]||t},t.getSessions=k,t.getSessionsAsync=void 0,t.getToken=function(){var e=x();return e?e.token:null},t.setDomain=t.registerStudentLoginHandler=t.registerSignOutHandler=t.registerOnLogin=t.redirectAfterLogout=t.isLoggedIn=void 0,t.setSessionPref=function(e,t){var r=JSON.parse(localStorage.getItem("session_prefs"))||{};r[e]=t,localStorage.setItem("session_prefs",JSON.stringify(r))},t.signOutEverywhere=void 0,t.signUserIn=function(e){return O.apply(this,arguments)},t.signUserOut=function(){return E.apply(this,arguments)},t.urls=t.takeMeToLogin=t.takeMeToAbsolutePath=t.takeMeTo=t.takeMeHomeOrNext=t.takeMeHome=void 0,r(35666);var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(57618)),o=(n=r(47642))&&n.__esModule?n:{default:n};function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,u,"next",e)}function u(e){s(o,n,a,i,u,"throw",e)}i(void 0)}))}}var l={student:"/sportal/",teacher:"/portal/",login:"/"};t.urls=l;var c=new o.default(["change"]);t.events=c;var f=function(e){return document.location=e};t.takeMeTo=f;t.takeMeToLogin=function(e){return f(l.login+(e?"?next=".concat(e):""))};t.takeMeToAbsolutePath=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_();return f(w(e,t))};var p,d,h,m=window.cordova?localStorage.getItem("domain-key"):"www",y=function(){var e=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){return f(l.student)},g=function(e){return m=e};t.setDomain=g;var _=function(){return m};t.getDomain=_;t.registerOnLogin=function(e){return y=e};t.registerSignOutHandler=function(e){return p=e};t.registerStudentLoginHandler=function(e){return v=e};t.isLoggedIn=function(){return!!x()};var b=function(){var e=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.flushSessions();case 2:h=null,c.fire_event("change",k());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.signOutEverywhere=b;var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_(),r=document.location.host.match(/(([a-z\-]+)([1-9]+)?(?:\.com))/),n=null===r?"edlocal.com":r[0],a="".concat(n,":").concat(document.location.port).replace(/:$/,"");return"".concat(document.location.protocol,"//").concat(t,".").concat(a).concat(e)};function k(){var e=a.getSessions();return window.DEFAULT_ACCOUNT_DOMAIN&&g(window.DEFAULT_ACCOUNT_DOMAIN),e.find((function(e){return"www"===e.domain}))||e.push({domain:"www",token:"default",is_student:!0,is_tp:!0}),e}function x(){return k().find((function(e){return e.domain===_()}))||null}t.constructPath=w;t.takeMeHomeOrNext=function(e){var t={};if(window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,r,n){return t[r]=n})),t.next){var r=document.location.host.split(".").slice(1,3).join(".");return f("".concat(document.location.protocol,"//").concat(e.domain,".").concat(r).concat(unescape(t.next)))}j(e)};var j=function(e){if(m===e.domain)e.is_student?v(e):f(l.teacher);else{var t=e.is_student?l.student:l.teacher;0;var r=document.location.host.split(".").slice(1,3).join(".");f("".concat(document.location.protocol,"//").concat(e.domain,".").concat(r).concat(t))}};function O(){return(O=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.registerLoginSession(t).then((function(e){return c.fire_event("change",k()),e})).then(y));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=u(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.getSessions(),r=t.find((function(e){return e.domain===_()})),!p){e.next=5;break}return e.next=5,p(r);case 5:return e.next=7,a.removeSession(_());case 7:return c.fire_event("change",k()),localStorage.removeItem("session_prefs"),window.cordova&&SafariViewController.show({url:"https://accounts.google.com/logout"},(function(e){"loaded"===e.event&&SafariViewController.hide()})),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.takeMeHome=j;t.redirectAfterLogout=function(e){f(e?"/post_logout_redirect/?domain=".concat(e.domain,"&login_method=").concat(e.login_method):"/")};var S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Date-d;return(!h||e&&t>1e3)&&(d=new Date,h=a.fetchSessions(_())),h};t.getSessionsAsync=S;var P=function(){var e=u(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],e.next=3,S(t);case 3:return e.abrupt("return",x());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.getSessionAsync=P;var C=function(){var e=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.getFreshSession=C},56392:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setBaseUrl=t.getBaseUrl=void 0;var r=null;t.setBaseUrl=function(e){return r=e};t.getBaseUrl=function(){return r||""}},86071:(e,t,r)=>{function n(){var e,t,r,n=navigator.appVersion,a=navigator.userAgent,o=navigator.appName,i=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);return-1!=(t=a.indexOf("Opera"))&&(o="Opera",i=a.substring(t+6),-1!=(t=a.indexOf("Version"))&&(i=a.substring(t+8))),-1!=(t=a.indexOf("OPR"))?(o="Opera",i=a.substring(t+4)):-1!=(t=a.indexOf("Edge"))?(o="Edge",i=a.substring(t+5)):-1!=(t=a.indexOf("MSIE"))?(o="IE",i=a.substring(t+5)):-1!=(t=a.indexOf("Chrome"))?(o="Chrome",i=a.substring(t+7)):-1!=(t=a.indexOf("Safari"))?(o="Safari",i=a.substring(t+7),-1!=(t=a.indexOf("Version"))&&(i=a.substring(t+8))):-1!=(t=a.indexOf("Firefox"))?(o="Firefox",i=a.substring(t+8)):-1!=a.indexOf("Trident/")?(o="IE",i=a.substring(a.indexOf("rv:")+3)):(e=a.lastIndexOf(" ")+1)<(t=a.lastIndexOf("/"))&&(o=a.substring(e,t),i=a.substring(t+1),o.toLowerCase()==o.toUpperCase()&&(o=navigator.appName)),-1!=(r=i.indexOf(";"))&&(i=i.substring(0,r)),-1!=(r=i.indexOf(" "))&&(i=i.substring(0,r)),-1!=(r=i.indexOf(")"))&&(i=i.substring(0,r)),s=parseInt(""+i,10),isNaN(s)&&(i=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),{browser:o,browserVersion:i,majorVersion:s,mobile:/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(n)}}r(82772),r(94986),r(54678),r(91058),Object.defineProperty(t,"__esModule",{value:!0}),t.FALLBACK_INFO=void 0,t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n();if(e.binfo=r,"IE"==r.browser||"Edge"==r.browser&&r.majorVersion<12||"Safari"==r.browser&&r.majorVersion<9||"Firefox"==r.browser&&r.majorVersion<38||"Opera"==r.browser&&r.majorVersion<58||"Chrome"==r.browser&&r.majorVersion<50)return t&&e.addEventListener("load",(function(e){o()})),!1;return!0},t.styleDocumentBody=void 0;var a=function(){document.body.style.height="100vh",document.body.style.display="grid",document.body.style.placeItems="center"};function o(){document.body.innerHTML="",a(),document.body.innerHTML=i}t.styleDocumentBody=a;var i="\n<div style='border:1px solid #bbb;width:70vw;padding:50px 60px;display:grid;' class='well'>\n  <h3>Please upgrade your browser</h3>\n  <p style='font-size:1.3em;text-align: justify;'>TypingClub no longer supports your browser.</p>\n  <p style='font-size:1.3em;text-align: justify;'>For the best experience we recommend\n    upgrading your browser to <a href='https://www.google.com/chrome/browser/desktop/' target='_blank'>Google Chrome</a>\n    or the latest version of the browser of your choice. Check our <a href=\"/help/user-guide/introduction/technical-requirements.html\">help page</a>\n  </p>\n  <span style=\"place-self: end;\">-- EdClub Team</span>\n</div>";t.FALLBACK_INFO=i},47642:(e,t,r)=>{r(82526),r(41817),r(96649),r(66992),r(96078),r(9653),r(69720),r(41539),r(88674),r(39714),r(70189),r(78783),r(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EVENT_MANAGER_CHANNEL_MESSAGE=void 0,r(35666);var n,a=(n=r(48583))&&n.__esModule?n:{default:n};function o(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}t.EVENT_MANAGER_CHANNEL_MESSAGE=2;var m=function(){function e(t){f(this,e),this.event_manager=t,this.events={}}return d(e,[{key:"on",value:function(e,t){try{return this.event_manager.on(e,t)}finally{this.events[e]||(this.events[e]=[]),this.events[e].push(t)}}},{key:"unbindAll",value:function(){for(var e in this.events){var t,r=u(this.events[e]);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.event_manager.unbind(e,n)}}catch(e){r.e(e)}finally{r.f()}}}}]),e}(),y=function(){function e(t){f(this,e),s(this,"events",{}),s(this,"fire_event_hook",null),s(this,"port",void 0),s(this,"pending_channel_results",void 0),s(this,"MESSAGE_TYPE",2);var r,n=u(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.events[a]=[]}}catch(e){n.e(e)}finally{n.f()}}return d(e,[{key:"on",value:function(e,t){(0,a.default)(this.events[e],"event does not exist: ".concat(e)),this.events[e].push(t)}},{key:"on1",value:function(e,t){var r=this;this.on(e,(function n(a){r.unbind(e,n),t(a)}))}},{key:"unbind",value:function(e,t){(0,a.default)(this.events[e],"event does not exist: ".concat(e));var r,n=[],o=u(this.events[e]);try{for(o.s();!(r=o.n()).done;){var i=r.value;i!==t&&n.push(i)}}catch(e){o.e(e)}finally{o.f()}this.events[e]=n}},{key:"flush",value:function(e){this.events[e]=[]}},{key:"fire_event",value:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{relayed:!1},o=this.events[e];(0,a.default)(o,"event does not exist: ".concat(e)),!o&&n.relayed&&(o=[]);var i,s=u(o);try{for(s.s();!(i=s.n()).done;){var l=i.value,c=void 0;void 0!==(c=l(t))&&void 0===r&&(r=c)}}catch(e){s.e(e)}finally{s.f()}return this.fire_event_hook&&!n.relayed?this.fire_event_hook(e,t,r):r}},{key:"group",value:function(){return new m(this)}},{key:"fire_event_with_handlers",value:function(e,t,r){for(var n=this.group(),a=function(){var e=i(s[o],2),t=e[0],r=e[1];n.on(t,(function(){return n.unbindAll(),r.apply(void 0,arguments)}))},o=0,s=Object.entries(r);o<s.length;o++)a();this.fire_event(e,t)}},{key:"attachPort",value:function(e){var t=this;(0,a.default)(!this.fire_event_hook,"existing fire_event_hook"),(0,a.default)(!this.port,"existing port");var r=JSON.stringify,n=JSON.parse;this.port=e,this.pending_channel_results=new Set,e.onmessage=function(){var e,a=(e=regeneratorRuntime.mark((function e(a){var o,s,u,l,c,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.ports[0],s=n(a.data),u=i(s,2),l=u[0],c=u[1],e.prev=2,e.next=5,t.fire_event(l,c,{relayed:!0});case 5:f=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),p=e.t0.toString();case 11:o.postMessage(r([f,p]));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,u,"next",e)}function u(e){o(i,n,a,s,u,"throw",e)}s(void 0)}))});return function(e){return a.apply(this,arguments)}}(),this.fire_event_hook=function(a,o,s){return new Promise((function(s,u){t.pending_channel_results.add(u);var l=new MessageChannel;l.port1.onmessage=function(e){t.pending_channel_results&&t.pending_channel_results.delete(u),l.port1.close();var r=i(n(e.data),2),a=r[0],o=r[1];o?u(o):s(a)},e.postMessage(r([a,o]),[l.port2])}))}}},{key:"establishChannel",value:function(){var e=new MessageChannel;this.attachPort(e.port1),window.parent.postMessage({type:2,msg:"HELO"},"*",[e.port2])}},{key:"handleChannelMessage",value:function(e){return!(!e.data||2!==e.data.type)&&(this.attachPort(e.ports[0]),!0)}},{key:"closeChannel",value:function(){if(this.port&&this.port.close(),this.pending_channel_results){var e,t=u(this.pending_channel_results);try{for(t.s();!(e=t.n()).done;){(0,e.value)("closed")}}catch(e){t.e(e)}finally{t.f()}}this.fire_event_hook=null,this.port=null,this.pending_channel_results=null}}]),e}();t.default=y},15239:(e,t,r)=>{r(92222),r(41539),r(88674),r(74916),r(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.captureMessage=t.captureException=t.addBreadcrumb=void 0,t.init=s,t.log_catch_promise=function(e){return function(t,r,n){var a=n.value;n.value=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=a.apply(this,r);return o instanceof Promise?o.catch((function(t){0!=t.status||t.statusText,console.error("failed ".concat(e," promise"),t,"args",r)})):o}}},t.profile_changed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.configureScope((function(t){t.setUser({id:e.id,account_id:e.account_id,is_basic:e.is_basic}),t.setTags({account:e.account_id,is_basic:e.is_basic})})),t?s(t):e.is_basic?n.close():s(o.sentryDSN_NOADS)},t.withScope=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(28787)),a=r(4147),o=r(84542);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e){n.init({dsn:e,debug:!1,environment:"production",release:a.version,whitelistUrls:[/typingclub\.com/,/tpclub\.com/],ignoreErrors:[/^event is not defined$/,/^Unexpected token <$/,/^Unexpected identifier$/,/\.data\.indexOf is not a function$/,/^Blocked a frame with origin/,/ResizeObserver loop limit exceeded/,/The play\(\) request was interrupted by a call to pause\(\)/,/^undefined$/,/player\.es/,/user agent or the platform in/,/embed code from Vimeo/,/because the user denied permission/,/Failed to fetch/,/<unknown>/,/InvalidAccessError: InvalidAccessError/,/from accessing another frame/],beforeBreadcrumb:function(e){return"xhr"===e.category&&/^(https?:)?\/\//.test(e.data.url)?null:e},normalizeDepth:5,attachStacktrace:!1});var t="www"==document.location.host.split(".")[0]?"tp":"tpc";n.configureScope((function(e){e.setTags({server_name:t})})),top&&self!=top&&n.addBreadcrumb({category:"log",level:"info",message:"in iframe: "+(document.referrer||"no referrer")})}var u=n.captureException;t.captureException=u;var l=n.captureMessage;t.captureMessage=l;var c=n.addBreadcrumb;t.addBreadcrumb=c;var f=n.withScope;t.withScope=f},50056:(e,t,r)=>{var n,a=(n=r(69606))&&n.__esModule?n:{default:n};a.default.easing.jswing=a.default.easing.swing,a.default.extend(a.default.easing,{def:"easeOutQuad",swing:function(e,t,r,n,o){return a.default.easing[a.default.easing.def](e,t,r,n,o)},easeInQuad:function(e,t,r,n,a){return n*(t/=a)*t+r},easeOutQuad:function(e,t,r,n,a){return-n*(t/=a)*(t-2)+r},easeInOutQuad:function(e,t,r,n,a){return(t/=a/2)<1?n/2*t*t+r:-n/2*(--t*(t-2)-1)+r},easeInCubic:function(e,t,r,n,a){return n*(t/=a)*t*t+r},easeOutCubic:function(e,t,r,n,a){return n*((t=t/a-1)*t*t+1)+r},easeInOutCubic:function(e,t,r,n,a){return(t/=a/2)<1?n/2*t*t*t+r:n/2*((t-=2)*t*t+2)+r},easeInQuart:function(e,t,r,n,a){return n*(t/=a)*t*t*t+r},easeOutQuart:function(e,t,r,n,a){return-n*((t=t/a-1)*t*t*t-1)+r},easeInOutQuart:function(e,t,r,n,a){return(t/=a/2)<1?n/2*t*t*t*t+r:-n/2*((t-=2)*t*t*t-2)+r},easeInQuint:function(e,t,r,n,a){return n*(t/=a)*t*t*t*t+r},easeOutQuint:function(e,t,r,n,a){return n*((t=t/a-1)*t*t*t*t+1)+r},easeInOutQuint:function(e,t,r,n,a){return(t/=a/2)<1?n/2*t*t*t*t*t+r:n/2*((t-=2)*t*t*t*t+2)+r},easeInSine:function(e,t,r,n,a){return-n*Math.cos(t/a*(Math.PI/2))+n+r},easeOutSine:function(e,t,r,n,a){return n*Math.sin(t/a*(Math.PI/2))+r},easeInOutSine:function(e,t,r,n,a){return-n/2*(Math.cos(Math.PI*t/a)-1)+r},easeInExpo:function(e,t,r,n,a){return 0==t?r:n*Math.pow(2,10*(t/a-1))+r},easeOutExpo:function(e,t,r,n,a){return t==a?r+n:n*(1-Math.pow(2,-10*t/a))+r},easeInOutExpo:function(e,t,r,n,a){return 0==t?r:t==a?r+n:(t/=a/2)<1?n/2*Math.pow(2,10*(t-1))+r:n/2*(2-Math.pow(2,-10*--t))+r},easeInCirc:function(e,t,r,n,a){return-n*(Math.sqrt(1-(t/=a)*t)-1)+r},easeOutCirc:function(e,t,r,n,a){return n*Math.sqrt(1-(t=t/a-1)*t)+r},easeInOutCirc:function(e,t,r,n,a){return(t/=a/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+r:n/2*(Math.sqrt(1-(t-=2)*t)+1)+r},easeInElastic:function(e,t,r,n,a){var o=1.70158,i=0,s=n;if(0==t)return r;if(1==(t/=a))return r+n;if(i||(i=.3*a),s<Math.abs(n)){s=n;o=i/4}else o=i/(2*Math.PI)*Math.asin(n/s);return-s*Math.pow(2,10*(t-=1))*Math.sin((t*a-o)*(2*Math.PI)/i)+r},easeOutElastic:function(e,t,r,n,a){var o=1.70158,i=0,s=n;if(0==t)return r;if(1==(t/=a))return r+n;if(i||(i=.3*a),s<Math.abs(n)){s=n;o=i/4}else o=i/(2*Math.PI)*Math.asin(n/s);return s*Math.pow(2,-10*t)*Math.sin((t*a-o)*(2*Math.PI)/i)+n+r},easeInOutElastic:function(e,t,r,n,a){var o=1.70158,i=0,s=n;if(0==t)return r;if(2==(t/=a/2))return r+n;if(i||(i=a*(.3*1.5)),s<Math.abs(n)){s=n;o=i/4}else o=i/(2*Math.PI)*Math.asin(n/s);return t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*a-o)*(2*Math.PI)/i)*-.5+r:s*Math.pow(2,-10*(t-=1))*Math.sin((t*a-o)*(2*Math.PI)/i)*.5+n+r},easeInBack:function(e,t,r,n,a,o){return null==o&&(o=1.70158),n*(t/=a)*t*((o+1)*t-o)+r},easeOutBack:function(e,t,r,n,a,o){return null==o&&(o=1.70158),n*((t=t/a-1)*t*((o+1)*t+o)+1)+r},easeInOutBack:function(e,t,r,n,a,o){return null==o&&(o=1.70158),(t/=a/2)<1?n/2*(t*t*((1+(o*=1.525))*t-o))+r:n/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+r},easeInBounce:function(e,t,r,n,o){return n-a.default.easing.easeOutBounce(e,o-t,0,n,o)+r},easeOutBounce:function(e,t,r,n,a){return(t/=a)<1/2.75?n*(7.5625*t*t)+r:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+r:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+r:n*(7.5625*(t-=2.625/2.75)*t+.984375)+r},easeInOutBounce:function(e,t,r,n,o){return t<o/2?.5*a.default.easing.easeInBounce(e,2*t,0,n,o)+r:.5*a.default.easing.easeOutBounce(e,2*t-o,0,n,o)+.5*n+r}}),a.default.extend(a.default.easing,{easeIn:function(e,t,r,n,o){return a.default.easing.easeInQuad(e,t,r,n,o)},easeOut:function(e,t,r,n,o){return a.default.easing.easeOutQuad(e,t,r,n,o)},easeInOut:function(e,t,r,n,o){return a.default.easing.easeInOutQuad(e,t,r,n,o)},expoin:function(e,t,r,n,o){return a.default.easing.easeInExpo(e,t,r,n,o)},expoout:function(e,t,r,n,o){return a.default.easing.easeOutExpo(e,t,r,n,o)},expoinout:function(e,t,r,n,o){return a.default.easing.easeInOutExpo(e,t,r,n,o)},bouncein:function(e,t,r,n,o){return a.default.easing.easeInBounce(e,t,r,n,o)},bounceout:function(e,t,r,n,o){return a.default.easing.easeOutBounce(e,t,r,n,o)},bounceinout:function(e,t,r,n,o){return a.default.easing.easeInOutBounce(e,t,r,n,o)},elasin:function(e,t,r,n,o){return a.default.easing.easeInElastic(e,t,r,n,o)},elasout:function(e,t,r,n,o){return a.default.easing.easeOutElastic(e,t,r,n,o)},elasinout:function(e,t,r,n,o){return a.default.easing.easeInOutElastic(e,t,r,n,o)},backin:function(e,t,r,n,o){return a.default.easing.easeInBack(e,t,r,n,o)},backout:function(e,t,r,n,o){return a.default.easing.easeOutBack(e,t,r,n,o)},backinout:function(e,t,r,n,o){return a.default.easing.easeInOutBack(e,t,r,n,o)}})},3317:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function i(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}r(82526),r(41817),r(96649),r(57327),r(2707),r(96078),r(9653),r(43371),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"listeners",[]),i(this,"countId",0),document.addEventListener("keydown",this.onKeyDown.bind(this)),this.Priority=Object.freeze(t),this.defaultPriority=r}var t,r,a;return t=e,r=[{key:"onKeyDown",value:function(e){var t,r=n(this.listeners);try{for(r.s();!(t=r.n()).done;)if(t.value.handler(e))return}catch(e){r.e(e)}finally{r.f()}}},{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultPriority,r=this.countId++;return this.listeners.push({handler:e,priority:t,id:r}),this.listeners.sort((function(e,t){return t.priority-e.priority})),r}},{key:"unregister",value:function(e){this.listeners=this.listeners.filter((function(t){return t.id!=e}))}},{key:"flush",value:function(){this.listeners=[],this.countId=0}}],r&&o(t.prototype,r),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=u},38452:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={escape:27,enter:13,space:32,backspace:8,tab:9,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,p:80,r:82,f5:116,slash:191};t.default=r},64489:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}r(82526),r(41817),r(96649),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"init",value:function(){approuter.lesson&&approuter.lesson.id==this.lesson_id&&(this.lesson=approuter.lesson),this.speed=2.2;var e=[];if(this.badges){var t,r=n(this.badges);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=approuter._badges[a];o?e.push(o):console.warn("missing mapping for badge id ".concat(a))}}catch(e){r.e(e)}finally{r.f()}}return this.badges=e,this}},{key:"has_performance_goals",get:function(){return!(this.score>0&&0==this.stars)}},{key:"next_lesson_url",get:function(){if(this.has_performance_goals){var e;if(!approuter.lesson.nextLessonId())return!1;if(0===this.score)return!1;try{e=approuter.team.settings.min_stars}catch(t){e=1}return!(this.stars<e)}return!0}}])&&o(t.prototype,r),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},264:(e,t,r)=>{function n(e,t){return Object.setPrototypeOf(e,t)}function a(e){return JSON.parse(JSON.stringify(e))}r(30489),Object.defineProperty(t,"__esModule",{value:!0}),t.copy=a,t.wrap=n,t.wrapCopy=function(e,t){return t=t||Object.getPrototypeOf(e),n(a(e),t)}},10358:(e,t,r)=>{r(82526),r(41817),r(96649),r(34553),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(71327));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"getText",value:function(){return this.activity.text2||this.activity.text3||this.activity.text4?n.choose_random_field(this.activity,["text1","text2","text3","text4"],!0):this.activity.text1}},{key:"nextLessonId",value:function(){var e=this,t=approuter.program.lessons,r=t.findIndex((function(t){return t.id==e.id}));if(r!=t.length-1)for(var n=r+1;n<t.length;n++){var a=t[n];if(!a.is_hidden&&"header"!=a.lesson_type)return a.id}}}])&&o(t.prototype,r),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},21294:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function i(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}r(82526),r(41817),r(96649),r(57327),r(69826),r(96078),r(9653),r(49337),r(30489),r(41539),r(74916),r(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(15461);var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"language","en"),i(this,"type","blank")}var t,r,a;return t=e,(r=[{key:"getSubjects",value:function(){var e,t={},r=n(this.programs);try{for(r.s();!(e=r.n()).done;){var a=e.value;t[a.subject.id]=a.subject.name}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"clone",value:function(){return Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this))}},{key:"getDerivedProfile",value:function(){var e,t=this.clone(),r=approuter.team;t.disable_backspace=r.disable_backspace;var n=r.settings;n.lock_keyboard_guide&&(t.show_keyboard=n.keyboard_guide),n.lock_hands_guide&&(t.show_hand=n.hands_guide),n.lock_keyboard&&(t.keyboard=n.keyboard),n.lock_use_hand&&(t.use_hand=n.use_hand),t.is_right_hand_only&&(t.use_hand="right"),t.is_left_hand_only&&(t.use_hand="left"),n.lock_keyboard_sfx&&(t.keyboard_sfx=n.keyboard_sfx),n.lock_voicefx&&(t.voicefx=n.voicefx),n.lock_block_on_errors&&(t.block_on_errors=n.block_on_errors),n.keyboard_lowercase&&(t.keyboard_lowercase=n.keyboard_lowercase);var a="es"===(null===(e=approuter.program.locale)||void 0===e?void 0:e.split("_")[0]),o={font_face:"Primary Penmanship",font_size:"med",keyboard:a?"es,spanish":"en,us",keyboard_layout:(t.keyboard_lowercase?12:11)+(a?2:0),typing_theme:"bees",show_hand:!0,show_keyboard:!0,use_hand:null};if(approuter.program&&approuter.program.is_junior)for(var i in o)t[i]=o[i];return t}},{key:"lessonplans",value:function(){return this.programs.filter(function(e){if("test"==e.program_type)return!1;var t=this.teamprograms.find((function(t){return t.program_id==e.id}));if(!t.requires_id)return!0;var r=this.teamprograms.find((function(e){return e.id==t.requires_id}));return this.programs.find((function(e){return e.id==r.program_id})).is_complete}.bind(this))}}])&&o(t.prototype,r),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=u},7454:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}r(82526),r(41817),r(96649),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.merge_lessons_and_progress=s;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"merge_progress",value:function(e,t,r){s(e.lesson_games,this,t,r)}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t,r,a){var o,i,s=t.lessons,u={},l=n(e);try{for(l.s();!(i=l.n()).done;){var c=i.value;u[c.lesson_id]=c}}catch(e){l.e(e)}finally{l.f()}o=1;var f,p=0,d=0,h=-1,m=a.settings.min_stars||1,y=n(s);try{for(y.s();!(f=y.n()).done;){var v=f.value,g=u[v.id];g?v.progress=g:delete v.progress,v.is_locked=!1,v.is_blocked=!1,v.is_unassigned=!1,v.has_range=!1,delete v.is_tutorial,"header"!=v.lesson_type?(v.is_hidden&&o--,v.index=o,v.lesson_index=v.index,v.progress&&v.progress.score>0&&(v.objective_completion||v.progress.stars>=m)&&(p=v.index,d++),v.is_test&&(h=v.index),o++):(v.index=null,v.lesson_index=null)}}catch(e){y.e(e)}finally{y.f()}if(0==p){var _,b=n(s);try{for(b.s();!(_=b.n()).done;){var w=_.value;if("header"!=w.lesson_type){w.is_tutorial=!0;break}}}catch(e){b.e(e)}finally{b.f()}}var k,x=r.start_lock_index,j=r.lock_index||0,O=a.can_jump,E=n(s);try{for(E.s();!(k=E.n()).done;){var S=k.value;if("header"!=S.lesson_type){S.has_range=!(null==x||-1==j||0==j);var P=!1;S.has_range?(S.index<x||S.index>j||p>=x&&p<=j&&S.index>p+1||p<x&&S.index!=x)&&(P=!0):S.index>p+1&&(P=!0),!O&&P&&(S.is_locked=!0,S.is_blocked=!0),S.has_range&&(S.index<x||S.index>j)&&(S.is_unassigned=!0),P&&(S.is_locked=!0)}}}catch(e){E.e(e)}finally{E.f()}t.last_with_progress=p,t.lessons_with_progress=d,t.last_finished=p,t.lesson_count=o-1,t.has_placement_test=r.has_placement_test&&h>p}t.default=i},38400:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}r(82526),r(41817),r(96649),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"init",value:function(){return this.settings||(this.settings={}),this}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a},99332:(e,t,r)=>{r(82772),r(69600),r(21249),r(19601),r(47941),r(41539),r(88674),r(74916),r(15306),r(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.oauthWithPopup=function(e,t,r,n,o){var i=r[e];return localStorage.setItem("login_method",e),n&&n(!0),new Promise((function(s,u){var l=Object.assign({response_type:"code",redirect_uri:r.BASE_DOMAIN+r.OAUTH_CALLBACK},i.PARAMS),f=window.cordova?localStorage.getItem("domain-key"):window.location.host.split(".")[0];f="www";var p=i.AUTHORIZE_URL+"?"+function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}(l),d=!1;function h(r){function i(){n&&n(!1),u.apply(void 0,arguments)}if(-1!==(r=decodeURIComponent(r)).indexOf("error")){var l=r.split("error=")[1].split("&")[0],p=decodeURIComponent(r.split("error_description=")[1].split("&")[0].replace(/\+/g,"%20"));return console.warn("got oauth error",r),void i({responseJSON:"OAuth callback error: "+l+" ("+p+")"})}if(-1===r.indexOf("code="))return console.warn("no code found in oauth callback url",r),void i({responseJSON:"no code found in url: "+r});var d=r.split("code=")[1].split("&")[0];o?s(d):a.default.resolveOAauthToken(e,f,d,(function(e){return function(e,t,r,n){return c.apply(this,arguments)}(e,t,s,i)}),i)}if(window.cordova)window.handleOpenURL=function(e){window.handleOpenURL=null,SafariViewController.hide(),h(e)},SafariViewController.show({url:p});else{window.addEventListener("message",(function e(t){"string"==typeof t.data&&(d=!0,~t.origin.split("?")[0].indexOf(r.BASE_DOMAIN)&&(window.removeEventListener("message",e),h(t.data)))}));var m=window.open(p,"_blank","location=no,toolbar=yes");if(!m)return console.warn("Could not open window for oauth");var y=setInterval((function(){m.closed&&!d&&(clearInterval(y),n&&n(!1))}),1e3)}}))},r(35666);var n,a=(n=r(75564))&&n.__esModule?n:{default:n},o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(58200));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,u,"next",e)}function u(e){s(o,n,a,i,u,"throw",e)}i(void 0)}))}}function l(){window.cordova?approuter.dashboard():o.takeMeHomeOrNext()}function c(){return(c=u(regeneratorRuntime.mark((function e(t,r,n,a){var i,s,u,c,f,p,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.user,s=t.tpc_users,e.next=4;break;case 4:if(i||1!==s.length){e.next=8;break}return e.next=7,o.signUserIn(s[0].login_token).then(l);case 7:return e.abrupt("return");case 8:if(!s.length){e.next=12;break}n(t),e.next=39;break;case 12:if(!i){e.next=16;break}o.signUserIn(i.login_token).then(l),e.next=39;break;case 16:if(!r){e.next=38;break}return e.next=19,approuter.materialize_profile();case 19:if(!(u=e.sent)||u.is_anonymous){e.next=23;break}return n(),e.abrupt("return");case 23:for(c=t.auth_user,f={},p=0,d=["email","fname","lname","sis_id"];p<d.length;p++)c[h=d[p]]&&(f[h]=c[h]);return e.prev=26,e.next=29,approuter.update_profile(f);case 29:e.next=35;break;case 31:return e.prev=31,e.t0=e.catch(26),a(e.t0),e.abrupt("return");case 35:n(),e.next=39;break;case 38:a();case 39:case"end":return e.stop()}}),e,null,[[26,31]])})))).apply(this,arguments)}},24508:(e,t,r)=>{r(82526),r(41817),r(96649),r(21249),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(67294)),o=(n=r(16232))&&n.__esModule?n:{default:n},i=r(52224);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var a=g(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var w=function(e){d(r,e);var t=m(r);function r(e){var n;return c(this,r),_(v(n=t.call(this,e)),"_events",null),_(v(n),"updateModals",(function(){n.setState({modals:approuter.modals})})),n.state={modals:[]},approuter.modals&&(n.state.modals=approuter.modals),n}return p(r,[{key:"componentDidMount",value:function(){var e=approuter.events.group();this._events=e,e.on("show_modal",this.updateModals),e.on("hide_modal",this.updateModals)}},{key:"componentWillUnmount",value:function(){this._events.unbindAll()}},{key:"render",value:function(){var e=this.state.modals;return a.default.createElement("div",{style:{position:"fixed",zIndex:1100}},a.default.createElement(i.TransitionGroup,null,e.map((function(e,t){return a.default.createElement(i.CSSTransition,{key:t,classNames:"edmodal",timeout:{enter:600,exit:0}},a.default.createElement("div",{key:e.props.id},e))}))))}}]),r}(a.Component),k=function(e){d(r,e);var t=m(r);function r(e){var n,a,o,i;return c(this,r),_(v(n=t.call(this,e)),"onResize",(function(){n.props.hasSize&&n.setState({size:{width:window.innerWidth,height:window.innerHeight}})})),_(v(n),"onTouchMove",(function(e){n.props.noTouch&&e.preventDefault()})),n.onResize=(a=n.onResize.bind(v(n)),o=500,i=0,function(){var e=(new Date).getTime();if(!(e-i<o))return i=e,a.apply(void 0,arguments)}),n.root=approuter.root,n.root.jquery&&(n.root=n.root.get(0)),n.state={size:null},n.props.hasSize&&(n.state.size={width:window.innerWidth,height:window.innerHeight}),n}return p(r,[{key:"render",value:function(){var e=this;return a.default.createElement(a.Suspense,{fallback:a.default.createElement("div",null,"Loading...")},a.default.createElement("div",{id:"root"},a.default.createElement(w,null),this.props.header?a.default.createElement(o.default,null):null,this.props.hasSize?a.default.Children.map(this.props.children,(function(t){return a.default.cloneElement(t,{window_width:e.state.size.width,window_height:e.state.size.height})})):this.props.children))}},{key:"updateEnvironment",value:function(e,t){if(t){if(t.styles){var r,n=u(t.styles);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.root.classList.contains(a)&&this.root.classList.remove(a)}}catch(e){n.e(e)}finally{n.f()}}else t.style&&this.root.classList.remove(t.style);t.rootId&&this.root.classList.remove("id"),0==t.scroll&&document.body.classList.remove("noscroll-body"),t.darkBody&&document.body.classList.remove("dark-body"),t.darkerBody&&document.body.classList.remove("darker-body"),t.cloudBody&&document.body.classList.remove("tpc-cloud-body"),t.skyBody&&document.body.classList.remove("sky-body"),t.title&&(document.title="EdClub")}if(e){if(e.styles){var o,i=u(e.styles);try{for(i.s();!(o=i.n()).done;){var s=o.value;s&&this.root.classList.add(s)}}catch(e){i.e(e)}finally{i.f()}}else e.style&&this.root.classList.add(e.style);e.rootId?this.root.id=e.rootId:this.root.id="",0==e.scroll&&document.body.classList.add("noscroll-body"),e.darkBody&&document.body.classList.add("dark-body"),e.darkerBody&&document.body.classList.add("darker-body"),e.cloudBody&&document.body.classList.add("tpc-cloud-body"),e.skyBody&&document.body.classList.add("sky-body"),e.title?document.title=e.title+" - EdClub":approuter.current_app&&approuter.current_app.name&&(document.title=approuter.current_app.name+" - EdClub")}}},{key:"componentWillMount",value:function(){this.updateEnvironment(this.props)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),window.addEventListener("touchmove",this.onTouchMove),this.props.onMount&&this.props.onMount()}},{key:"componentWillUpdate",value:function(e,t){this.updateEnvironment(e,this.props)}},{key:"componentWillUnmount",value:function(){this.updateEnvironment(null,this.props),window.removeEventListener("resize",this.onResize),window.removeEventListener("touchmove",this.onTouchMove)}}]),r}(a.default.Component);t.default=k,k.defaultProps={header:!0,scroll:!0,darkBody:!1,darkerBody:!1,onMount:null,hasSize:!1,noTouch:!1,style:null,title:null}},17858:(e,t,r)=>{function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}r(82526),r(41817),r(96649),r(66992),r(21249),r(96078),r(9653),r(41539),r(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.Persistence=void 0,t.delete_from_permanent_storage=l,t.get_from_permanent_storage=u,t.registerApprouterEventBus=function(e){e.on("logout",f)},t.set_in_permanent_storage=s;var o=(0,r(43393).List)(),i="storage_";function s(e,t){if(!r.g.localStorage)return!1;e=i+e;var n=JSON.stringify(t);return r.g.localStorage.setItem(e,n),!0}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!r.g.localStorage)return t;e=i+e;var n,a=r.g.localStorage.getItem(e);if(!a)return t;try{n=JSON.parse(a)}catch(e){return t}return n}function l(e){r.g.localStorage&&(e=i+e,r.g.localStorage.removeItem(e))}var c=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n(this,e),this.values={},this.storageKey=t,r&&(o=o.push(this))}var t,r,i;return t=e,(r=[{key:"get",value:function(e){return u(this.storageKey,this.values)[e]}},{key:"set",value:function(e,t){var r=u(this.storageKey,this.values);r[e]=t,s(this.storageKey,r)}},{key:"invalidate",value:function(){l(this.storageKey)}}])&&a(t.prototype,r),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(){o.map((function(e){e.invalidate()}))}t.Persistence=c},56657:(e,t,r)=>{r(92222),r(41539),r(88674),Object.defineProperty(t,"__esModule",{value:!0}),t.resolveAppRoute=function(e){return G.apply(this,arguments)},t.url_routes=void 0,r(35666);var n=u(r(25018)),a=r(52058),o=u(r(65489)),i=u(r(62342)),s=u(r(25318));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}var f,p,d,h,m,y,v,g,_,b,w,k,x,j,O,E,S,P,C,N,T,R,M,A,D,I,L,B,U,z,q,W,F=function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(736),r.e(513),r.e(486)]).then(r.bind(r,42668));case 2:return n=e.sent,e.abrupt("return",n.default[t]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(736),r.e(513),r.e(742)]).then(r.bind(r,62750));case 2:return n=e.sent,e.abrupt("return",n.default[t]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(736),r.e(930),r.e(900)]).then(r.bind(r,53705));case 2:return n=e.sent,e.abrupt("return",n.default[t]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(736),r.e(930),r.e(602)]).then(r.bind(r,97739));case 2:return n=e.sent,e.abrupt("return",n.default[t]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K={"typing.classic_typing_app":(W=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("classic_typing_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return W.apply(this,arguments)}),"typing.videotyping_app":(q=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("videotyping_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return q.apply(this,arguments)}),"typing.boxed_typing":(z=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("boxed_typing");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return z.apply(this,arguments)}),"spelling.cards":(U=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("spelling_cards_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return U.apply(this,arguments)}),"spelling.dictation":(B=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("spelling_dictation_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return B.apply(this,arguments)}),"spelling.story":(L=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("spelling_story_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return L.apply(this,arguments)}),"spelling.dropquiz":(I=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("spelling_dropquiz_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return I.apply(this,arguments)}),"spelling.shuffle":(D=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("spelling_shuffle_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return D.apply(this,arguments)}),"spelling.crossword":(A=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("spelling_crossword_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return A.apply(this,arguments)}),"spelling.fillblank":(M=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("spelling_fillblank_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return M.apply(this,arguments)}),"spelling.spellit":(R=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("spelling_spellit_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return R.apply(this,arguments)}),reading:(T=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("reading_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return T.apply(this,arguments)}),"spelling.quiz":(N=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("quiz_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return N.apply(this,arguments)}),"spelling.proofreading":(C=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("proofreading_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return C.apply(this,arguments)}),"junior.result_page":(P=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("junior_result_page");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return P.apply(this,arguments)}),"shared.login_app":{app:a.login_app},"shared.signup_app":{app:a.signup_app},"shared.school_login_app":{app:a.school_login_app},"shared.school_signup_app":{app:a.school_signup_app},"shared.not_found_app":{app:o.default},"shared.frame_app":{app:i.default},"shared.temp_games_loader":{app:s.default},"typing.games.BalloonValley":{app:s.default},"typing.games.MonsterAttack":{app:s.default},"typing.games.TempleBash":{app:s.default},"typing.games.FloatingBubbles":{app:s.default},"typing.games.AppleThieves":{app:s.default},"student.dashboard_app":(S=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("dashboard_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return S.apply(this,arguments)}),"student.more_tests":(E=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("more_tests");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return E.apply(this,arguments)}),"student.lessonplan":(O=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("lessonplan_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return O.apply(this,arguments)}),"student.testplan":(j=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("testplan_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return j.apply(this,arguments)}),"student.videoplayer":(x=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("video_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return x.apply(this,arguments)}),decisionmaking:(k=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("decisionmaking_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return k.apply(this,arguments)}),"student.profile.changepassword_app":(w=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("changepassword_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return w.apply(this,arguments)}),"student.profile.profiledetails_app":(b=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("profiledetails_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return b.apply(this,arguments)}),"student.profile.billing_app":(_=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("billing_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return _.apply(this,arguments)}),"student.profile.license_app":(g=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("license_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return g.apply(this,arguments)}),"student.profile.plans_app":(v=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("plans_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)}),"student.profile.deleteaccount_app":(y=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("deleteaccount_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return y.apply(this,arguments)}),"student.scoreboard":(m=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("scoreboard_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)}),"student.stats_app":(h=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("stats_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)}),"student.badge_app":(d=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("badge_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)}),"student.catalog_app":(p=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("catalog_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)}),"student.placementtest_app":(f=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("placementtest_app");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)}),"student.lesson_locked":{app:function(e){var t=e.is_test?"This test is no longer available to you.":"Your teacher has not assigned this lesson to you yet. Consider practicing your previous lessons a bit more.";return(0,n.default)(e.name,"Lesson Locked",t,"Go Back",approuter.exit_lesson)}}};function G(){return(G=c(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=K[t]){e.next=3;break}return e.abrupt("return");case 3:if("function"!=typeof r){e.next=9;break}return e.next=6,r();case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=r.app;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=[{name:"dashboard",path:"/sportal/",app:"student.dashboard_app"},{name:"edit_password",path:"/sportal/change_password.html",app:"student.profile.changepassword_app"},{name:"profile",path:"/sportal/profile.html",app:"student.profile.profiledetails_app"},{name:"delete_account",path:"/sportal/delete_account.html",app:"student.profile.deleteaccount_app"},{name:"license",path:"/sportal/license/",app:"student.profile.license_app"},{name:"badges_page",path:"/sportal/badges.html",app:"student.badge_app"},{name:"stats_page",path:"/sportal/stats.html",app:"student.stats_app"},{name:"catalog_page",path:"/sportal/catalog.html",app:"student.catalog_app"},{name:"more_tests",path:"/sportal/more_tests.html",app:"student.more_tests"},{name:"test",path:"/sportal/test-:id(-?\\d+).play",app:"student.testplan"},{name:"lesson",path:"/sportal/program-:program_id(\\d+)/:id(\\d+).play",app:"lesson"},{name:"lessonplan",path:"/sportal/program-:id(-?\\d+).game",app:"student.lessonplan"},{name:"placement",path:"/sportal/program-:id.placement",app:"student.placementtest_app"},{name:"scoreboard",path:"/sportal/teamprogram-:id.scoreboard",app:"student.scoreboard"}];t.url_routes=J,t.url_routes=J=J.concat([{name:"student_plans",path:"/sportal/plans.html",app:"student.profile.plans_app"},{name:"student_billing",path:"/sportal/billing.html",app:"student.profile.billing_app"},{name:"login_page",path:"/login.html",app:"shared.login_app"},{name:"signup_page",path:"/signup.html",app:"shared.signup_app"}])},57618:(e,t,r)=>{r(41539),r(88674),Object.defineProperty(t,"__esModule",{value:!0}),t.getSessions=t.flushSessions=t.fetchSessions=void 0,t.registerLoginSession=function(e){return m.apply(this,arguments)},t.setIsHeaderToken=t.removeSession=void 0,r(35666);var n,a=r(56392);function o(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,u,"next",e)}function u(e){o(i,n,a,s,u,"throw",e)}s(void 0)}))}}var s=function(e){return JSON.parse(JSON.stringify(e))},u=function(){return localStorage.getItem("rt")||""},l=function(e){return localStorage.setItem("rt",e)},c=!1;function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,r){var o="".concat((0,a.getBaseUrl)(),"/auth/refresh_tokens/");var i=new XMLHttpRequest;i.open("POST",o,!0),i.setRequestHeader("Content-Type","application/json"),c&&i.setRequestHeader("Authorization",u()),i.addEventListener("load",(function(){200===this.status?(n=JSON.parse(this.responseText),c&&l(this.getResponseHeader("pragma")),window.DEFAULT_ACCOUNT_DOMAIN=this.getResponseHeader("DEFAULT_ACCOUNT_DOMAIN"),t(n)):400===this.status&&r("RefreshToken Payload Failed: ".concat(JSON.stringify(e)))})),i.send(JSON.stringify(e))}))}t.setIsHeaderToken=function(e){return c=e};var p=function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({domain:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.fetchSessions=p;var d=function(){var e=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({flush:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.flushSessions=d;var h=function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({remove_domain:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.removeSession=h;function m(){return(m=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){f({login_token:t}).then((function(){e(s(n[n.length-1]))})).catch(r)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.getSessions=function(){return s(n)}},71327:(e,t,r)=>{r(57327),r(82772),r(66992),r(69600),r(19601),r(41539),r(54678),r(91058),r(88674),r(74916),r(70189),r(78783),r(4723),r(15306),r(64765),r(23123),r(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.add_get_param=function(e,t,r){if(e.indexOf(t+"=")>=0){var n=e.substring(0,e.indexOf(t)),a=e.substring(e.indexOf(t));a=(a=a.substring(a.indexOf("=")+1)).indexOf("&")>=0?a.substring(a.indexOf("&")):"",e=n+t+"="+r+a}else e.indexOf("?")<0?e+="?"+t+"="+r:e+="&"+t+"="+r;return e},t.calc_accuracy=function(e,t){return 0==t?100:Math.round(100*e/t)},t.calc_wpm=function(e,t){return parseInt(e/5/(t/6e4)+.5)},t.choose_random_field=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r){var n,a=[],o=i(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;e[s]&&a.push(s)}}catch(e){o.e(e)}finally{o.f()}t=a}var u=t[Math.floor(Math.random()*t.length)];return e[u]},t.cn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join(" ")},t.cx=function(e){var t=[];for(var r in e)e[r]&&t.push(r);return t.join(" ")},t.dangerous_thread_blocking_sleep=function(e){for(var t=(new Date).getTime(),r=0;r<1e7&&!((new Date).getTime()-t>e);r++);},t.detect_os=f,t.filterString=function(e,t,r){var n=e.split(t),a=new Set(n.filter(r));return n.filter((function(e){return!a.has(e)})).join(t)},t.flush_timeouts=function(){var e,t=i(d);try{for(t.s();!(e=t.n()).done;){var r=e.value;clearInterval(r)}}catch(e){t.e(e)}finally{t.f()}var n,a=i(p);try{for(a.s();!(n=a.n()).done;){var o=n.value;clearTimeout(o)}}catch(e){a.e(e)}finally{a.f()}d=[],p=[]},t.get2dict=function(){var e,t={},r=/\+/g,n=/([^&=]+)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(r," "))},o=window.location.search.substring(1);for(;e=n.exec(o);)t[a(e[1])]=a(e[2]);return t},t.get_practice_time_goals=function(e){var t;t=e;return t?{typing_goal_daily:t.typing_goal_daily||15,typing_goal_weekly:t.typing_goal_weekly||60,weekday_start:t.weekday_start||0}:{typing_goal_daily:15,typing_goal_weekly:60,weekday_start:0}},t.get_voice=function(e){var t=speechSynthesis.getVoices();if(!t||!t.length)return;var r,n=i(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.voiceURI==e)return a}}catch(e){n.e(e)}finally{n.f()}var o,s=i(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(u.lang==navigator.language)return u}}catch(e){s.e(e)}finally{s.f()}var l,c=i(t);try{for(c.s();!(l=c.n()).done;){var f=l.value;if("en-US"==f.lang)return f}}catch(e){c.e(e)}finally{c.f()}return t[0]},t.intcomma=function e(t){var r=String(t),n=r.replace(/^(-?\d+)(\d{3})/,"$1,$2");return r==n?n:e(n)},t.isIOS=t.isFirefox=void 0,t.isPinyin=function(e){var t;return"zh"===(null===(t=a.default.getLocale(e))||void 0===t?void 0:t.langCode)},t.isSafari=void 0,t.isUpperCase=function(e){return!!e&&e!=e.toLocaleLowerCase()},t.jp_input_punctuation_map=function(){return{"＝":"=","・":"."}},t.pinyin_input_punctuation_map=function(){return{"、":"\\","｜":"|","·":"`","～":"~","！":"!","¥":"$","（":"(","）":")","；":";","：":":","“":'"',"‘":"'","，":",","。":".","《":"<","》":">","？":"?","【":"[","】":"]","「":"{","」":"}"}},t.preload=function(e){if(e){var t=(0,n.default)("<div>").hide();(0,n.default)(e).each((function(e,r){t.append((0,n.default)("<img>").attr("src","https://static.typingclub.com/m/"+r))})),(0,n.default)("body").append(t)}},t.px2int=function(e){return parseFloat(e.replace(/\D\./g,""))},t.setInterval=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=setInterval(e,t);return d.push(r),r},t.setTimeout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=setTimeout(e,t);return p.push(r),r},t.show_ios_focus_popup=function(e,t){var r=(0,n.default)("<div />").html(e);function a(){t&&t[0].focus(),setTimeout((function(){return r.remove()}),100)}if(r.append((0,n.default)("<img />").attr("src","https://static.typingclub.com/m/engine/img/touch-here.png").css({paddingLeft:40,height:140,width:137})),r.css({position:"absolute",left:0,right:0,top:"30%",background:"rgba(0, 0, 0, .9)",fontSize:"50px",boxShadow:"0 0 200px #444",color:"white",textAlign:"center",padding:50,zIndex:7}),t)r.click(a);else{var o=(0,n.default)("<input/>").css({position:"absolute",top:0,bottom:0,left:0,width:"100%",opacity:0});r.append(o),o.focus(a)}return(0,n.default)("body").prepend(r),r},t.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t.speech_support=void 0,t.sticky_key_instruction_link=function(){return{Windows:"http://disability.illinois.edu/academic-support/assistive-technology/windows-7-sticky-keys",iOS:"http://www.apple.com/accessibility/ios/#motor-skills",Mac:"https://support.apple.com/kb/PH18386?locale=en_US",Chromebook:"https://support.google.com/chromebook/answer/177893"}[f()]||"https://en.wikipedia.org/wiki/Sticky_keys"},t.tracing_proxy=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Proxy(t,Object.assign({},r,{get:function(t,r){if(console.log(e,r),r in t)return t[r]},set:function(t,r,n){console.log("".concat(e,"<---"),r,n),t[r]=n}}))},t.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)};var n=o(r(69606)),a=o(r(95343));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}window.wait_preload=function(e){var t,r,a,o,i=0;t=(0,n.default)("<div />").css({position:"absolute",top:-500,"font-family":"'Droid Sans Mono', 'Lucida Console', Monaco, monospace","font-size":"100px"}),a=(0,n.default)("<span>i</span>"),o=(0,n.default)("<span>W</span>"),r=(0,n.default)("<span>W</span>").css({"font-family":"Arial"}),t.append(a).append(o).append(r),(0,n.default)("body").prepend(t),function s(){var u=a.width(),l=o.width(),c=o.height(),f=r.height();u!=l||c==f?++i>5?(console.warn('Font defaulted back to "courier"'),t.remove(),(0,n.default)("#arena-text").css("font-family","courier"),e()):setTimeout(s,500):(t.remove(),e())}()},n.default.fn.extend({animateCss:function(e,t){setTimeout(function(){(0,n.default)(this).show().addClass("animated "+e).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){(0,n.default)(this).removeClass("animated "+e),t&&t()}.bind(this))}.bind(this),3)}});var u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);t.isSafari=u;var l=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)||navigator.platform.match(/(iPad|iPhone|iPod)/g)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;t.isIOS=l;var c=navigator.userAgent.match(/firefox/gi);function f(){for(var e=navigator.userAgent,t=0,r=[{s:"Windows",r:/Windows/},{s:"Android",r:/Android/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac",r:/Mac OS X/},{s:"Chromebook",r:/\bCrOS\b/}];t<r.length;t++){var n=r[t];if(n.r.test(e))return n.s}return"unknown"}t.isFirefox=c;var p=[],d=[];var h=!!window.speechSynthesis;t.speech_support=h},47414:(e,t,r)=>{r(82526),r(41817),r(96649),r(57327),r(96078),r(9653),r(41539),r(92087),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(71327)),a=r(95343);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}var s={" ":"space","\t":"tab key","\n":"enter key","~":"tilde","`":"backtick","!":"exclamation mark","@":"at sign","#":"number sign","£":"pound symbol","€":"euro sign",$:"dollar sign","¢":"cent sign","¥":"yuan sign","§":"paragraph sign","%":"percent","°":"degree","^":"caret","&":"ampersand","*":"star","(":"open parenthesis",")":"close parenthesis","-":"dash",_:"underscore","+":"plus","=":"equal sign","{":"open curly bracket","}":"close curly bracket","[":"open bracket","]":"closed bracket","|":"pipe","\\":"backslash","/":"forward slash",":":"colon",";":"semicolon",'"':"quotation mark","'":"apostrophe","<":"less than sign",">":"greater than sign",",":"comma",".":"period","?":"question mark",opt:"option key"},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.protect_speech=!1,this.queue=[],this.next_utter_timeout_id,this.flags={said_number_count:0},window.TTS&&(window.TTS.stop=function(){window.TTS.speak({text:"",locale:"en-US",rate:1},(function(){}),(function(){}))})}var t,r,o;return t=e,r=[{key:"get_voice",value:function(e){return this.selected_voice&&this.selected_voice.voiceURI==e||(this.selected_voice=n.get_voice(e)),this.selected_voice}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.queue=[],clearTimeout(this.next_utter_timeout_id),!window.TTS||this.protect_speech&&!e?!window.speechSynthesis||this.protect_speech&&!e||(this.cancelling=!0,speechSynthesis.cancel()):window.TTS.stop(),this}},{key:"done_wait",value:function(){this.queue.shift(),this.next()}},{key:"next",value:function(){var e=this;if(0!=this.queue.length){var t=this.queue[0];if(t.duration)this.next_utter_timeout_id=setTimeout(this.done_wait.bind(this),t.duration);else{this.queue.shift(),t.protect&&(this.protect_speech=!0);var r=function(r){e._utter(t.text,r,t.onFinish,t.onBoundary),e.queue.length&&e.next()};t.custom_profile?r(t.custom_profile):r(approuter.profile)}}}},{key:"wait",value:function(e){return this.queue.push({duration:e}),1==this.queue.length&&this.next(),this}},{key:"utter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return e?(this.queue.filter((function(e){return e.text})).length>2&&this.clear(!0),this.queue.push({text:e,protect:t,custom_profile:r,onFinish:n,onBoundary:a}),1==this.queue.length&&this.next(),this):this}},{key:"_utter",value:function(e,t,r,n){var o=this;if(!window.SpeechSynthesisUtterance&&!window.TTS)return console.warn("SpeechSynthesisUtterance not available");1==e.length&&(/[0-9]/.test(e)&&++this.flags.said_number_count<3?e=(0,a.t)("number {{digit}}",{digit:e}):s[e]?e=(0,a.t)(s[e]):e.toUpperCase()!=e.toLowerCase()&&e.toUpperCase()==e&&(e=(0,a.t)("capital {{letter}}",{letter:e})));var i=function(e){return(e||100)/100};if(window.TTS)window.TTS.speak({text:e,volume:i(t.voice_volume),rate:1.6,locale:"en-US"},(function(){o.protect_speech=!1}),(function(){}));else{var u=new SpeechSynthesisUtterance;u.voice=this.voice=this.get_voice(t.voice_name),u.volume=i(t.voice_volume),u.rate=i(t.voice_rate),u.text=e,u.pitch=i(t.voice_pitch),u.lang=t.locale||"en-US",speechSynthesis.speak(u),u.onstart=function(e){this.cancelling=!1,this.lastTime=0,this.lastLength=0}.bind(this),u.onend=function(){r&&r(this.cancelling),this.protect_speech=!1}.bind(this),u.onboundary=function(e){var t=this.lastLength?(e.elapsedTime-this.lastTime)/this.lastLength:e.elapsedTime/e.charLength;this.lastTime=e.elapsedTime,this.lastLength=e.charLength,n&&n(e.charIndex+e.charLength/2,t)}}}}],o=[{key:"trans_chr_to_text",value:function(e){return s[e]?s[e]:e}}],r&&i(t.prototype,r),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=u},25018:(e,t,r)=>{r(30489),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,a,o){return n.default.createElement(i.default,{header:!1,darkBody:!0},n.default.createElement(d,{title:e,header:t,body:r,button_caption:a,button_callback:o}))};var n=s(r(67294)),a=s(r(26314)),o=s(r(57023)),i=s(r(24508));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,r,i,s=c(f);function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),s.call(this,e)}return t=f,(r=[{key:"render",value:function(){var e=this.props;return n.default.createElement("div",null,n.default.createElement(o.default,{name:"",profile:approuter.profile}),n.default.createElement(a.default,{width:550},n.default.createElement("h6",null,e.title),n.default.createElement("h1",null,e.header),n.default.createElement("p",null,e.body),n.default.createElement("a",{onClick:e.button_callback,className:"btn btn-primary btn-large"},e.button_caption)))}}])&&u(t.prototype,r),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.default.Component)},52058:(e,t,r)=>{r(92222),r(57327),r(21249),r(19601),r(30489),r(47941),r(74916),r(64765),r(23123),r(73210),Object.defineProperty(t,"__esModule",{value:!0}),t.listInOauthOptions=t.TPLoginSignup=void 0,t.login_app=F,t.school_login_app=ae,t.school_signup_app=oe,t.signup_app=H;var n,a,o,i,s,u=r(67449),l=w(r(75564)),c=w(r(24508)),f=w(r(67294)),p=w(r(45697)),d=w(r(69606)),h=r(95343),m=w(r(75933)),y=b(r(71327)),v=r(99332),g=b(r(58200));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function w(e){return e&&e.__esModule?e:{default:e}}function k(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function x(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function E(e,t,r){return t&&O(e.prototype,t),r&&O(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=M(e);if(t){var a=M(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var A=function(e){P(r,e);var t=N(r);function r(e){var n;return j(this,r),(n=t.call(this,e)).state={},l.default.getSchoolAccount("www",(function(e){return n.setState({oauths:e.oauths})})),m.default.load({google:{families:["Indie+Flower","Roboto:100,300,400,700"]}}),n}return E(r,[{key:"showAccountSelection",value:function(e){this.setState({credentials:e})}},{key:"render",value:function(){var e,t,r=this,n=this.props.is_signup,a=this.state,o=a.oauths,i=a.credentials,s=a.loading;t=n?(0,u.jsx)("p",null,(0,h.t)("You are about to sign up for TypingClub's Individual Edition. If you are an instructor and wish to create a school account"),", ",(0,u.jsx)("a",{href:"https://s.typingclub.com/schools/signup.html"},(0,h.t)("use this form instead."))):window.cordova?(0,u.jsx)("div",null," "):(0,u.jsx)("p",{role:"heading"},(0,h.t)("For school accounts, please go to your school login page.")," ",(0,u.jsx)("a",{href:"https://s.typingclub.com/find-school-code.html"},(0,h.t)("Use this form to look up your school code.")));var l=function(e){return r.setState({loading:e})};return e=i?(0,u.jsx)(L,{t:h.t,credentials:i}):this.state.forgotPassword?(0,u.jsx)(I,{t:h.t,goBack:function(){return r.setState({forgotPassword:!1})}}):this.state.classSignupCode?(0,u.jsx)(D,{t:h.t,goBack:function(){return r.setState({classSignupCode:!1})}}):o?(0,u.jsx)("div",{className:"container"},(0,u.jsx)("div",{className:"row"},(0,u.jsx)("div",{className:"col-lg-4 col-lg-offset-1 col-md-4 col-sm-4 ed-log-in-logo"},(0,u.jsx)("a",{tabIndex:"-1",href:"https://www.typingclub.com"},(0,u.jsx)("img",{src:"https://static.typingclub.com/m/corp2/img/typingclub_logo.png"})),(0,u.jsx)("div",{className:"ed-tpc-logo"},(0,u.jsx)("a",{tabIndex:"-1",href:"https://www.typingclub.com"},"Individual Edition")),t),(0,u.jsx)("div",{className:"col-lg-5 col-lg-offset-1 col-md-6 col-md-offset-1 col-sm-7 col-sm-offset-1"},s?(0,u.jsx)("div",{className:"ed-sign",style:{position:"relative"}},(0,u.jsx)("h3",{style:{textAlign:"center",padding:"100px 0 250px"}},"Checking profile..."),(0,u.jsx)("div",{className:"boxLoading boxLoading-dark"}),(0,u.jsx)("a",{onClick:function(){return l(!1)}},"« ",(0,h.t)("Back to "+(n?"Sign Up":"Log-in")+" Page"))):n?(0,u.jsx)(q,{t:h.t,handler:this,oauths:o,toggleLoading:l,classSignupCode:function(){return r.setState({classSignupCode:!0})}}):(0,u.jsx)(z,{t:h.t,handler:this,oauths:o,toggleLoading:l,forgotPassword:function(){return r.setState({forgotPassword:!0})}}),!s&&(0,u.jsx)("div",{className:"ed-account"},n?(0,u.jsx)("div",null,(0,h.t)("Already have an account?")," ",(0,u.jsx)("a",{onClick:approuter.login_page},(0,h.t)("Log-in"))):(0,u.jsx)("div",null,(0,h.t)("Don't have an account?")," ",(0,u.jsx)("a",{id:"signup-link",onClick:approuter.signup_page},(0,h.t)("Sign up"))))))):(0,u.jsx)("div",{className:"boxLoading"}),(0,u.jsx)("div",null,(0,u.jsx)("div",{className:"ed-log-in-container"},e),(0,u.jsx)("div",{className:"ed-footer-nav container"},(0,u.jsx)("a",{href:"https://www.typingclub.com"},"TypingClub"),(0,u.jsx)("a",{href:"https://www.typingclub.com/privacy.html"},(0,h.t)("Privacy Policy")),(0,u.jsx)("a",{href:"https://www.typingclub.com/terms.html"},(0,h.t)("Terms of Service"))))}}]),r}(f.default.Component);t.TPLoginSignup=A;var D=function(e){P(r,e);var t=N(r);function r(){var e;j(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return x(R(e=t.call.apply(t,[this].concat(a))),"state",{}),e}return E(r,[{key:"componentDidMount",value:function(){this.refs.classCode.focus()}},{key:"checkClassCode",value:function(e){var t=this;this.setState({error:null}),e&&l.default.checkClassCode("",e,(function(r){r?window.location="".concat("https://s.typingclub.com","/signup/").concat(e):t.setState({error:"This code is incorrect. Ask your teacher for the correct class code."})}))}},{key:"render",value:function(){var e=this,t=this.state.error;return(0,u.jsx)("div",{className:"container"},(0,u.jsx)("div",{className:"row"},(0,u.jsx)("div",{className:"col-lg-4 col-lg-offset-1 col-md-4 col-sm-4 ed-log-in-logo"},(0,u.jsx)("a",{href:"https://www.typingclub.com"},(0,u.jsx)("img",{src:"https://static.typingclub.com/m/corp2/img/typingclub_logo.png"})),(0,u.jsx)("div",{className:"ed-tpc-logo"},(0,u.jsx)("a",{href:"https://www.typingclub.com"},"Individual Edition")),(0,u.jsx)("p",{style:{textAlign:"center"}},(0,h.t)("Use this page to sign up with a class code."))),(0,u.jsx)("div",{className:"col-lg-5 col-lg-offset-1 col-md-6 col-md-offset-1 col-sm-7 col-sm-offset-1"},(0,u.jsx)("div",{className:"ed-sign"},(0,u.jsx)("p",null,(0,h.t)("Enter your class code here:")),(0,u.jsx)("div",{className:"form-group"},(0,u.jsx)("input",{ref:"classCode",className:"inpt ed-input-log-in",placeholder:"Your class code",onKeyPress:function(t){return 13===t.charCode&&e.checkClassCode(e.refs.classCode.value)}})),(0,u.jsx)("div",{className:"errorlist",role:"alert"},t&&(0,u.jsx)("div",{id:"error-container",className:"error"},t)),(0,u.jsx)("button",{className:"btn log-in-with",style:{textAlign:"center"},onClick:function(){return e.checkClassCode(e.refs.classCode.value)}},(0,h.t)("Sign Up")),(0,u.jsx)("br",null),(0,u.jsx)("br",null),(0,u.jsx)("a",{onClick:this.props.goBack},"« ",(0,h.t)("Back to Sign Up Page"))))))}}]),r}(f.default.Component),I=function(e){P(r,e);var t=N(r);function r(){var e;j(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return x(R(e=t.call.apply(t,[this].concat(a))),"state",{}),e}return E(r,[{key:"render",value:function(){var e=this,t=this.props.goBack,r=this.state.email_sent;return(0,u.jsx)("div",{className:"container"},(0,u.jsx)("div",{className:"row"},(0,u.jsx)("div",{className:"col-lg-4 col-lg-offset-1 col-md-4 col-sm-4 ed-log-in-logo"},(0,u.jsx)("a",{href:"https://www.typingclub.com"},(0,u.jsx)("img",{src:"https://static.typingclub.com/m/corp2/img/typingclub_logo.png"})),(0,u.jsx)("div",{className:"ed-tpc-logo"},(0,u.jsx)("a",{href:"https://www.typingclub.com"},"Individual Edition")),(0,u.jsx)("p",{style:{textAlign:"center"}},(0,h.t)("Use this page to reset your password."))),(0,u.jsx)("div",{className:"col-lg-5 col-lg-offset-1 col-md-6 col-md-offset-1 col-sm-7 col-sm-offset-1"},(0,u.jsx)("div",{className:"ed-sign"},r?(0,u.jsx)("div",null,(0,u.jsx)("b",{style:{fontSize:18}},(0,h.t)("Email Sent"),"!"),(0,u.jsx)("br",null),(0,u.jsx)("br",null),(0,u.jsx)("p",null,(0,h.t)("Please check your email for further instructions to reset your password."))):(0,u.jsx)("div",null,(0,u.jsx)("p",null,(0,h.t)("Please provide your email address:")),(0,u.jsx)("div",{className:"form-group"},(0,u.jsx)("input",{className:"inpt ed-input-log-in",type:"text",ref:"email","aria-label":"Email",placeholder:"Your email address"})),(0,u.jsx)("button",{className:"btn log-in-with",onClick:function(){var t=e.refs.email.value;e.setState({email_sent:!1,email:t}),t&&l.default.forgotPassword("www",t,(function(){return e.setState({email_sent:!0})}))}},(0,h.t)("Reset Password"))),(0,u.jsx)("br",null),(0,u.jsx)("a",{onClick:t},"« ",(0,h.t)("Back to Login Page"))))))}}]),r}(f.default.Component),L=function(e){e.t;var t=e.credentials;return(0,u.jsx)("div",{className:"container"},(0,u.jsx)("div",{className:"row"},(0,u.jsx)("div",{className:"col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 ed-log-in-logo"},(0,u.jsx)("a",{href:"https://www.typingclub.com",className:"tpc-logo-center"},(0,u.jsx)("img",{src:"https://static.typingclub.com/m/pub/images/tpc-logo.svg"})),(0,u.jsx)("a",{className:"ed-tpc-logo-center",href:"https://www.typingclub.com"},"TypingClub"),(0,u.jsx)("div",{className:"ed-sign ed-sign-center"},(0,u.jsx)("h4",null,"Choose Your Account:"),(0,u.jsx)("p",null,"You seem to have more than one account with TypingClub."),t.user&&(0,u.jsx)("div",null,(0,u.jsx)("div",{className:"ed-gray-line"}),(0,u.jsx)("div",{className:"row"},(0,u.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6"},(0,u.jsx)("h5",null,"Individual Edition"),(0,u.jsx)("h6",null,t.user.student_name),(0,u.jsx)("h6",{style:{color:"gray",textAlign:"left"}},(0,u.jsx)("b",null,"www"),".typingclub.com")),(0,u.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6"},(0,u.jsx)("button",{onClick:function(){return g.signUserIn(t.user.login_token).then(g.takeMeHomeOrNext)},className:"btn log-in-with"},"Sign in")))),(0,u.jsx)("div",null,t.tpc_users.map((function(e){return(0,u.jsx)("div",{key:e.domain},(0,u.jsx)("div",{className:"ed-gray-line"}),(0,u.jsx)("div",{className:"row"},(0,u.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6"},(0,u.jsx)("h5",null,"School Edition"),(0,u.jsx)("h6",null,e.name),(0,u.jsx)("h6",{style:{color:"gray",textAlign:"left"}},(0,u.jsx)("b",null,e.domain),".typingclub.com")),(0,u.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6"},(0,u.jsx)("button",{onClick:function(){return g.signUserIn(e.login_token).then(g.takeMeHomeOrNext)},className:"btn log-in-with"},"Sign in"))))})),(0,u.jsx)("div",{className:"ed-gray-line"}))))))},B={google:{name:"Google",icon:"google-icon",background:"white"},office365:{name:"Office 365",icon:"office-365-white"},clever:{name:"Clever",icon:"clever-icon-white"}},U=function(e,t,r,n,a){return(0,u.jsx)("div",null,Object.keys(B).map((function(o){return e[o]&&(0,u.jsx)("a",{key:o,className:"btn log-in-with",onClick:function(){if("clever"===o){var i=e.clever,s=Object.assign({response_type:"code",redirect_uri:e.BASE_DOMAIN+"/cleverOauth"},i.PARAMS);window.location=i.AUTHORIZE_URL+"?"+d.default.param(s)}else(0,v.oauthWithPopup)(o,t,e,a).then(r).catch(n)},"aria-label":(t?"Login":"Signup")+" with your "+B[o].name+" account"},(0,u.jsx)("img",{style:{background:B[o].background||"inherit"},src:"https://static.typingclub.com/m/pub/images/"+B[o].icon+".svg"}),"Sign ",t?"up":"in"," with ",B[o].name)})))};t.listInOauthOptions=U;var z=function(e){var t=e.t,r=e.handler,n=e.oauths,a=e.forgotPassword,o=e.toggleLoading;return(0,u.jsx)("div",{className:"ed-sign"},U(n,!1,(function(e){e?r.showAccountSelection(e):approuter.dashboard()}),(function(e){var r;r=e?e.responseJSON:t("You do not have an account with us yet.")+" <a onclick=\"document.getElementById('signup-link').click()\">"+t("Do you want to create an account now?")+"</a>",setTimeout((function(){return(0,d.default)("#error-container").html(r)}))}),o),(0,u.jsx)("div",{className:"ed-blue-line-left"}),(0,u.jsx)("div",{className:"ed-or"},t("OR")),(0,u.jsx)("div",{className:"ed-blue-line-right"}),(0,u.jsx)("div",{className:"form-group"},(0,u.jsx)("input",{className:"inpt ed-input-log-in",type:"text",id:"username","aria-label":"Username or email",autoFocus:!0,placeholder:t("Username or Email"),onKeyPress:function(e){if(13===e.charCode){var t=(0,d.default)("#password");t.val()?(0,d.default)("#login-with-password").click():t.focus()}}}),(0,u.jsx)("input",{className:"inpt ed-input-log-in",type:"password",id:"password","aria-label":"Enter password",placeholder:t("Password"),onKeyPress:function(e){return 13===e.charCode&&(0,d.default)("#login-with-password").click()}})),(0,u.jsx)("div",{className:"errorlist",role:"alert"},(0,u.jsx)("div",{id:"error-container",className:"error"})),(0,u.jsx)("div",{style:{marginTop:25}},(0,u.jsx)("button",{id:"login-with-password",className:"btn log-in-with",style:{textAlign:"center"},onClick:function(){var e=(0,d.default)("#username").val(),r=(0,d.default)("#password").val();e&&r?((0,d.default)("#error-container").html(""),o&&o(!0),l.default.getUserToken("www",e,r,(function(e){return g.signUserIn(e.login_token).then(g.takeMeHomeOrNext)}),(function(e){o&&o(!1),(0,d.default)("#password").val(""),500==e.status?(0,d.default)("#error-container").html($(t).ServerError):(0,d.default)("#error-container").html(t("The username and password you entered did not match our records. Please double-check and try again."))}))):(0,d.default)("#error-container").html(t("Please enter both username and password"))}},t("Sign in"))),(0,u.jsx)("div",{className:"row"},(0,u.jsx)("div",{className:"col-md-6"}),(0,u.jsx)("div",{className:"col-md-6"},(0,u.jsx)("div",{className:"ed-forget-password"},(0,u.jsx)("a",{onClick:a},t("Forgot your password?"))))))},q=function(e){var t=e.t,r=(e.handler,e.oauths),n=e.classSignupCode,a=e.toggleLoading;return(0,u.jsx)("div",{className:"ed-sign"},(0,u.jsx)("p",{style:{textAlign:"right",fontSize:18,marginBottom:15}},(0,u.jsx)("a",{onClick:n},t("I have a class signup code"))),U(r,!0,(function(e){return approuter.dashboard()}),(function(){return(0,d.default)("#error-container").html("You already have an account with us. Do you want to signin instead?")}),a),(0,u.jsx)("div",{className:"ed-blue-line-left"}),(0,u.jsx)("div",{className:"ed-or"},t("OR")),(0,u.jsx)("div",{className:"ed-blue-line-right"}),(0,u.jsx)("div",{className:"form-group"},(0,u.jsx)("input",{className:"inpt ed-input-log-in",type:"text",id:"fname","aria-label":"First Name",autoFocus:!0,placeholder:t("First Name"),onKeyPress:function(e){return 13===e.charCode&&(0,d.default)("#lname").focus()}}),(0,u.jsx)("input",{className:"inpt ed-input-log-in",type:"text",id:"lname","aria-label":"Last Name",placeholder:t("Last Name"),onKeyPress:function(e){return 13===e.charCode&&(0,d.default)("#username").focus()}}),(0,u.jsx)("input",{className:"inpt ed-input-log-in",type:"text",id:"username_or_email","aria-label":"Username or email",placeholder:t("Username or Email"),onKeyPress:function(e){return 13===e.charCode&&(0,d.default)("#password").focus()}}),(0,u.jsx)("input",{className:"inpt ed-input-log-in",type:"password",id:"password","aria-label":"Enter password",placeholder:t("Password"),onKeyPress:function(e){return 13===e.charCode&&(0,d.default)("#sign-up-with-password").click()}})),(0,u.jsx)("div",{className:"errorlist",role:"alert"},(0,u.jsx)("div",{id:"error-container",className:"error"})),(0,u.jsx)("div",{style:{marginTop:25}},(0,u.jsx)("button",{id:"sign-up-with-password",className:"btn log-in-with",style:{textAlign:"center"},onClick:function(){var e=(0,d.default)("#fname").val(),r=(0,d.default)("#lname").val(),n=(0,d.default)("#password").val(),o=(0,d.default)("#username_or_email").val();if(e)if(o&&n){var i={fname:e,lname:r,password:n};y.validateEmail(o)?i.email=o:i.username=o,(0,d.default)("#error-container").html(""),a&&a(!0),approuter.update_profile(i).then(approuter.dashboard).catch((function(n){a&&a(!1),setTimeout((function(){(0,d.default)("#fname").val(e),(0,d.default)("#lname").val(r);var a=n.responseJSON;a&&a.student?a.student.email?(0,d.default)("#error-container").html(t('Email "{{email}}" is already taken',{email:o})):(0,d.default)("#error-container").html(t('Username "{{username}}" is already taken',{username:o})):(0,d.default)("#error-container").html(t("Some unexpected error occurred. Please try again later."))}))}))}else(0,d.default)("#error-container").html(t("Please enter both username and password"));else(0,d.default)("#error-container").html(t("Please enter your first name"))}},t("Sign Up"))))};function W(e){return(0,u.jsx)(c.default,{style:"ENTRY",cloudBody:!0,header:null},(0,u.jsx)("img",{src:"/m/pub/images/tpc-clouds-background.svg",className:"tpc-cloud"}),(0,u.jsx)(A,{is_signup:e}))}function F(e,t){if(!t||"blank"===t.type||t.is_anonymous)return g.isLoggedIn(),W(!1);g.takeMeHome(g.getSession())}function H(e,t){if(!t||"blank"===t.type||t.is_anonymous)return W(!0);approuter.dashboard()}F.authorization=function(){return!0},H.authorization=function(){return!0};var Y={google:{name:"Google",icon:"google-icon",background:"white"},clever:{name:"Clever",icon:"clever-icon-white"},classlink:{name:"Classlink",icon:"classlink-icon-white"},office365:{name:"Office 365",icon:"office-365-white"}},$=function(){return{InactiveUser:(0,h.t)("Your account is no longer active. Please speak to your instructor to have your account reactivated."),TeacherLoginNotSupported:(0,h.t)("Teachers, please sign in using a browser."),UserPass:(0,h.t)("Username and/or Password is wrong."),UserNotFound:(0,h.t)("User not found."),SchoolCode:(0,h.t)("School code does not exist."),BlockedIP:(0,h.t)("Your IP address has been blocked due to too many requests."),LoginBlockedUntil:(0,h.t)("Your district/school has not yet opened access to students."),ServerError:(0,h.t)("There was an error during the login. Please wait a bit and try again.")}},K=function(e){P(r,e);var t=N(r);function r(e){var n;j(this,r),(n=t.call(this,e)).state={tab:"change-domain"},n.url_domain=!window.cordova&&location.hostname.split(".")[0];var a=window.cordova?localStorage.getItem("domain-key"):n.url_domain;return a&&"s"!==a&&(n.domain=a),g.isLoggedIn()?(n.state.tab="checking-profile",re(),g.takeMeHomeOrNext(g.getSession())):n.domain&&(n.state.tab="login",n.setSchool(a,(function(e){return n.setState({tab:"change-domain",error:e})}))),n}return E(r,[{key:"getErrorText",value:function(e){var t;return t="string"==typeof e?e:e.auth_error_code,$()[t]||t}},{key:"setSchool",value:function(e,t){var r=this;l.default.getSchoolAccount(e,(function(t){r.url_domain&&e!=r.url_domain?window.location="//"+e+location.host.substr(r.url_domain.length)+location.search:(window.cordova&&localStorage.setItem("domain-key",e),t.oauths&&t.oauths.google&&t.oauths.google.force_google_logout&&localStorage.setItem("force_google_logout",!0),r.setState({tab:"login",acc:t}))}),(function(e){return t(r.getErrorText(e.responseJSON))}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.tab,n=t.acc;if("checking-profile"===r)return(0,u.jsx)(G,null);var a="";if("change-domain"===r)a=(0,u.jsx)(X,{domain:!n&&this.domain,goBack:n&&function(){return e.setState({tab:"login"})},setSchool:this.setSchool.bind(this)});else{if(!n)return null;"signup"===r?a=(0,u.jsx)(ee,{acc:n}):"reset-password"===r&&(a=(0,u.jsx)(Q,{acc:n}))}var o=window.cordova?(0,u.jsx)("p",null):(0,u.jsx)("a",{href:"https://s.typingclub.com/find-school-code.html"},"Find Your School Code");if(a)return(0,u.jsx)("div",{className:"page",style:"signup"===r?{width:450}:{}},(0,u.jsx)("div",{style:{position:"relative"}},(0,u.jsx)("div",{className:"logo"}),(0,u.jsx)("div",{className:"school-name"},"School Edition"),a,n?(0,u.jsx)("a",{onClick:function(){e.setState({tab:"login"})}},(0,u.jsx)("i",{className:"edicon-arrow-down"})," Back to Login Page"):o,!window.cordova&&(0,u.jsx)("a",{style:{float:"right"},href:"https://s.typingclub.com/schools/signup.html"},"Sign Up New Account")));return(0,u.jsx)(Z,{changeDomain:function(){this.setState({tab:"change-domain"})}.bind(this),resetPassword:function(){return e.setState({tab:"reset-password"})},signup:function(){return e.setState({tab:"signup"})},acc:n,schoolOauths:Y,getErrorText:this.getErrorText.bind(this)})}}]),r}(f.default.Component),G=function(){return(0,u.jsx)("div",{className:"page"},(0,u.jsx)("div",{style:{position:"relative"}},(0,u.jsx)("div",{className:"logo"}),(0,u.jsx)("h3",{style:{padding:"20px 0 140px",textAlign:"center"}},"Checking profile..."),(0,u.jsx)("div",{className:"boxLoading boxLoading-dark"})),(0,u.jsx)("a",{id:"change-school",className:"change-btn",onClick:function(){return location.reload()}},"×"))},J=function(e){var t=e.title,r=e.body;return(0,u.jsx)("div",{css:(0,u.css)(n||(n=k(["\n        position: absolute;\n        background-color: #3d526b;\n        border-radius: 5px;\n        width: 340px;\n        font-family: 'Roboto', sans-serif;\n        font-size: 16px;\n        font-weight: 400;\n        line-height: 20px;\n        color: #fff;\n        z-index: 600;\n        top: -45px;\n        right: -360px;\n      "])))},(0,u.jsx)("div",{css:(0,u.css)(a||(a=k(["\n          position: absolute;\n          width: 16px;\n          height: 16px;\n          transform: scaleX(0.9) rotate(45deg);\n          background-color: #3d526b;\n          top: 93px;\n          left: -8px;\n        "])))}),(0,u.jsx)("div",{css:(0,u.css)(o||(o=k(["\n          background-color: #6583a8;\n          height: 5px;\n          border-radius: 3px 3px 0 0;\n        "])))}),(0,u.jsx)("div",{css:(0,u.css)(i||(i=k(["\n          padding: 20px 30px 25px 30px;\n        "])))},(0,u.jsx)("div",{css:(0,u.css)(s||(s=k(["\n            font-size: 20px;\n            font-weight: 600;\n            margin-bottom: 10px;\n          "])))},t),(0,u.jsx)("div",null,r)))};J.propTypes={title:p.default.string.isRequired,body:p.default.oneOfType([p.default.arrayOf(p.default.node),p.default.node,p.default.func]).isRequired};var V=function(){var e=window.localStorage?window.localStorage.getItem("guide.admin_onboarding"):null,t=e?JSON.parse(e):null,r=window.localStorage.getItem("guide._already_logged_in_as_student")||!1,n=9===t&&r;return 9===t&&!r?(0,u.jsx)(J,{title:"Log into your student account",body:(0,u.jsx)(f.default.Fragment,null,"Enter the login credentials set in the previous step.",(0,u.jsx)("br",null),"Once logged in, practice a few lessons to get a feel of the student experience with the program, and then log back into your teacher portal.")}):n?(0,u.jsx)(J,{title:"Log into your teacher account",body:(0,u.jsx)(f.default.Fragment,null,"Enter the login credentials for your teacher account.",(0,u.jsx)("br",null),"Once logged in, find the student record you just experimented with and view their activity.")}):null},Z=function(e){P(r,e);var t=N(r);function r(){var e;j(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return x(R(e=t.call.apply(t,[this].concat(a))),"state",{}),e}return E(r,[{key:"componentDidMount",value:function(){this.state.acc&&this.state.acc.is_email_password_login_enabled&&this.refs.username.focus()}},{key:"render",value:function(){var e=this;if(this.state.loading)return(0,u.jsx)(G,null);var t=this.props,r=t.acc,n=t.getErrorText,a=t.schoolOauths,o=Object.keys(a).filter((function(e){return e in r.oauths})),i=r.is_email_password_login_enabled||this.state.show_username_password,s=o.length>2&&i,c=(0,u.jsx)("div",{className:"oauth-buttons"},o.map((function(t){return(0,u.jsx)("button",{key:t,onClick:function(){return(0,v.oauthWithPopup)(t,!1,r.oauths,(function(t){return e.setState({loading:t})})).then((function(){re(),approuter.dashboard()})).catch((function(t){return e.setState({error:n(t&&t.responseJSON||"UserNotFound")})}))}},(0,u.jsx)("img",{style:{background:a[t].background||"inherit"},src:"https://static.typingclub.com/m/tpc-login/"+a[t].icon+".svg"}),!s&&"Sign in with "," ",a[t].name)})));return(0,u.jsx)("div",{className:"page",style:s?{width:650,paddingLeft:290}:{}},(0,u.jsx)("a",{id:"change-school",className:"change-btn",onClick:this.props.changeDomain},"×"),s&&(0,u.jsx)("div",{className:"left-side-page",style:{paddingTop:o.length<5?110:50}},(0,u.jsx)("h4",null,"Sign In with:"),c,(0,u.jsx)("div",{className:"or",style:{position:"absolute",top:"51%",right:-20}},"OR")),(0,u.jsx)("div",{style:{position:"relative"}},(0,u.jsx)("div",{className:"logo"}),(0,u.jsx)("div",{className:"school-name"},r.name),o.length>0&&!s&&(0,u.jsx)("div",null,c,i&&(0,u.jsx)("div",{className:"or-cnt"},(0,u.jsx)("span",{className:"line line-l"}," "),(0,u.jsx)("span",{className:"or"},"OR"),(0,u.jsx)("span",{className:"line line-r"}," "))),(0,u.jsx)("div",{style:{textAlign:"center"}},(0,u.jsx)("div",{className:"errors",style:s?{height:0,margin:0,whiteSpace:"pre-wrap"}:{}},this.state.error||" ")),i&&(0,u.jsx)("div",null,(0,u.jsx)("div",{style:{marginTop:s?70:10,position:"relative"}},(0,u.jsx)(V,null),(0,u.jsx)("input",{type:"text",placeholder:"Username or Email",id:"username",ref:"username",autoCapitalize:"off",onKeyPress:function(t){return 13===t.charCode&&e.refs.login_button.click()},autoCorrect:"off",autoComplete:"off",autoFocus:"autofocus"}),(0,u.jsx)("input",{type:"password",placeholder:"Password",id:"password",ref:"password",autoCapitalize:"off",onKeyPress:function(t){return 13===t.charCode&&e.refs.login_button.click()},autoCorrect:"off",autoComplete:"off"})),(0,u.jsx)("div",{style:{textAlign:"right",fontSize:16}},(0,u.jsx)("button",{ref:"login_button",onClick:function(){var t=e.refs.username.value,a=e.refs.password.value;if(!t)return e.setState({error:"Need a valid username/email."});e.setState({error:null,loading:!0}),l.default.getUserToken(r.domain,t,a,(function(e){return g.signUserIn(e.login_token).then(g.takeMeHomeOrNext)}),(function(t){e.setState({loading:!1,error:n(t.responseJSON||"ServerError")})}))},id:"login-btn",className:"login-btn"},"Login"))),(0,u.jsx)("div",{style:{marginTop:5,height:30}},i?(0,u.jsx)("a",{onClick:this.props.resetPassword},"Forgot your password?"):(0,u.jsx)("a",{onClick:function(){return e.setState({show_username_password:!0})}},"Login with password"),r.joinable&&(0,u.jsx)("a",{onClick:this.props.signup,style:{float:"right"}},"Enter a Class Code"))))}}]),r}(f.default.Component),X=function(e){P(r,e);var t=N(r);function r(e){var n;return j(this,r),x(R(n=t.call(this,e)),"state",{}),n}return E(r,[{key:"getSchool",value:function(e){var t=this;this.props.setSchool(e,(function(e){return t.setState({error:e})}))}},{key:"componentDidMount",value:function(){this.refs.domain.focus()}},{key:"render",value:function(){var e=this;return(0,u.jsx)("div",null,(0,u.jsx)("h3",null,"Enter Your School Code"),"Your school code is the first part of your TypingClub School Edition’s portal URL.",window.cordova?" Please ask your teacher or instructor if you don't know what your school code is.":" For example, if your account’s login URL is: https://yourschool.typingclub.com your school code would be yourschool.",(0,u.jsx)("input",{type:"text",ref:"domain",autoCapitalize:"off",autoCorrect:"off",autoComplete:"off",placeholder:"Your School Code",onKeyPress:function(t){return 13===t.charCode&&e.getSchool(e.refs.domain.value)}}),this.state.error&&(0,u.jsx)("div",{className:"errors"},this.state.error),(0,u.jsx)("div",{style:{margin:"15px 0"}},(0,u.jsx)("button",{onClick:function(){return e.getSchool(e.refs.domain.value)}},"Set School")))}}]),r}(f.default.Component),Q=function(e){P(r,e);var t=N(r);function r(){var e;j(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return x(R(e=t.call.apply(t,[this].concat(a))),"state",{}),e}return E(r,[{key:"componentDidMount",value:function(){this.refs.resetEmail.focus()}},{key:"resetPassword",value:function(e){var t=this;this.setState({email:e}),e&&l.default.forgotPassword(this.props.acc.domain,e,(function(e){return t.setState(e)}))}},{key:"render",value:function(){var e=this;return this.state.email_sent?(0,u.jsx)("div",{style:{marginBottom:15}},(0,u.jsx)("h3",null,"Email Sent!"),"Please check your email for further instructions to reset your password."):(0,u.jsx)("div",null,(0,u.jsx)("h3",null,"Students:"),"Please ask your teacher for help if you've forgotten your password or are having trouble logging in.",(0,u.jsx)("h3",null,"Instructors"),"Please enter your email address below:",(0,u.jsx)("input",{ref:"resetEmail",type:"email",style:{fontWeight:"normal",marginTop:15},placeholder:"Your email address",onKeyPress:function(t){return 13===t.charCode&&e.resetPassword(e.refs.resetEmail.value)}}),(0,u.jsx)("button",{style:{margin:"15px 0"},onClick:function(){return e.resetPassword(e.refs.resetEmail.value)}},"Reset Password"))}}]),r}(f.default.Component),ee=function(e){P(r,e);var t=N(r);function r(){var e;j(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return x(R(e=t.call.apply(t,[this].concat(a))),"state",{}),e}return E(r,[{key:"componentDidMount",value:function(){this.refs.classCode.focus()}},{key:"checkClassCode",value:function(e){var t=this;this.setState({error:null}),e&&l.default.checkClassCode(this.props.acc.domain,e,(function(r){r?approuter.goto_app("shared.school_signup_app",{class_code:e}):t.setState({error:"This code is incorrect. Ask your teacher for the correct class code."})}))}},{key:"render",value:function(){var e=this;this.props.acc;return(0,u.jsx)("div",null,"Enter your class code below. If you don't have one, ask your instructor.",(0,u.jsx)("input",{ref:"classCode",style:{fontWeight:"normal",marginTop:15},placeholder:"Your class code",onKeyPress:function(t){return 13===t.charCode&&e.checkClassCode(e.refs.classCode.value)}}),this.state.error&&(0,u.jsx)("div",{className:"errors"},this.state.error),(0,u.jsx)("button",{style:{margin:"15px 0"},onClick:function(){return e.checkClassCode(e.refs.classCode.value)}},"Sign Up"))}}]),r}(f.default.Component),te=function(e){P(r,e);var t=N(r);function r(e){var n;return j(this,r),x(R(n=t.call(this,e)),"state",{lock_button:!1}),l.default.checkClassCode("",e.code,(function(t){t?n.setState(t):n.setState({error:(0,u.jsx)("h4",null,"Class code ",(0,u.jsx)("b",null,e.code)," is no longer valid. Please ask your teacher for the new class code.")})})),n}return E(r,[{key:"componentDidUpdate",value:function(){this.state.password_enabled&&!this.state.loading&&this.refs.fname.focus()}},{key:"oauthSignup",value:function(e,t){var r=this;l.default.signup2Class({code:this.props.code,sign:e.sign},(function(e){return g.signUserIn(e.login_token).then(g.takeMeHomeOrNext)}),(function(e){t.disabled=!1,r.setState({loading:!1,signup_error:e.responseJSON})}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.school_name,n=t.class_name,a=t.password_enabled,o=t.oauths,i=t.error;t.loading;if(!i&&!r)return null;if(this.state.loading)return(0,u.jsx)(G,null);var s=[];o&&(s=o?Object.keys(Y).filter((function(e){return e in o})):[]);var c=s.length>0&&a,f=(0,u.jsx)("div",{className:"oauth-buttons"},s.map((function(t){return(0,u.jsx)("button",{key:t,onClick:function(r){var n=r.target;n.disabled=!0,(0,v.oauthWithPopup)(t,!0,o,(function(t){n.disabled=t,e.setState({loading:t})})).then((function(t){return e.oauthSignup(t,n)})).catch((function(t){return e.setState({signup_error:t.responseJSON})}))}},(0,u.jsx)("img",{style:{background:Y[t].background||"inherit"},src:"https://static.typingclub.com/m/tpc-login/"+Y[t].icon+".svg"}),!c&&"Sign up with "," ",Y[t].name)})));return(0,u.jsx)("div",{className:"page",style:c?{width:650,paddingLeft:290}:{}},(0,u.jsx)("a",{id:"change-school",className:"change-btn",onClick:function(){return approuter.goto_app("shared.login_page")}},"×"),c&&(0,u.jsx)("div",{className:"left-side-page",style:{paddingTop:120}},(0,u.jsx)("h4",null,"Sign up with:"),f,(0,u.jsx)("div",{className:"or",style:{position:"absolute",top:"45%",right:-20}},"OR")),(0,u.jsx)("div",{style:{position:"relative"}},(0,u.jsx)("div",{className:"logo"}),(0,u.jsx)("div",{className:"school-name"},(0,u.jsx)("div",null,r),n&&(0,u.jsx)("div",{style:{fontSize:16,marginTop:5}},n)),i&&(0,u.jsx)("div",{className:"errors"},i),s.length>0&&!c&&(0,u.jsx)("div",null,f,a&&(0,u.jsx)("div",{className:"or-cnt"},(0,u.jsx)("span",{className:"line line-l"}," "),(0,u.jsx)("span",{className:"or"},"Or"),(0,u.jsx)("span",{className:"line line-r"}," "))),a&&(0,u.jsx)("div",null,(0,u.jsx)("input",{ref:"fname",placeholder:"First Name",onKeyPress:function(t){return 13===t.charCode&&e.refs.lname.focus()}}),(0,u.jsx)("input",{ref:"lname",placeholder:"Last Name (optional)",onKeyPress:function(t){return 13===t.charCode&&e.refs.username.focus()}}),(0,u.jsx)("input",{ref:"username",placeholder:"Username or Email",onKeyPress:function(t){return 13===t.charCode&&e.refs.password.focus()}}),(0,u.jsx)("input",{ref:"password",placeholder:"Password",onKeyPress:function(t){return 13===t.charCode&&e.refs.login_button.click()}}),this.state.signup_error&&(0,u.jsx)("div",{className:"errors"},this.state.signup_error),(0,u.jsx)("button",{ref:"login_button",disabled:!this.state.value&&this.state.lock_button,onClick:function(){var t=e.refs.username.value.trim(),r=e.refs.password.value,n=r,a=e.refs.fname.value,o=e.refs.lname.value;if(!t||!r)return e.setState({signup_error:"Need a valid username/email and password."});if(r!=n)return e.setState({signup_error:"Confirm Password does not match Password."});var i={fname:a,lname:o,username:t,password:r,code:e.props.code};e.setState({signup_error:null,lock_button:!0}),l.default.signup2Class(i,(function(e){return g.signUserIn(e.login_token).then(g.takeMeHomeOrNext)}),(function(t){return e.setState({signup_error:t.responseJSON,lock_button:!1})}))},id:"login-btn",className:"login-btn"},"Sign Up")),(0,u.jsx)("a",{onClick:function(){return approuter.goto_app("shared.login_app")}},(0,u.jsx)("i",{className:"edicon-arrow-down"})," Back to Login Page")))}}]),r}(f.default.Component);function re(){window.cordova&&y.show_ios_focus_popup("Welcome. Tap here to start.")}var ne=(0,u.jsx)("div",{className:"footer-links"},(0,u.jsx)("a",{href:"https://www.typingclub.com"},"About TypingClub"),(0,u.jsx)("a",{href:"/schools.html"},"Schools"),(0,u.jsx)("a",{href:"https://www.typingclub.com/privacy.html"},"Privacy"),(0,u.jsx)("a",{href:"https://www.typingclub.com/terms.html"},"Terms"),(0,u.jsx)("a",{href:"/docs/"},"Help"));function ae(e){return(0,u.jsx)(c.default,{style:"SCHOOL-ENTRY",header:null,skyBody:!0},(0,u.jsx)(K,null),!window.cordova&&ne)}function oe(e){return(0,u.jsx)(c.default,{style:"SCHOOL-ENTRY",header:null,skyBody:!0},(0,u.jsx)(te,{code:e.class_code}),!window.cordova&&ne)}ae.authorization=function(e){return!0},oe.authorization=function(e){return!0}},24340:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(96078),r(9653),r(19601),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(r(67294)),a=r(34153),o=r(66358),i=d(r(38452)),s=d(r(45697)),u=d(r(69606)),l=r(95343),c=d(r(42306)),f=d(r(49127)),p=d(r(75933));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function y(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var a=k(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function x(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var O=function(e){v(r,e);var t=_(r);function r(){var e;h(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return x(w(e=t.call.apply(t,[this].concat(a))),"state",{label:e.props.label,hideTooltip:!1}),e}return y(r,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.label!=this.props.label){this.hideTooltip=!0;var r=o.gsap.timeline();r.to(this.refs.root,{duration:.05,opacity:.5,y:0,scale:.8}),r.call((function(){return t.setState({label:e.label,hideTooltip:!0})})),r.to(this.refs.root,{duration:.6,opacity:1,scale:1,ease:"power3"})}}},{key:"render",value:function(){var e=this;Object.assign({},this.props.style);return n.default.createElement("button",{ref:"root",tabIndex:101,"aria-label":this.state.label||(0,l.t)("Continue"),className:"btn navbar-continue "+this.props.type+" hoverable-button"+(this.state.hideTooltip?" no-tooltip":""),style:{fontSize:""==this.state.label?35:14},disabled:this.props.disabled,onClick:function(){e.props.onClick(),e.setState({hideTooltip:!0})}},n.default.createElement("span",null,this.state.label||"→"),n.default.createElement("div",{className:"continue-tooltip"},"Press Enter"))}}]),r}(n.default.Component),E=function(e){v(r,e);var t=_(r);function r(e){var n;return h(this,r),(n=t.call(this,e)).onKeydown=n.onKeydown.bind(w(n)),n.onNext=n.onNext.bind(w(n)),n.inAction=!1,n.state={explanation:null,showNavbar:!0},n.inNavAccess=!1,e.noFontLoading||p.default.load({google:{families:["Montserrat:800","Rubik:300,400,700","Roboto Mono:400"]},classes:!1}),o.gsap.registerPlugin(f.default),n}return y(r,[{key:"componentDidMount",value:function(){this.keyHandlerID=approuter.keymanager.register(this.onKeydown,approuter.keymanager.Priority.sys)}},{key:"componentWillUnmount",value:function(){approuter.keymanager.unregister(this.keyHandlerID)}},{key:"onKeydown",value:function(e){var t=this;if(!this.inAction&&this.state.showNavbar){var r=function(r){!t.inNavAccess&&r&&(t.inAction=!0,r(),e.preventDefault(),setTimeout((function(){t.inAction=!1}),500))};switch(e.which){case i.default.space:if(!this.props.nextOnSpace)break;case i.default.right_arrow:case i.default.down_arrow:if(this.props.disableForwardKeys)break;case i.default.enter:if(this.props.disableEnterKey)break;if(this.props.onCloseTutorial)r(this.props.onCloseTutorial);else{var n=this.props.attempt&&this.props.attempt.is_failed;this.props.nextDisabled||n||r(this.props.onCloseTutorial||this.onNext)}break;case i.default.left_arrow:case i.default.up_arrow:if(this.props.disableForwardKeys)break;this.props.prevDisabled||this.props.attempt||r(this.props.onPrev);break;case i.default.escape:this.props.onCloseTutorial?r(this.props.onCloseTutorial):this.inNavAccess?(this.props.onNavAccess(!0),this.inNavAccess=!1):this.props.onNavAccess&&e.ctrlKey?(this.props.onNavAccess(!1),this.inNavAccess=!0):r(this.props.onSkip);break;case i.default.slash:this.props.onNavAccess&&e.ctrlKey&&!this.inNavAccess&&(this.props.onNavAccess(!1),this.inNavAccess=!0)}}}},{key:"onNext",value:function(){var e=this.props.attempt;e&&e.next_lesson_url?approuter.next_lesson():this.props.onNext&&this.props.onNext()}},{key:"render",value:function(){var e=this,t=this.props,r=t.attempt,i=t.moreDetails,s=t.theme,u=r&&(r.is_failed||r.has_performance_goals&&r.stars<5),c="primary";this.props.onCloseTutorial?c="outline":this.props.nextIsMono?c="mono":u&&(c="default");var f=!this.props.onCloseTutorial&&this.props.nextDisabled;return!r||!r.is_failed&&r.next_lesson_url||(f=!0),n.default.createElement("div",{style:{position:"relative",zIndex:100},className:(s||"")+(r&&i?" scrollable-results":"")},r&&n.default.createElement(a.ResultsPanel,{contentHeight:this.props.contentHeight,attempt:r,onExplain:this.props.withExplanation&&function(t){var r=o.gsap.timeline();r.to(e.refs.navbarDetails,{duration:.6,opacity:0}),r.call((function(){return e.setState({explanation:t})})),r.set(e.refs.navbarDetails,{y:10}),r.to(e.refs.navbarDetails,{duration:.6,opacity:1,y:0})},resultContent:this.props.resultContent,toggleNavbar:function(t){return e.setState({showNavbar:t})}}),n.default.createElement("div",{className:"bottom-nav-bar "+(!r&&this.props.theme||""),style:{display:this.state.showNavbar?"block":"none"}},n.default.createElement("div",{className:"navbar-content"},!this.props.onCloseTutorial&&(r?n.default.createElement("button",{className:"btn navbar-goback hoverable-button"+(u?" primary":" default"),disabled:r.no_redo,onClick:function(){return approuter.redo_lesson()},tabIndex:100+(u?0:2),"aria-label":(0,l.t)("Try again")},n.default.createElement("span",null,(0,l.t)("Try again"))):this.props.onPrev&&n.default.createElement("button",{className:"btn navbar-goback "+(this.props.prevIsLink?"btn-link":" default hoverable-button"),tabIndex:102,"aria-label":(0,l.t)("Previous"),disabled:this.props.prevDisabled,onClick:this.props.onPrev},n.default.createElement("span",null,(0,l.t)("Previous")))),(r||this.props.onNext||this.props.onCloseTutorial)&&n.default.createElement(O,{type:c,disabled:f,onClick:this.props.onCloseTutorial||this.onNext.bind(this),label:this.props.onCloseTutorial?this.props.progress?(0,l.t)("Continue"):(0,l.t)("Start Lesson"):r?"":this.props.nextLabel}),n.default.createElement("div",{ref:"navbarDetails",className:"navbar-details"},this.state.explanation?n.default.createElement("div",{tabIndex:99,dangerouslySetInnerHTML:{__html:this.state.explanation}}):this.props.onCloseTutorial||null==this.props.progress?null:n.default.createElement("div",{className:"bottom-progress-bar"},n.default.createElement("i",{style:{opacity:this.props.progress>0?1:0,width:this.props.progress+"%"}}))))),r&&this.props.moreDetails&&n.default.createElement(S,null,n.default.createElement(this.props.moreDetails,{attempt:r,profile:this.props.profile})))}}]),r}(n.default.Component);t.default=E;var S=function(e){v(r,e);var t=_(r);function r(){var e;h(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return x(w(e=t.call.apply(t,[this].concat(a))),"state",{renderingDetails:!1}),e}return y(r,[{key:"componentDidMount",value:function(){this.initScrollMagic(),o.gsap.to(this.refs.scrollReminder,{duration:.5,delay:2,opacity:1})}},{key:"componentWillUnmount",value:function(){this.scrollCtrl.destroy(!0)}},{key:"initScrollMagic",value:function(){var e=this;this.scrollCtrl=new c.default.Controller,new c.default.Scene({triggerElement:".attempt-details",triggerHook:.8}).on("enter",(function(){return!e.state.renderingDetails&&e.setState({renderingDetails:!0})})).addTo(this.scrollCtrl),new c.default.Scene({triggerElement:".remove-snap",triggerHook:1}).on("enter",(function(){return(0,u.default)("body").addClass("navbar-on-top")})).on("leave",(function(){return(0,u.default)("body").removeClass("navbar-on-top")})).addTo(this.scrollCtrl)}},{key:"scrollToDetails",value:function(){var e=(0,u.default)("body").hasClass("navbar-on-top")?0:(0,u.default)(window).height(),t=0;this.state.renderingDetails||(this.setState({renderingDetails:!0}),t=.4,o.gsap.to(window,{duration:.2,scrollTo:{y:.1*e},ease:"none"})),o.gsap.to(window,{delay:t,duration:1,scrollTo:{y:e-76},ease:"power2"})}},{key:"render",value:function(){return n.default.createElement("div",{className:"attempt-details"},n.default.createElement("i",{className:"remove-snap",style:{position:"absolute",top:"calc(100vh - 85px)",left:0}}),n.default.createElement("svg",{className:"scroll-reminder",ref:"scrollReminder",onClick:this.scrollToDetails.bind(this),viewBox:"8 9 44 44"},n.default.createElement("polyline",{className:"b",points:"26.02 29.5 30.26 33.74 34.5 29.5"})),this.state.renderingDetails&&this.props.children)}}]),r}(n.default.Component);E.propTypes={onNext:s.default.func,nextLabel:s.default.string,nextDisabled:s.default.bool,onPrev:s.default.func,prevDisabled:s.default.bool,nextOnSpace:s.default.bool,disableForwardKeys:s.default.bool,disableEnterKey:s.default.bool,onCloseTutorial:s.default.func,onNavAccess:s.default.func,prevIsLink:s.default.bool,nextIsMono:s.default.bool,theme:s.default.string,progress:s.default.number,attempt:s.default.object,resultContent:s.default.func}},88531:(e,t,r)=>{r(30489),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(67294)),a=s(r(78840)),o=s(r(90857)),i=s(r(28583));function s(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}(0,o.default)(a.default);var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(d,e);var t,r,o,s=p(d);function d(){return l(this,d),s.apply(this,arguments)}return t=d,o=[{key:"getOptions",value:function(){return a.default.getOptions()}}],(r=[{key:"render",value:function(){var e=(0,i.default)({},this.props);return delete e.options,n.default.createElement("div",u({},e,{ref:"chart"}))}},{key:"componentDidMount",value:function(){var e=(0,i.default)({},this.props.options),t={renderTo:this.refs.chart};e.chart?e.chart=(0,i.default)({},e.chart,t):e.chart=t,this.options=e,this.chart=new a.default.Chart(e)}},{key:"toggleSeries",value:function(e,t){t?this.chart.series[e].hide():this.chart.series[e].show()}},{key:"componentWillUnmount",value:function(){this.chart.destroy()}},{key:"setData",value:function(e,t,r){r&&(this.options.animation=!1,this.options.plotOptions.series.animation=!1),this.options.series[0].data=t,this.chart=new a.default.Chart(this.options)}}])&&c(t.prototype,r),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),d}(n.default.Component);t.default=m},16232:(e,t,r)=>{r(82526),r(41817),r(96649),r(21249),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(67294))&&n.__esModule?n:{default:n},o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(95343));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(c,e);var t,r,n,i=l(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t,r){(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(f(t=i.call(this,e)),"state",{active_dropdown:null}),approuter.events.on("unload",(function(){t.refs.navbarCollapseMain&&t.refs.navbarCollapseMain.classList.remove("in")})),t}return t=c,(r=[{key:"componentDidMount",value:function(){var e=approuter.profile;if(!e)return null;var t=o.default.getUserLocale(e);document.documentElement.lang=t.alias,document.documentElement.dir=t.dir}},{key:"set_language",value:function(e){approuter.update_profile({locale:e}).then((function(){document.location.reload()}))}},{key:"toggle_active_dropdown",value:function(e,t){if(e.preventDefault(),e.stopPropagation(),null==this.state.active_dropdown){var r=function(e){window.removeEventListener("click",r),this.state.active_dropdown&&this.setState({active_dropdown:null})}.bind(this);window.addEventListener("click",r)}t==this.state.active_dropdown&&(t=null),this.setState({active_dropdown:t})}},{key:"componentWillUnmount",value:function(){this.state.active_dropdown=null}},{key:"render",value:function(){var e=this,t=approuter.profile;if(!t)return null;var r=approuter.profile.is_anonymous,n=t.fname?t.fname:(0,o.t)("Me"),i=o.default.spaceLocales.length,s=t.programs.length,u=o.default.getUserLocale(t),l=a.default.createElement("li",{className:"dropdown"},a.default.createElement("a",{href:"#",onClick:function(t){return e.toggle_active_dropdown(t,"languages")},"aria-label":(0,o.t)("language menu. {{lang}} is selected",{lang:u.id}),className:"dropdown-toggle",tabIndex:s+9,"data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},a.default.createElement("div",{className:"flag-box"},a.default.createElement("i",{className:"flag "+("en"===u.id?"us":u.countryCode.toLowerCase())})),a.default.createElement("span",{className:"caret"})),"languages"==this.state.active_dropdown?a.default.createElement("ul",{className:"dropdown-menu"},o.default.spaceLocales.map(function(e,t){var r=this;return a.default.createElement("li",{key:e.id},a.default.createElement("a",{href:"#","aria-label":e.viewName,tabIndex:s+10+t,style:{padding:"8px 10px"},onClick:function(){r.set_language(e.id)}},a.default.createElement("div",{className:"flag-box"},a.default.createElement("i",{className:"flag "+("en"===e.id?"us":e.countryCode.toLowerCase())}))," ",e.viewName))}.bind(this))):null),c=approuter.program&&approuter.program.subject_id>200&&approuter.current_app&&"student.lessonplan"==approuter.current_app.app;return a.default.createElement("div",{className:"edheader f32"},a.default.createElement("a",{className:"jumpNav",onKeyUp:this.OnFocus.bind(this),role:"navigation",tabIndex:"1","aria-label":"to Jump to Main Content, press Enter key","aria-labelledby":"article"},"Jump to Main Content"),a.default.createElement("nav",{className:"navbar navbar-inverse navbar-fixed-top app-navbar",role:"navigation"},a.default.createElement("div",{className:"container"},a.default.createElement("div",{className:"navbar-header"},a.default.createElement("button",{type:"button",className:"navbar-toggle collapsed",onClick:function(){return e.refs.navbarCollapseMain.classList.toggle("in")}},a.default.createElement("span",{className:"sr-only"},"Toggle navigation"),a.default.createElement("span",{className:"icon-bar"}),a.default.createElement("span",{className:"icon-bar"}),a.default.createElement("span",{className:"icon-bar"})),a.default.createElement("a",{className:"navbar-brand",onClick:approuter.dashboard,tabIndex:"2"},a.default.createElement("div",{className:"edlogo"},c?"edclub":"TypingClub"))),a.default.createElement("div",{ref:"navbarCollapseMain",className:"navbar-collapse collapse",onKeyUp:this.OnEsc.bind(this)},a.default.createElement("ul",{className:"nav navbar-nav hidden-xs",role:"menubar","aria-label":"Main Menu"},a.default.createElement("li",null,a.default.createElement("a",{tabIndex:"2",role:"menuitem",onKeyUp:function(e){13==e.keyCode&&approuter.dashboard()}.bind(this),onClick:approuter.dashboard},(0,o.t)("Home"))),a.default.createElement("li",null,a.default.createElement("a",{tabIndex:"3",role:"menuitem",onKeyUp:function(e){13==e.keyCode&&approuter.stats_page()}.bind(this),onClick:approuter.stats_page},(0,o.t)("Stats"))),a.default.createElement("li",null,a.default.createElement("a",{tabIndex:"4",role:"menuitem",onKeyUp:function(e){13==e.keyCode&&this.badges()}.bind(this),onClick:this.badges.bind(this)},(0,o.t)("Badges"))),a.default.createElement("li",{className:"dropdown",style:{maxWidth:300}},a.default.createElement("a",{onClick:function(t){return e.toggle_active_dropdown(t,"lesson-plan-list")},href:"#",className:"dropdown-toggle",tabIndex:"5","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},approuter.program&&approuter.program.name||(0,o.t)("Courses")," ",a.default.createElement("span",{className:"caret"})),"lesson-plan-list"==this.state.active_dropdown?a.default.createElement("ul",{className:"dropdown-menu lesson-plan-list"},t.lessonplans().map((function(t,r){return a.default.createElement("li",{className:approuter.program&&approuter.program.id==t.id?"active":"",key:t.id,"aria-label":(0,o.t)("Lesson {{name}}",{name:t.name})},a.default.createElement("a",{tabIndex:6+r,href:"#",onKeyUp:function(e){13==e.keyCode&&approuter.lesson_plan(t.id)}.bind(e),onClick:function(){return approuter.lesson_plan(t.id)}},a.default.createElement("img",{className:"nav-dropdown-thumbnail",src:"https://static.typingclub.com/m/"+(t.image||"corp2/lessonplan-icons/default.png")}),a.default.createElement("div",{className:"nav-dropdown-content"},a.default.createElement("div",null,t.name))))})),a.default.createElement("li",{"aria-label":(0,o.t)("More lesson plans")},a.default.createElement("a",{tabIndex:6+t.programs.length,onClick:approuter.catalog_page},a.default.createElement("div",{className:"nav-dropdown-content"},a.default.createElement("i",{className:"icon icon-plus"})," ",(0,o.t)("More Lesson Plans"))))):null),approuter.has_scoreboard()&&a.default.createElement("li",null,a.default.createElement("a",{tabIndex:s+6,role:"menuitem",onKeyUp:function(e){13==e.keyCode&&approuter.scoreboard()},onClick:approuter.scoreboard},approuter.is_leaderboard()?(0,o.t)("Leaderboard"):(0,o.t)("Scoreboard")))),r?a.default.createElement("ul",{className:"nav navbar-nav navbar-right m-r-0 hidden-xs",role:"menubar","aria-label":"Account Menu"},l,a.default.createElement(a.default.Fragment,null,a.default.createElement("li",null,a.default.createElement("a",{tabIndex:s+7,role:"menuitem",onClick:approuter.signup_page,onKeyUp:function(e){return"Enter"===e.key&&e.target.click()}},(0,o.t)("Save Progress"))),a.default.createElement("li",null,a.default.createElement("a",{tabIndex:s+8,role:"menuitem",onClick:approuter.login_page,onKeyUp:function(e){return"Enter"===e.key&&e.target.click()}},(0,o.t)("Login"))))):a.default.createElement("ul",{className:"nav navbar-nav navbar-right m-r-0 hidden-xs",role:"menubar","aria-label":"Account Menu","aria-haspopup":"true"},!1,l,a.default.createElement("li",{className:"dropdown"},a.default.createElement("a",{href:"#",onClick:function(t){return e.toggle_active_dropdown(t,"user-settings")},tabIndex:i+s+11+1,role:"menuitem",className:"dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n," ",a.default.createElement("span",{className:"caret"})),"user-settings"==this.state.active_dropdown?a.default.createElement("ul",{className:"dropdown-menu"},a.default.createElement("li",null,a.default.createElement("a",{href:"#",tabIndex:i+s+11+2,role:"menuitem",onClick:this.profileDetails.bind(this)},(0,o.t)("Profile"))),t.can_change_password&&a.default.createElement("li",null,a.default.createElement("a",{href:"#",tabIndex:i+s+11+3,onClick:this.changePassword.bind(this)},(0,o.t)("Change Password"))),a.default.createElement("li",{onClick:approuter.student_billing},a.default.createElement("a",{tabIndex:i+s+11+4},(0,o.t)("Billing"))),a.default.createElement("li",null,a.default.createElement("a",{href:"#",tabIndex:i+s+11+6,role:"menuitem",onClick:function(){return approuter.logout()}},(0,o.t)("Logout")))):null))))))}},{key:"OnEsc",value:function(e){27==e.keyCode&&this.state.active_dropdown&&this.setState({active_dropdown:null})}},{key:"OnFocus",value:function(e){if(13==e.keyCode){var t=document.getElementById("article");if(t)t.focus(),t.tabIndex=100;else{var r=document.querySelector('[tabIndex="100"]');r&&r.focus()}document.getElementsByClassName("jumpNav")[0].tabIndex=1}}},{key:"badges",value:function(){approuter.badges_page()}},{key:"profileDetails",value:function(){approuter.edit_profile()}},{key:"changePassword",value:function(){approuter.edit_password()}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.default.Component);t.default=h},57023:(e,t,r)=>{r(30489),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(67294)),a=s(r(94184)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(95343));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(p,e);var t,r,i,s=f(p);function p(){return u(this,p),s.apply(this,arguments)}return t=p,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.profile,i=t.idkfa,s=n.default.createElement("div",null);r.is_anonymous||(s=n.default.createElement("div",{className:"htext profile-name"},r.fname));var u=(0,a.default)({hdrlt:!0,compact:this.props.compact,game:"game"==this.props.display,video:"video"==this.props.display,videotyping:"videotyping"==this.props.display,spelling:"spelling"==this.props.display});return n.default.createElement("div",{className:u+" "+(this.props.theme||"")},n.default.createElement("div",{className:"pull-left",style:{whiteSpace:"nowrap"}},n.default.createElement("div",{tabIndex:"1",role:"menuitem","aria-label":approuter.lesson?(0,o.t)("exit lesson"):(0,o.t)("go to dashboard"),className:"menu-btn",onClick:approuter.exit_lesson,onKeyDown:function(e){13==e.keyCode&&approuter.exit_lesson()}},n.default.createElement("div",{className:"nav-icon"},n.default.createElement("span",null),n.default.createElement("span",null),n.default.createElement("span",null))),n.default.createElement("div",{className:"htext lesson-title"},this.props.name)),n.default.createElement("div",{className:"pull-right",tabIndex:-1,style:{pointerEvents:"auto"}},s),n.default.createElement("div",{className:"container"},n.default.createElement("span",{className:"header-options"},i&&n.default.createElement("div",{className:"header-item",onClick:function(){e.wait_on_idkfa||(e.wait_on_idkfa=!0,i())}},n.default.createElement("span",{className:"edicon-flash"})),this.props.children)))}}])&&l(t.prototype,r),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.default.Component);t.default=h},65489:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.default.load({google:{families:["Courgette::latin"]}}),n.default.createElement(a.default,{style:"NOT_FOUND_PAGE",header:null,title:"Page not found"},n.default.createElement("i",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#daecee"}}),n.default.createElement("div",{id:"container"},n.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/cloud.png",id:"cloud",alt:""}),n.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/ground.png",id:"ground",alt:""}),n.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/buddy.png",id:"buddy",alt:""}),n.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/rain.png",id:"rain",alt:""}),n.default.createElement("div",{id:"ground_box",style:{height:window.outerHeight-490}}),n.default.createElement("div",{id:"text_cont"},n.default.createElement("p",{className:"head",style:{fontSize:"1.7em",margin:"20px 0 10px"}},"404. Page Not Found"),n.default.createElement("p",{className:"head",style:{marginBottom:18}},"This page does not exist. That's all we know."),n.default.createElement("p",{className:"cont"},"Consider going back to the",n.default.createElement("a",{href:"javascript:history.back()",className:"go_back"}," ","previous page")," ","or ",n.default.createElement("a",{href:"http://www.typingclub.com"},"TypingClub's home page")))))};var n=i(r(67294)),a=i(r(24508)),o=i(r(75933));function i(e){return e&&e.__esModule?e:{default:e}}},45211:(e,t,r)=>{r(82772),Object.defineProperty(t,"__esModule",{value:!0}),t.stripe_settings=t.CURRENCY=void 0;var n={logo:"https://s3.amazonaws.com/stripe-uploads/acct_0JXUFO1w3ddkg89GMUEXmerchant-icon-1472074894921-Logo.jpg",stripe_account_name:"EdClub, Inc.",stripe_currency:"USD",getStripeKey:function(){return~window.location.host.indexOf("staging1234.com")?"pk_0JXULDYyo7wYVfacIcwe4mGCUENz8":"pk_0JXUTMAQR2Zlnm5PN56Bbel5Vq9Ht"},instruction:"You won't be charged until trial ends."};t.stripe_settings=n;t.CURRENCY={USD:"$",EUR:"€",JPY:"¥",MXN:"MX$",CNY:"CN¥"}},78294:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(65069),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(67294)),a=o(r(11248));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(p,e);var t,r,o,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return d(f(e=c.call.apply(c,[this].concat(r))),"animRef",n.default.createRef()),e}return t=p,(r=[{key:"componentDidMount",value:function(){var e=this,t={container:this.animRef.current,renderer:"svg",loop:this.props.loop||!1,autoplay:!1};this.props.animData?t.animationData=this.props.animData:t.path=this.props.animPath,this.anim=a.default.loadAnimation(t),this.props.speed&&this.anim.setSpeed(this.props.speed),this.animateDelay=setTimeout((function(){return e.anim.play()}),this.props.delay||0)}},{key:"componentWillUnmount",value:function(){this.anim.destroy(),clearTimeout(this.animateDelay)}},{key:"componentWillReceiveProps",value:function(e){e.paused?this.anim&&this.anim.pause():e.reverse?(this.anim.setDirection(-1),this.anim.play()):(this.anim.setDirection(1),this.anim.play())}},{key:"render",value:function(){var e=this,t=this.props.uiReplay;return n.default.createElement("div",{className:t?"anim-with-replay":"",style:this.props.style||{}},n.default.createElement("div",{style:this.props.svgTransform?{transform:this.props.svgTransform}:this.props.svgStyle||null,ref:this.animRef}),this.props.uiReplay&&n.default.createElement("i",{className:"edicon-refresh",onClick:function(){return e.anim.goToAndPlay(0)}}))}}])&&s(t.prototype,r),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.default.Component);t.default=m},95842:(e,t,r)=>{r(30489),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(67294)),a=r(66358),o=i(r(33805));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d=function(){return n.default.createElement("svg",{className:"incorrect-svg",viewBox:"0 0 34.15 34.15",style:{height:25,marginBottom:-5}},n.default.createElement("path",{className:"svg-path",d:"M32,25.17a5.25,5.25,0,0,1,0,4,5.41,5.41,0,0,1-1.14,1.7,5.26,5.26,0,0,1-7.41,0l-6.39-6.4-6.4,6.4A5.28,5.28,0,0,1,7,32.42,5.1,5.1,0,0,1,5,32a5,5,0,0,1-1.7-1.13,5.18,5.18,0,0,1-1.14-1.71,5.23,5.23,0,0,1,1.14-5.71l6.39-6.39-6.39-6.4A5.23,5.23,0,0,1,1.73,7,5.23,5.23,0,0,1,3.27,3.27,5.19,5.19,0,0,1,5,2.13a5.23,5.23,0,0,1,5.71,1.14l6.4,6.4,6.39-6.4A5.25,5.25,0,0,1,32,5a5.23,5.23,0,0,1,0,4,5.29,5.29,0,0,1-1.14,1.7l-6.39,6.4,6.39,6.39A5.29,5.29,0,0,1,32,25.17Z"}))},h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(p,e);var t,r,i,f=c(p);function p(){return s(this,p),f.apply(this,arguments)}return t=p,(r=[{key:"componentDidMount",value:function(){a.gsap.to(this.refs.root,{duration:.5,opacity:1,bottom:0,ease:"power2"})}},{key:"render",value:function(){var e=this.props,t=e.type,r=e.msg;return n.default.createElement("div",{ref:"root",className:"bottom-feedback-bar "+t},n.default.createElement("i",{className:"shadow"}),n.default.createElement("div",{style:{position:"relative"}},"correct"==t&&n.default.createElement(o.default,null),"wrong"==t&&n.default.createElement(d,null),r))}}])&&u(t.prototype,r),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.default.Component);t.default=h},33805:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(67294))&&n.__esModule?n:{default:n};var o=function(){return a.default.createElement("svg",{className:"checkmark-svg",viewBox:"64 90 35 48"},a.default.createElement("polyline",{style:{fill:"none",stroke:"#fff",strokeWidth:9,strokeLinecap:"round",strokeLinejoin:"round"},points:"68.55 112.84 75.86 120.15 94 103.77"}))};t.default=o},34153:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(82772),r(66992),r(69600),r(21249),r(96078),r(9653),r(41539),r(54678),r(74916),r(39714),r(78783),r(23123),r(33948),r(60285),Object.defineProperty(t,"__esModule",{value:!0}),t.ResultsPanel=void 0;var n=g(r(67294)),a=g(r(69606)),o=g(r(11248)),i=r(66358),s=g(r(96026)),u=g(r(75933)),l=r(45112),c=r(95343),f=r(33946),p=g(r(42644)),d=g(r(78294)),h=g(r(38452)),m=g(r(95842)),y=g(r(36727)),v=g(r(47920));function g(e){return e&&e.__esModule?e:{default:e}}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}function k(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var a=P(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function C(e,t,r){return(t=N(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function T(e){return new URL("".concat("https://static.typingclub.com/m/","fonts/").concat(e),window.location).toString()}y.default.vfs=v.default.pdfMake.vfs,y.default.fonts={Raleway:{normal:T("Raleway-Regular.ttf"),bold:T("Raleway-Bold.ttf"),italics:T("Raleway-Italic.ttf"),bolditalics:T("Raleway-Bold.ttf")},GothamNarrow:{normal:"Gotham-Narrow-Regular.ttf",bold:"Gotham-Narrow-Bold.ttf",italics:"Gotham-Narrow-Italics.ttf"},Roboto:{bold:"Roboto-Bold.ttf",normal:"Roboto-Regular.ttf",italics:"Roboto-Italic.ttf"}};var R=function(e){x(r,e);var t=O(r);function r(){var e;b(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return C(S(e=t.call.apply(t,[this].concat(a))),"starCount",e.props.starCount||120),e}return k(r,[{key:"componentDidMount",value:function(){for(var e=this.refs.canvas.childNodes,t=i.gsap.timeline({delay:this.props.delay}),r=0;r<e.length;r++){var n=.2*Math.random(),a=.5+.7*Math.random();t.to(e[r],{duration:a/4,scale:1.2+.2*Math.random(),opacity:.25*Math.random()+.75,x:-2,y:-10,ease:"power1.in"},n),t.to(e[r],{duration:a/2+.7*Math.random(),scale:.9,opacity:0,ease:"power1"},n+a/2),t.to(e[r],{duration:a,y:40*-Math.random()-30,x:20*Math.random()*(Math.random()>.5?-1:1),ease:"slow(0.1, 0.1)"},n)}}},{key:"shouldComponentUpdate",value:function(e){return!1}},{key:"render",value:function(){var e="0.000 9.000 11.756 16.180 8.560 2.781 19.021 -6.180 5.290 -7.281 0.000 -20.000 -5.290 -7.281 -19.021 -6.180 -8.560 2.781 -11.756 16.180 0.000 9.000".split(" ").map(parseFloat);return n.default.createElement("svg",{ref:"canvas",viewBox:"-20 -20 720 220",style:this.props.style||{}},(0,s.default)(this.starCount).map((function(t){var r=700*Math.random(),a=200*Math.random(),o=Math.max(.15,1.3*Math.random()-.7);return n.default.createElement("g",{key:t,style:{opacity:0}},n.default.createElement("path",{d:"M "+e.map((function(e,t){return(0==t||t%2?"":"L ")+(e*o+(t%2?a:r))})).join(" "),fill:"#FFF"}))})))}}]),r}(n.default.Component),M=function(e){x(r,e);var t=O(r);function r(){return b(this,r),t.apply(this,arguments)}return k(r,[{key:"componentDidMount",value:function(){var e=this;(0,a.default)(this.refs.root).fadeIn((function(){return e.refs.badgeText.focus()})),this.keyHandlerId=approuter.keymanager.register((function(t){return~[h.default.enter,h.default.space,h.default.escape].indexOf(t.which)&&e.next(),!0}))}},{key:"componentWillUnmount",value:function(){approuter.keymanager.unregister(this.keyHandlerId)}},{key:"next",value:function(e){var t=this;(0,a.default)(this.refs.nextBtn).hide(),(0,a.default)(this.refs.badgeBox).removeClass("animated bounceIn"),(0,a.default)(this.refs.badgeBox).addClass("animated bounceOut"),setTimeout((function(){return(0,a.default)(t.refs.root).fadeOut()}),800),setTimeout((function(){return t.props.onNext()}),900)}},{key:"render",value:function(){var e=this.props,t=e.badge;e.onNext;return n.default.createElement("div",{ref:"root",style:{dispaly:"none",position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0}},n.default.createElement("div",{className:"RESPG"},n.default.createElement("div",{className:"badgebg animated bounceIn"},n.default.createElement("div",{ref:"badgeBox",className:"badge_box hoja"},n.default.createElement("img",{style:{width:245,margin:"17px 0 0"},src:"https://static.typingclub.com/m/badges/"+t.graphic_active}))),n.default.createElement("div",{ref:"badgeText",className:"badge_text",tabIndex:100,"aria-label":(0,c.t)("Congratulations! you have earned the following badge: ")+(0,c.t)(t.name)+", "+(0,c.t)(t.description)},n.default.createElement("div",{className:"badge_text_title"},(0,c.t)(t.name)),n.default.createElement("div",{className:"badge_text_txt"},(0,c.t)(t.description)),n.default.createElement("div",{className:"new_badge",style:{top:-430,position:"absolute"}},(0,c.t)("New Badge")),n.default.createElement("input",{ref:"nextBtn",tabIndex:101,type:"button",className:"next_btn",value:(0,c.t)("Continue")+" »",onClick:this.next.bind(this)}))))}}]),r}(n.default.Component),A=function(e){x(r,e);var t=O(r);function r(){var e;b(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return C(S(e=t.call.apply(t,[this].concat(a))),"state",{showDetails:!1,showingBadgeIndex:0,showSaveProgress:!1,progressSaved:!1,showPdf:!1,pdfDataUrl:null}),C(S(e),"ref_stars",[]),C(S(e),"lesson",approuter.lesson||{}),e}return k(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props.attempt;if(!t.error){if(i.gsap.to(".spelling-results-panel .animated-bg",{duration:1.5,marginBottom:"-150vw",marginLeft:"-100vw",width:"300vw",height:"300vw",opacity:1,onComplete:function(){var t=(0,a.default)(".animated-bg").css("background-color");(0,a.default)(".spelling-results-panel").css("background",t),(0,a.default)(".spelling-results-panel .animated-bg").hide(),e.setState({showPdf:!0})}}),i.gsap.to(".spelling-results-panel .canvas",{duration:.45,opacity:1,delay:.5}),!this.lesson.is_test&&t.has_performance_goals){if(this.props.toggleNavbar(!1),!this.props.onQuizTab){this.admanager=(0,f.plug_ads)([{id:"adslot_results1",parent:(0,a.default)(this.refs.root)},{id:"adslot_results2",parent:(0,a.default)(this.refs.root)}],(function(){return approuter.paid_feature((function(){return e.admanager.destroySlots()}),null,"ResultPage")}))}a.default.getJSON("https://static.typingclub.com/m/anims/result-star/star.json",{},(function(e){for(var r=[],n=0;n<t.stars;n++)r.push(o.default.loadAnimation({container:document.getElementById("star-"+n),renderer:"svg",loop:!1,autoplay:!1,animationData:e}));for(var a=function(e){i.gsap.delayedCall(.25*e,(function(){return r[e].playSegments([[0,32]],!0)}))},s=0;s<r.length;s++)a(s);if(t.max_score==t.score)for(var u=function(e){i.gsap.delayedCall(1.9,(function(){return r[e].playSegments([[32,80]],!0)}))},l=0;l<r.length;l++)u(l)}));var r={val:0},n=t.score;this.countUp=i.gsap.to(r,{duration:t.stars*(this.props.starDelay||.35),delay:.5,val:n,roundProps:"val",onUpdate:function(){return e.refs.score.innerHTML=r.val},onComplete:function(){var r,n,a=.2;t.score==t.max_score&&(a+=1.1);var o="typing"===(null===(r=t.lesson)||void 0===r?void 0:r.lesson_type);n=e.admanager&&o?function(){e.props.toggleNavbar(!0),i.gsap.to(e.refs.stars,{duration:1,ease:"power4",y:.4*-e.props.contentHeight,scale:.6}),i.gsap.to(e.ref_stars[2],{duration:1,ease:"power4",marginTop:-33}),i.gsap.to([e.ref_stars[1],e.ref_stars[3]],{duration:1,ease:"power4",margin:"-12px 0 0"}),i.gsap.to([e.ref_stars[0],e.ref_stars[4]],{duration:1,ease:"power4",margin:"40px 0 0"}),i.gsap.to(e.refs.score,{duration:1,ease:"power4",scale:.8,y:o?34:-66}),o&&i.gsap.to(e.refs.yourScore,{duration:.5,margin:0,opacity:0}),i.gsap.fromTo(e.refs.scoreDetails,{opacity:0,y:-e.props.contentHeight-10},{duration:.7,delay:.4,opacity:1,y:-e.props.contentHeight,scale:.9})}:function(){e.props.toggleNavbar(!0),i.gsap.to(e.refs.stars,{duration:.75,scale:1.3,ease:"power4.in"}),i.gsap.to(e.refs.canvas,{duration:1,ease:"power4",delay:.3,y:.4*-e.props.contentHeight}),i.gsap.to(e.refs.scoreDetails,{duration:.7,delay:.7,opacity:1})},i.gsap.delayedCall(a,(function(){e.setState({showDetails:!0}),e.tryShowDetails(n)}))}})}else if(this.props.resultContent){var s=function(){i.gsap.to(e.refs.canvas,{duration:.7,ease:"power4",y:-e.props.contentHeight/2}),i.gsap.to(e.refs.goodJobLine,{duration:.7,ease:"power4",delay:.2,maxWidth:700}),i.gsap.to(e.refs.scoreDetails,{duration:.5,ease:"power4",delay:.4,opacity:1})};i.gsap.delayedCall(2.5,(function(){e.setState({showDetails:!0}),e.tryShowDetails(s)}))}else if(t.print){y.default.createPdf(t.print).getDataUrl((function(t){e.setState({pdfDataUrl:t}),i.gsap.to(".results-print-view",{opacity:1,duration:1,delay:1.5})}))}u.default.load({google:{families:["Montserrat: 400,700"]},custom:{families:["Akrobat-Bold","GothamRounded-Bold"],urls:["https://static.typingclub.com/m/corp2/css/font-akrobat.css","https://static.typingclub.com/m/corp2/css/font-gotham-rounded.css"]},classes:!1}),this.refs.audioResult&&this.refs.audioResult.focus(),(0,a.default)("body").addClass("body-on-results"),this.admanager||(this.keyHandlerId=approuter.keymanager.register((function(t){if(t.ctrlKey){var r=e.props.attempt;return"h"==t.key&&approuter.exit_lesson(),"r"!=t.key||r.no_redo||approuter.redo_lesson(),"f"==t.key&&r.next_lesson_url&&approuter.next_lesson(),!0}})))}}},{key:"componentWillUnmount",value:function(){this._unmounted=!0,this.countUp&&this.countUp.kill(),(0,a.default)("body").removeClass("scrollable-body-on-results"),(0,a.default)("body").removeClass("body-on-results"),this.keyHandlerId&&approuter.keymanager.unregister(this.keyHandlerId),i.gsap.globalTimeline.clear()}},{key:"tryShowDetails",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this._unmounted){this.afterBadgesCallback=this.afterBadgesCallback||e;var r=this.props.attempt.badges;(!r||t>=r.length)&&(this.refs.audioResult.focus(),this.setState({showSaveProgress:!0}),this.afterBadgesCallback(),(0,a.default)("body").addClass("scrollable-body-on-results"))}}},{key:"launchSaveWork",value:function(){var e=this;approuter.show_modal(n.default.createElement(p.default,{show_x:!0,id:"save-progress-modal",width:650},n.default.createElement(l.SignupWithValidEmailView,{profile:approuter.profile,onSuccess:function(){e.setState({progressSaved:!0}),approuter.hide_modal("save-progress-modal",!0)}})))}},{key:"render",value:function(){var e=this,t=this.props.attempt;if(t.error)return n.default.createElement("div",{className:"spelling-results-panel"},n.default.createElement("h1",null,"Error encountered while submitting attempt: ",t.error,"."));var r,a=function(){return n.default.createElement("svg",{className:"star-footprint",style:{width:80,height:80},viewBox:"0 0 438.11 421.06"},n.default.createElement("path",{className:"bg",d:"M332.07,297.6l4.74-26.29.25.08a29.81,29.81,0,0,1,8.71-17.58l57.79-56.32a27.9,27.9,0,0,0-22-17l-80-11.62a28.39,28.39,0,0,1-21.35-15.52L244.49,80.92c-10.41-21.08-40.46-21.08-50.86,0L157.85,153.4a28.37,28.37,0,0,1-21.35,15.52l-80,11.62a27.9,27.9,0,0,0-22,17l57.79,56.32a29.87,29.87,0,0,1,8.49,15.88h0l5.87,30.71c0,.21.09.43.13.64l0,.21h0a28,28,0,0,1,0,9.18L93.41,388.7a29.69,29.69,0,0,0,36.44,6.87L205.17,356A29.86,29.86,0,0,1,233,356l75.31,39.6a29.71,29.71,0,0,0,36.45-6.87l-13.43-78.27a28.14,28.14,0,0,1-.34-6.53h0v0A27.51,27.51,0,0,1,332.07,297.6Z"}),n.default.createElement("path",{className:"shadow",d:"M93.41,388.7l13.42-78.27a28,28,0,0,0,0-9.18h0l0-.21c0-.22-.09-.43-.13-.64l-5.87-30.71h0a29.89,29.89,0,0,1,.09,10.55L86.54,364.1a29.57,29.57,0,0,0,14.23,30.73A30.5,30.5,0,0,1,93.41,388.7Z"}),n.default.createElement("path",{className:"shadow",d:"M56.51,180.54l80-11.62a28.37,28.37,0,0,0,21.35-15.52l35.78-72.48c10.4-21.08,40.45-21.08,50.86,0l35.77,72.48a28.39,28.39,0,0,0,21.35,15.52l80,11.62a27.9,27.9,0,0,1,22,17l-36.51,35.59,39.65-38.66c17.72-17.27,7.94-47.36-16.54-50.91L306,131.27a29.84,29.84,0,0,1-22.48-16.33l-37.66-76.3c-10.95-22.19-42.58-22.19-53.53,0l-37.66,76.3a29.84,29.84,0,0,1-22.47,16.33L48,143.51c-24.48,3.55-34.26,33.64-16.54,50.91l3.14,3.07A27.9,27.9,0,0,1,56.51,180.54Z"}),n.default.createElement("path",{className:"shadow",d:"M336.81,271.31l-4.74,26.29a27.51,27.51,0,0,0-1.12,6.25v0h0a28.14,28.14,0,0,0,.34,6.53l13.43,78.27a30.55,30.55,0,0,1-7.37,6.13,29.57,29.57,0,0,0,14.23-30.73l-14.38-83.86a29.54,29.54,0,0,1-.13-8.85Z"}),n.default.createElement("path",{className:"outline",d:"M219.06,22a29.5,29.5,0,0,1,26.76,16.64L283.48,115A29.86,29.86,0,0,0,306,131.27l84.21,12.24c24.48,3.56,34.26,33.64,16.54,50.91l-3.14,3.06-36.51,35.59-21.28,20.74a30.28,30.28,0,0,0-8.58,26.42l14.38,83.87a29.25,29.25,0,0,1-6.87,24.6h0c-.16.2-.34.39-.52.58s-.29.31-.43.46l-.68.69-.47.44s0,.06-.07.07l0,0-.43.4-.87.75-.51.4-.35.28-.28.2-.64.47-.22.15-.39.27-.3.2-.25.16c-.05.05-.11.07-.16.12a29.39,29.39,0,0,1-29.82,1.18L232.94,356a29.92,29.92,0,0,0-27.78,0l-75.31,39.59A29.36,29.36,0,0,1,100,394.33l-.22-.14c-.07-.05-.15-.09-.22-.15l-.35-.23c-.15-.1-.29-.19-.43-.3l-.26-.19a.18.18,0,0,1-.07-.05l-.36-.26-.17-.13-.11-.07-.12-.1-.1-.08-.63-.5-.08-.07-.64-.55-.21-.19c-.16-.13-.32-.29-.48-.44s0,0-.06-.05l-.4-.38h0c-.07-.07-.13-.15-.2-.21l-.5-.51a.71.71,0,0,0-.13-.12,2,2,0,0,0-.14-.16l-.14-.15-.38-.42-.15-.18a29.26,29.26,0,0,1-6.86-24.59l14.38-83.87a30,30,0,0,0-8.58-26.42L34.55,197.48l-3.14-3.06C13.69,177.15,23.47,147.07,48,143.51l84.2-12.24A29.85,29.85,0,0,0,154.63,115l37.66-76.31A29.51,29.51,0,0,1,219.06,22m0-13a42.58,42.58,0,0,0-38.42,23.88L143,109.19a16.86,16.86,0,0,1-12.7,9.22L46.08,130.64a42.85,42.85,0,0,0-23.74,73.09l3.14,3.07,57.79,56.32a16.76,16.76,0,0,1,4.77,9,16.32,16.32,0,0,1,.07,5.95L73.73,361.9a42.45,42.45,0,0,0,9.81,35.26l.21.25.47.53.15.19.1.09,0,0,.51.52,0,0,.61.62.16.16,0,0,.18.18.17.16,0,0,.28.27.35.32.32.29.43.39.71.61.58.48,0,0,.16.17.53.4.2.16.14.09.09.07.29.22.45.32.07.05.39.28.52.37.53.35.41.29.3.17a42.37,42.37,0,0,0,42.86,1.74l75.31-39.59a16.89,16.89,0,0,1,15.68,0l75.32,39.59a42.39,42.39,0,0,0,42.84-1.72l.6-.38.06-.05.36-.24.59-.41.29-.2.05,0,.05,0,.11-.09c.26-.18.51-.36.75-.55l.08-.06c.27-.19.49-.36.66-.5l.79-.63c.43-.36.83-.7,1.22-1.06l.38-.33c.25-.22.49-.44.72-.67l.1-.11.1-.09.05,0,0,0c.37-.35.73-.72,1.09-1.09l.05-.06.05-.05,0,0,.45-.48c.22-.23.52-.55.84-.94a42.44,42.44,0,0,0,9.81-35.28L350,278a17.26,17.26,0,0,1,4.84-14.92l21.28-20.74,36.51-35.59,3.14-3A42.86,42.86,0,0,0,392,130.64l-84.21-12.23a16.86,16.86,0,0,1-12.68-9.22L257.48,32.88A42.59,42.59,0,0,0,219.06,9Z"}))},o=["0 5px 0","-20px 5px 0","-33px 10px 0","-20px 5px 0","0 5px 0"];t.badges&&this.state.showingBadgeIndex<t.badges.length&&(r=t.badges[this.state.showingBadgeIndex]);var i="";if(!this.lesson.is_test&&t.has_performance_goals)0==this.state.showingBadgeIndex&&(i=(0,c.t)("Lesson finished. ")),i+=r?(0,c.t)("Computing your score."):(0,c.t)("You have earned {{number_stars}} stars, Your score is {{score}}",{number_stars:t.stars,score:t.score});else{var u=[(0,c.t)("Nice job"),(0,c.t)("Excellent work"),(0,c.t)("Good job"),(0,c.t)("Good work"),(0,c.t)("Well done")];i=u[Math.floor(Math.random()*u.length)]}return n.default.createElement("div",{ref:"root",className:"spelling-results-panel"},n.default.createElement("i",{className:"animated-bg"}),!t.print||t.has_performance_goals||this.props.resultContent?n.default.createElement("div",{ref:"canvas",className:"canvas",style:{width:800}},n.default.createElement("div",{ref:"audioResult",tabIndex:2,style:{outline:"none",height:240,marginBottom:-220,marginTop:-20,color:"transparent"}},i),!this.lesson.is_test&&t.has_performance_goals?n.default.createElement("div",{className:"stars-box",style:{padding:"0 0 50px"}},"Edge"===binfo.browser&&t.score==t.max_score&&n.default.createElement("div",{style:{position:"absolute",height:240,left:0,top:"-8vh",width:"100%"}},n.default.createElement(R,{key:this.state.showStarParticles||0,delay:this.state.showStarParticles?0:3.1,style:{width:740,height:240}})),n.default.createElement("div",{ref:"stars",style:{position:"relative",height:120,paddingTop:40,transform:"scale(1.3)"}},n.default.createElement("div",{style:{pointerEvents:"none",height:150,whiteSpace:"nowrap"}},(0,s.default)(5).map((function(t){return n.default.createElement("div",{ref:function(r){return e.ref_stars[t]=r},key:t,style:{margin:o[t],display:"inline-block",verticalAlign:"top",width:80,height:170,position:"relative"}},n.default.createElement(a,null),n.default.createElement("div",{id:"star-"+t,style:{position:"absolute",top:-2,left:-3,marginTop:-28,marginLeft:-26,display:"inline-block",width:140,height:140}}))})))),n.default.createElement("p",{ref:"yourScore",style:{height:0,margin:"10px 0 4px",textTransform:"uppercase"}},(0,c.t)("Your Score")),n.default.createElement("div",{ref:"score",onClick:function(){return e.setState({showStarParticles:(e.state.showStarParticles||0)+1})},style:{transformOrigin:"bottom",transform:"translateY(20px)",fontFamily:"Akrobat-Bold",fontSize:"5em",lineHeight:1}},"0"),this.state.showDetails&&!r&&t.is_high_score&&n.default.createElement("div",{className:"new-highscore"},n.default.createElement(d.default,{animPath:"https://static.typingclub.com/m/anims/new-highscore.json"}),n.default.createElement("label",null,(0,c.t)("New Highscore")))):n.default.createElement("div",null,n.default.createElement("div",{style:{height:"40vh",width:"40vh",margin:"auto"}},n.default.createElement(d.default,{animPath:"https://static.typingclub.com/m/anims/checkmark.json"})),n.default.createElement("div",{style:{fontWeight:700,fontSize:"1.7em",paddingTop:10,transform:"translateY(-40px)"}},!this.lesson.is_test&&(0,c.t)("Good job").toUpperCase()+"!"),n.default.createElement("hr",{ref:"goodJobLine",style:{margin:"25px auto",maxWidth:0}})),n.default.createElement("div",{ref:"scoreDetails",style:{height:0,opacity:0,textAlign:"center",position:"relative"}},this.state.showDetails&&!r&&this.props.resultContent&&n.default.createElement(this.props.resultContent,{onExplain:this.props.onExplain,attempt:t,with_ads:null!=this.admanager}))):this.state.pdfDataUrl?n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"results-print-view"},n.default.createElement("iframe",{style:{visibility:this.state.showPdf?"inherit":"hidden"},src:this.state.pdfDataUrl+"#toolbar=0&view=FitV"})),this.state.showPdf&&n.default.createElement("div",{className:"download-pdf-right-panel"},n.default.createElement("div",{className:"download-pdf-button",onClick:function(){y.default.createPdf(t.print).download("".concat(approuter.lesson.name,".pdf"))}},n.default.createElement(D,null),n.default.createElement("div",null,n.default.createElement(I,null)," Download")))):n.default.createElement("div",null),this.state.showDetails&&r&&n.default.createElement(M,{key:this.state.showingBadgeIndex,badge:r,t:this.props.t,onNext:function(){var t=e.state.showingBadgeIndex+1;e.setState({showingBadgeIndex:t}),e.tryShowDetails(null,t)}}),this.state.showSaveProgress&&approuter.profile.is_anonymous&&approuter.lesson.index>10&&n.default.createElement(m.default,{type:"save-progress"+(this.state.progressSaved?" progress-saved":""),msg:n.default.createElement("div",null,this.state.progressSaved?n.default.createElement("small",{style:{paddingRight:20}},(0,c.t)("Profile created. Your progress is saved.")):n.default.createElement(n.default.Fragment,null,n.default.createElement("small",null,(0,c.t)("You have not yet saved your progress.")),n.default.createElement("button",{className:"btn btn-link",style:{margin:"0 20px"},onClick:function(t){return e.launchSaveWork()}},(0,c.t)("Save my work"))),n.default.createElement("i",{className:"close-message",onClick:function(){return e.setState({showSaveProgress:!1})}},"×"))}))}}]),r}(n.default.Component);t.ResultsPanel=A;var D=function(e){return n.default.createElement("svg",_({width:80,height:80,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n.default.createElement("path",{stroke:"none",d:"M24.252 44.938a2.16 2.16 0 0 0-1.54.65 2.24 2.24 0 0 0-.639 1.568v8.875c0 .589.23 1.153.639 1.57.408.415.962.649 1.54.649a2.16 2.16 0 0 0 1.54-.65 2.24 2.24 0 0 0 .64-1.569v-.736h1.45a5.04 5.04 0 0 0 3.596-1.517 5.227 5.227 0 0 0 1.49-3.662c0-1.373-.536-2.69-1.49-3.662a5.04 5.04 0 0 0-3.596-1.517h-3.63Zm3.63 5.92h-1.45v-1.483h1.45c.193 0 .378.078.515.217a.748.748 0 0 1 0 1.048.722.722 0 0 1-.515.217Zm20.338-3.706c.001-.588.231-1.151.64-1.566a2.16 2.16 0 0 1 1.539-.648h4.353a2.16 2.16 0 0 1 1.54.65c.41.416.64.98.64 1.568a2.24 2.24 0 0 1-.64 1.57 2.16 2.16 0 0 1-1.54.649h-2.179v1.487h2.18a2.16 2.16 0 0 1 1.54.65c.409.416.638.98.638 1.568a2.24 2.24 0 0 1-.638 1.57 2.16 2.16 0 0 1-1.54.65h-2.18l.005.727a2.257 2.257 0 0 1-.635 1.57 2.16 2.16 0 0 1-1.54.653 2.16 2.16 0 0 1-1.542-.647c-.41-.415-.64-.979-.641-1.567v-8.884Zm-10.903-2.215a2.16 2.16 0 0 0-1.54.65 2.24 2.24 0 0 0-.64 1.57v8.874c0 .589.23 1.153.64 1.57.408.415.962.649 1.54.649h2.187a6.478 6.478 0 0 0 4.623-1.95 6.719 6.719 0 0 0 1.914-4.706 6.719 6.719 0 0 0-1.914-4.707 6.478 6.478 0 0 0-4.623-1.95h-2.187Zm2.179 8.876v-4.438h.008a2.16 2.16 0 0 1 1.541.65c.409.416.638.98.638 1.569a2.24 2.24 0 0 1-.638 1.569 2.16 2.16 0 0 1-1.54.65h-.01ZM13.358 13.874c0-2.354.918-4.611 2.553-6.276A8.637 8.637 0 0 1 22.073 5h19.98c.86 0 1.71.173 2.503.508a6.53 6.53 0 0 1 2.121 1.444l17.056 17.369a6.719 6.719 0 0 1 1.918 4.704v7.401a6.55 6.55 0 0 1 3.153 2.435A6.74 6.74 0 0 1 70 42.7v17.763a6.74 6.74 0 0 1-1.196 3.84 6.551 6.551 0 0 1-3.153 2.435v.386a8.958 8.958 0 0 1-2.553 6.276A8.637 8.637 0 0 1 56.935 76H22.073a8.637 8.637 0 0 1-6.162-2.6 8.958 8.958 0 0 1-2.553-6.275v-.386a6.55 6.55 0 0 1-3.157-2.43A6.74 6.74 0 0 1 9 60.468V42.705a6.74 6.74 0 0 1 1.198-3.845 6.55 6.55 0 0 1 3.16-2.434V13.875Zm47.935 17.75H46.041a6.478 6.478 0 0 1-4.622-1.95 6.718 6.718 0 0 1-1.915-4.706V9.437h-17.43a4.318 4.318 0 0 0-3.082 1.3 4.48 4.48 0 0 0-1.277 3.138v22.17h43.578v-4.42ZM17.715 67.121c0 .583.112 1.16.331 1.7.219.538.54 1.028.944 1.44.405.413.886.74 1.415.963a4.29 4.29 0 0 0 1.668.338h34.862a4.29 4.29 0 0 0 1.67-.338 4.354 4.354 0 0 0 1.413-.963c.405-.412.726-.902.945-1.44a4.507 4.507 0 0 0 .33-1.7H17.715Zm26.147-56.765V24.97c0 .588.23 1.152.638 1.569.409.416.963.65 1.541.65h14.35L43.862 10.355ZM15.537 40.482a2.16 2.16 0 0 0-1.541.65 2.24 2.24 0 0 0-.638 1.569v17.763c0 .589.23 1.153.638 1.57.409.415.963.65 1.54.65H63.46a2.16 2.16 0 0 0 1.54-.65 2.24 2.24 0 0 0 .639-1.57V42.701A2.24 2.24 0 0 0 65 41.132a2.16 2.16 0 0 0-1.541-.65H15.537Z"}))},I=function(e){return n.default.createElement("svg",_({width:22,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n.default.createElement("path",{d:"M2.333 19.667h17.334M11 13.167V2.333m0 10.834 4.334-4.334M11 13.167 6.667 8.833",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"}))}},6678:(e,t,r)=>{r(69826),r(41539),r(88674),r(35666),r(64967);var n=c(r(95343)),a=l(r(33563)),o=r(65477),i=r(56657),s=l(r(58200));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){f(o,n,a,i,s,"next",e)}function s(e){f(o,n,a,i,s,"throw",e)}i(void 0)}))}}function d(){return d=p(regeneratorRuntime.mark((function e(){var t,r,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:window.document.location.pathname,r=u.length>1&&void 0!==u[1]&&u[1],e.next=4,n.default.init(a);case 4:s.getFreshSession().then((function(){(0,o.start)(document.getElementById("main"),i.resolveAppRoute,i.url_routes,r?null:function(e){return e.goto_window_url(t)})}));case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}(0,c(r(86071)).default)(window),s.registerSignOutHandler((function(){approuter.events.fire_event("logout"),approuter.team=null,approuter.program=null,approuter.lesson=null,approuter.profile=null})),s.registerStudentLoginHandler(function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:approuter.dashboard();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s.registerOnLogin(function(){var e=p(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return approuter.profile=null,approuter.program&&(r=approuter.program.id),approuter.lesson&&(n=approuter.lesson.id),approuter.program=null,approuter.game=null,e.next=7,approuter.refresh_profile();case 7:if(!r){e.next=11;break}return e.next=10,approuter.refresh_program(r);case 10:approuter.refresh_game();case 11:return n&&(approuter.lesson=approuter.program.lessons.find((function(e){return e.id===n}))),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.start=function(){return d.apply(this,arguments)};try{initSentry(sentryDSN)}catch(e){console.error("initSentry failed: ",e)}},13379:(e,t,r)=>{r(21249),r(56977),r(30489),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=r(95343),o=r(10662),i=(n=r(67294))&&n.__esModule?n:{default:n},s=r(45211);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(d,e);var t,r,n,p=f(d);function d(){return u(this,d),p.apply(this,arguments)}return t=d,(r=[{key:"render",value:function(){var e=this.props.payments,t=e.map((function(e,t){var r;r=1==e.paid?i.default.createElement("i",{className:"icon icon-check"}):e.failure_code+" - "+e.failure_message,1==e.refunded&&(r=i.default.createElement("strong",null,"Refunded - $",e.refunded_amount/100));var n=s.CURRENCY[e.currency?e.currency:"USD"];return i.default.createElement("tr",{key:t},i.default.createElement("th",{scope:"row"},t+1),i.default.createElement("td",null,n+(e.amount/100).toFixed(2)),i.default.createElement("td",null,"Free Edition"==e.plan?"Premium Edition":e.plan),i.default.createElement("td",null,r),i.default.createElement("td",null,i.default.createElement("div",null,"**********",e.card_last4),i.default.createElement("div",null,"Exp: ",e.card_exp_month,"/",e.card_exp_year)),i.default.createElement("td",null,(0,o.formatDate)(new Date(e.created),"short")),i.default.createElement("td",{style:{wordBreak:"break-word"}},e.stripe_reference))}));return i.default.createElement("div",null,i.default.createElement("h2",{className:"payment-head"},(0,a.t)("Payments")),e.length>0?i.default.createElement("table",{className:"table table-sm"},i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("th",null,"#"),i.default.createElement("th",null,(0,a.t)("Amount")),i.default.createElement("th",null,(0,a.t)("Description")),i.default.createElement("th",null,(0,a.t)("Status")),i.default.createElement("th",null,(0,a.t)("Card")),i.default.createElement("th",null,(0,a.t)("Date")),i.default.createElement("th",null,(0,a.t)("Reference")))),i.default.createElement("tbody",null,t)):i.default.createElement("div",{className:"well"},(0,a.t)("There are no payment records.")))}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.default.Component);t.default=h},3445:(e,t,r)=>{r(30489),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(67294))&&n.__esModule?n:{default:n},o=r(95343);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,c=l(f);function f(){return i(this,f),c.apply(this,arguments)}return t=f,(r=[{key:"render",value:function(){var e=approuter.profile,t=this.props.active;return a.default.createElement("div",{className:"ed-paper"},a.default.createElement("h4",null,e.fname?e.fname:"Me"),a.default.createElement("ul",{className:"nav nav-pills nav-stacked"},a.default.createElement("li",{onClick:this.profileDetails.bind(this),className:"profile"==t?"active":""},a.default.createElement("a",{href:"#"},(0,o.t)("Profile"))),e.can_change_password&&a.default.createElement("li",{onClick:this.changePassword.bind(this),className:"change_password"==t?"active":""},a.default.createElement("a",{href:"#"},(0,o.t)("Change Password"))),a.default.createElement("li",{onClick:this.billing.bind(this),className:"billing"==t?"active":""},a.default.createElement("a",null,(0,o.t)("Billing")))))}},{key:"profileDetails",value:function(){approuter.edit_profile()}},{key:"changePassword",value:function(){approuter.edit_password()}},{key:"billing",value:function(){approuter.student_billing()}},{key:"plans",value:function(){approuter.student_plans()}},{key:"deleteAccount",value:function(){}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.default.Component);t.default=p},33660:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={generic_decline:"common::payments||cardErrors||generic_decline",insufficient_funds:"common::payments||cardErrors||insufficient_funds",lost_card:"common::payments||cardErrors||lost_card",stolen_card:"common::payments||cardErrors||stolen_card",expired_card:"common::payments||cardErrors||expired_card",incorrect_cvc:"common::payments||cardErrors||incorrect_cvc",processing_error:"common::payments||cardErrors||processing_error",incorrect_number:"common::payments||cardErrors||incorrect_number"};t.default=r},45112:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(69826),r(21249),r(96078),r(9653),r(41539),r(91058),Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchStudentPlansModal=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dialogView";0;var n=approuter.profile;r=n.email?r:r+"-signup",n.email?approuter.show_modal(o.default.createElement(c.default,{id:"upsell-modal",width:450,onClose:function(){return t&&t()}},o.default.createElement(q,{where:r,profile:n,type:"modal",onSubscribe:e}))):approuter.show_modal(o.default.createElement(c.default,{show_x:!0,id:"billing-signup-modal",width:650,onClose:function(){return t&&t()}},o.default.createElement(W,{profile:n,onSuccess:function(){approuter.hide_modal("billing-signup-modal",!0),approuter.show_modal(o.default.createElement(c.default,{id:"upsell-modal",width:450,onClose:function(){return t&&t()}},o.default.createElement(q,{profile:approuter.profile,where:r,type:"modal",onSubscribe:e})))}})))},t.StudentPlansPage=t.SignupWithValidEmailView=void 0;var n=v(r(75564)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(71327)),o=v(r(67294)),i=v(r(72052)),s=v(r(3445)),u=v(r(13379)),l=r(45211),c=v(r(42644)),f=v(r(94184)),p=r(95343),d=r(52058),h=v(r(41609)),m=v(r(33660));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function v(e){return e&&e.__esModule?e:{default:e}}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function x(e,t,r){return t&&k(e.prototype,t),r&&k(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var a=C(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function N(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var R={greencheck:{width:50,marginRight:15,marginTop:15},i:{color:"white",fontSize:"94px"}},M={iconTitle:{textAlign:"center",margin:"5px 0 5px",fontSize:14}},A=1,D=2,I=4,L=0,B={padding:"10px 0px",width:350,fontSize:18},U={modal:{cl1:" ",cl2:" ",cl3:"  ",cl4:"col-md-10 col-md-offset-1"},body:{cl1:"container content-top",cl2:"row",cl3:"col-md-8",cl4:"col-md-6 col-md-offset-3"}},z={backgroundColor:"#e44626",color:"white",padding:"0px 13px",marginLeft:"5px",fontWeight:"bold",backgroundImage:"url(https://static.typingclub.com/m//corp2/img/tp_paid/sale_left.png), url(https://static.typingclub.com/m//corp2/img/tp_paid/sale_right.png)",backgroundPosition:"left, right",backgroundRepeat:"no-repeat, no-repeat",backgroundSize:"contain, contain"},q=function(e){j(r,e);var t=E(r);function r(e){var n;return w(this,r),N(P(n=t.call(this,e)),"state",{active_plan:0,is_upgraded:!1,is_changed:!1,is_canceled:!1,is_payment_updated:!1,old_subscription:null,show_cancel:!1,show_change:!1,action:L,selected:0,available_plans:[],exp:null,notice:{}}),n.onToken=n.onToken.bind(P(n)),n.onChangePlanRadio=n.onChangePlanRadio.bind(P(n)),n}return x(r,[{key:"componentWillMount",value:function(){var e=this;void 0!==this.props.upgraded&&this.setState({is_upgraded:!0}),n.default.getTpPlans().then((function(t){e.setState({available_plans:t.objects}),n.default.getUserSubscription((function(r){r?e.setState({selected:r.plan,active_plan:r.plan,old_subscription:r,exp:r.plan_expiration}):t.objects[1]&&t.objects[1].id&&e.setState({selected:t.objects[1].id})}))}))}},{key:"checkEmail",value:function(){var e=this;this.props.profile.email||approuter.show_modal(o.default.createElement(c.default,{show_x:!0,id:"billing-signup-modal-p",width:650,onClose:function(){e.forceUpdate()}},o.default.createElement(W,{profile:this.props.profile,onSuccess:function(){approuter.hide_modal("billing-signup-modal-p",!0),approuter.refresh()}.bind(this)})))}},{key:"onToken",value:function(e){e=e||{},this.state.show_change?this.setState({show_change:!1,action:D}):this.setState({show_change:!1,action:I}),this.createUserSubscription(this.state.selected,e),approuter.profile.is_basic&&(approuter.profile.is_basic=!1),this.props.onSubscribe&&this.props.onSubscribe(this.state.selected)}},{key:"createUserSubscription",value:function(e,t){this.setState({is_loading:!0}),n.default.createUserSubscription({plan:e,token:t,locale:this.props.profile.locale},function(e){var t={subscription:e.subscription_id,did_upgrade:e.upgraded_subscription,is_loading:!1};switch(this.state.action){case I:t.is_upgraded=!0;break;case A:t.is_canceled=!0;break;case D:t.is_changed=!0}this.setState(t)}.bind(this),function(e,t,r){var n=e.responseJSON||{},a=r;n.error&&n.error.key&&(a="server_error"===n.error.key?(0,p.t)("common::errors||serverError"):m.default[n.error.key]?(0,p.t)(m.default[n.error.key]):(0,p.t)("common::payments||cardErrors||generic_decline")),approuter.profile.is_basic=!0,this.setState(b(b({},this.state),{},{is_loading:!1})),this.showNotice("danger",(0,p.t)("common::payments||updatePaymentMethodErrorTitle",{message:a}))}.bind(this))}},{key:"render_success",value:function(){var e=o.default.createElement("div",null,o.default.createElement("h1",{style:{fontSize:36,color:"#555",marginTop:30}},(0,p.t)("Successful")),o.default.createElement("div",{className:"text-success",role:"alert",style:{marginBottom:15}},(0,p.t)("Your Premium subscription is now active.")),o.default.createElement("p",null,"Thank you for subscribing to TypingClub Premium Edition. You can now enjoy your favorite typing program with the Premium features & completely ad-free."));return this.render_message(e)}},{key:"render_cancel",value:function(){var e=o.default.createElement("div",null,o.default.createElement("h1",{style:{fontSize:36,color:"#555",marginTop:30}},(0,p.t)("Successful")),o.default.createElement("div",{className:"text-success",role:"alert",style:{marginBottom:15}},(0,p.t)("Your subscription has been successfully canceled.")),o.default.createElement("p",null,(0,p.t)("We will miss you! You can activate your plan again from the billing section of your portal at anytime.")," ",o.default.createElement("a",{onClick:approuter.student_billing},(0,p.t)("Go to billing section"))));return this.render_message(e)}},{key:"render_change",value:function(){var e=this.findPlanById(this.state.selected).description,t=o.default.createElement("div",null,o.default.createElement("h1",{style:{fontSize:36,color:"#555",marginTop:30}},(0,p.t)("Successful")," "),o.default.createElement("div",{className:"text-success",role:"alert",style:{marginBottom:15}},(0,p.t)("Your plan has changed.")),o.default.createElement("p",null,(0,p.t)("Your plan successfully changed to {{desc}}. You can change or cancel your Premium subscription at anytime.",{desc:e})));return this.render_message(t)}},{key:"render_message",value:function(e,t){return o.default.createElement("div",{className:U[this.props.type].cl1},o.default.createElement("div",{className:U[this.props.type].cl2},o.default.createElement("div",{className:U[this.props.type].cl3},o.default.createElement("div",{className:"body"==this.props.type?"ed-paper":""},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-2"},t?"":o.default.createElement("div",{style:R.greencheck},o.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/checkmark.svg"}))),o.default.createElement("div",{className:"body"==this.props.type?"col-md-10":"col-md-8"},e,"modal"==this.props.type?o.default.createElement("button",{className:"btn btn-primary pull-right",onClick:function(){window.location.reload()}},"Close"):o.default.createElement("a",{className:"btn btn-primary pull-right",onClick:approuter.dashboard},(0,p.t)("Continue to TypingClub")))))),"modal"!=this.props.type?o.default.createElement("div",{className:"col-md-4"},o.default.createElement(s.default,{active:"billing"})):null))}},{key:"handleCloseCancel",value:function(){this.setState({show_cancel:!1})}},{key:"cancelSubscriptionAlert",value:function(){this.setState({show_cancel:!0})}},{key:"handleCloseUpgrade",value:function(){this.setState({show_change:!1})}},{key:"onChangeAlert",value:function(){0!=this.state.selected?this.setState({show_change:!0}):this.cancelSubscriptionAlert()}},{key:"handleDelete",value:function(){var e=this;this.setState(b(b({},this.state),{},{is_loading:!0})),n.default.cancelUserSubscription({action:A},(function(t){t.deleted?(e.handleCloseCancel(),e.setState({is_canceled:!0,is_loading:!1})):e.setState(b(b({},e.state),{},{is_loading:!1}))}))}},{key:"onEmail",value:function(e){this.props.profile.email=e,this.forceUpdate()}},{key:"onChangePlanRadio",value:function(e){this.setState({selected:e.currentTarget.value})}},{key:"onLicenseKey",value:function(e){approuter.license_key_app()}},{key:"findPlanById",value:function(e){return this.state.available_plans.find((function(t){return t.id==e}))}},{key:"clearNotice",value:function(){this.setState(b(b({},this.state),{},{notice:{}}))}},{key:"showNotice",value:function(e,t){this.setState(b(b({},this.state),{},{notice:{type:e,text:t}}))}},{key:"render",value:function(){var e,t=this;if(!this.state.available_plans.length)return null;if((0,h.default)(this.state.notice)||(e=o.default.createElement("div",{className:"alert alert-"+this.state.notice.type,role:"alert",style:{marginBottom:"20px"}},o.default.createElement("button",{type:"button",className:"close",onClick:this.clearNotice.bind(this)},"×"),this.state.notice.text)),this.state.is_upgraded)return this.render_success();if(this.state.is_changed)return this.render_change();if(this.state.is_canceled)return this.render_cancel();var r,n=this.state.old_subscription,a=this.props.profile,d="modal"==this.props.type,m=this.state.is_loading,y=!!(this.state.exp&&Date.parse(this.state.exp)<new Date),v={email:a.email,image:l.stripe_settings.logo,name:l.stripe_settings.stripe_account_name,currency:this.findPlanById(this.state.selected).currency,stripeKey:l.stripe_settings.getStripeKey()};a.email||d?null==n||!n.is_active&&"unpaid"!=n.status&&"past_due"!=n.status?r=o.default.createElement(i.default,g({token:this.onToken,description:l.stripe_settings.instruction,panelLabel:"Free Trial, then",amount:this.state.available_plans.length>0?this.findPlanById(this.state.selected).amount:0},v),o.default.createElement("button",{ref:function(e){return t.inputElement=e},disabled:0==this.state.selected,className:"btn btn-primary",style:b(b({},B),{},{fontSize:"1em"})},(0,p.t)("Start Your 3-Day Free Trial"))):(n.is_active||"unpaid"==n.status||"past_due"==n.status)&&(r=o.default.createElement("button",{disabled:this.state.selected==n.plan,className:"btn btn-primary",style:B,onClick:this.onChangeAlert.bind(this)},(0,p.t)("Change Plan"))):r=o.default.createElement("button",{onClick:function(){this.checkEmail()}.bind(this),disabled:0==this.state.selected,className:"btn btn-primary",style:B},(0,p.t)("Start Your 3-Day Free Trial"));this.findPlanById(0);return m?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{style:{width:d?420:"100%",height:d?"75%":"100%",position:"absolute",zIndex:1e3,display:m?"block":"none",background:" url('https://static.typingclub.com/m//tp/loading.gif') no-repeat center center",backgroundColor:"rgba(255,255,255,0.5)"}}," "),o.default.createElement("div",{className:U[this.props.type].cl1,ref:"modal_root","data-backdrop":"static"},o.default.createElement("div",{className:U[this.props.type].cl2},o.default.createElement("div",{className:U[this.props.type].cl3},"modal"==this.props.type&&o.default.createElement("div",null,o.default.createElement("h2",{style:{marginTop:0}},(0,p.t)("Premium Edition")),o.default.createElement("hr",null)),o.default.createElement("div",{className:"body"==this.props.type?"ed-paper":""},"body"==this.props.type&&o.default.createElement("h2",{style:{margin:"0 0 30px 0"}},"Premium Edition",n&&n.is_active?null:o.default.createElement("button",{className:"btn btn-default pull-right",onClick:this.onLicenseKey.bind(this)},(0,p.t)("Enter License Key"))),o.default.createElement("h4",{style:{margin:"0 0 30px 0",fontSize:16}},0!=this.state.active_plan&&n.is_active&&!y?o.default.createElement("span",null,(0,p.t)("You are currently using the {{plan_name}}",{plan_name:""}),o.default.createElement("strong",{className:"text-primary"}," ",this.findPlanById(parseInt(n.plan)).description,". ")):o.default.createElement("span",null,(0,p.t)("You are currently using the free edition.")+" "),n&&n.is_active?(0,p.t)(" You can change your current plan, or go back to basic right here."):(0,p.t)(" Upgrade your plan to take advantage of TypingClub Premium features. Start your 3-day free trial today, you can cancel anytime from your profile.")),o.default.createElement("div",{style:{marginLeft:50,fontSize:16,fontFamily:"Roboto"}},this.state.available_plans.map(function(e,t){return 0==this.state.active_plan&&0==e.id?null:o.default.createElement("label",{key:e.id,className:"radio",style:{marginTop:20,cursor:"pointer",display:"grid",gridTemplateColumns:"13px auto",gap:"25px"}},o.default.createElement("input",{style:{margin:"0",position:"relative",width:"13px"},type:"radio",name:"plan",checked:this.state.selected==e.id,onChange:this.onChangePlanRadio,value:e.id}),o.default.createElement("div",{className:"text-container"},o.default.createElement("div",null,o.default.createElement("strong",null,0==e.id?(0,p.t)("Free Plan"):e.description),0==this.state.active_plan&&null!=e.formated_regular_price?o.default.createElement("span",null,o.default.createElement("span",{style:z},null!=e.sale_tag?e.sale_tag:(0,p.t)("SALE"))):null),o.default.createElement("div",null,0==this.state.active_plan&&null!=e.formated_regular_price?o.default.createElement("span",{style:{marginRight:"10px"}},o.default.createElement("strike",{style:{fontSize:"0.9em"}},o.default.createElement("strong",null,e.formated_regular_price))):"","Annually"==e.period?o.default.createElement("span",null,o.default.createElement("strong",{className:"text-primary",style:null!=e.formated_regular_price?{color:z.backgroundColor}:null},e.formated_price_per_month)," ",(0,p.t)("per month")," (",(0,p.t)("billed annually")," ",e.formated_price,")"):o.default.createElement("span",null,o.default.createElement("strong",{className:"text-primary",style:null!=e.formated_regular_price?{color:z.backgroundColor}:null},e.formated_price)," ",(0,p.t)("per month"))),0==this.state.active_plan&&null!=e.marketing_message_line1&&o.default.createElement("div",{style:{fontSize:"0.9em"}},e.marketing_message_line1),0==this.state.active_plan&&null!=e.marketing_message_line2&&o.default.createElement("div",{style:{fontSize:"0.9em"}},e.marketing_message_line2)))}.bind(this))),o.default.createElement("div",{className:"clearfix",style:{margin:"30px 0",textAlign:"center"}},e,r,n&&n.is_active?null:o.default.createElement("div",{style:{marginTop:5}},(0,p.t)("Your credit card will not be charged during the trial"))),o.default.createElement("hr",null),!d&&o.default.createElement("h4",{style:{margin:"15px 0 15px 0",fontSize:16}},(0,p.t)("As a Premium subscriber you can enjoy TypingClub ad-free, and gain access to exclusive features including"),":"),o.default.createElement("div",{className:"row billing-sect"},o.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,f.default)({"col-md-2":!d,"col-md-4":d,"hint--top-right":!0,"hint--yel":!0}),"aria-label":(0,p.t)("Use the program 100% ad-free. This will also increase the speed and performance of the program.")},o.default.createElement("div",{className:"img"},o.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/ad.svg"})),o.default.createElement("h5",{style:M.iconTitle},(0,p.t)("Ad Free"))),o.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,f.default)({"col-md-2":!d,"col-md-4":d,"hint--top":!0,"hint--yel":!0}),"aria-label":(0,p.t)("Includes two additional engaging games in the lesson plan. Both games are fun and challenging.")},o.default.createElement("div",{className:"img"},o.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/game.svg"})),o.default.createElement("h5",{style:M.iconTitle},(0,p.t)("More Games"))),o.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,f.default)({"col-md-2":!d,"col-md-4":d,"hint--top-left":!0,"hint--yel":!0}),"aria-label":(0,p.t)("This immersive experience guides you through a series of animated stories, while you are typing them.")},o.default.createElement("div",{className:"img"},o.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/videotyping.svg"})),o.default.createElement("h5",{style:M.iconTitle},(0,p.t)("Story Typing"))),o.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,f.default)({"col-md-2":!d,"col-md-4":d,"hint--top-right":!0,"hint--yel":!0}),"aria-label":(0,p.t)("Get access to more advanced reports that will help identify problem areas, and give more visibility to your typing progress.")},o.default.createElement("div",{className:"img"},o.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/reports.svg"})),o.default.createElement("h5",{style:M.iconTitle},(0,p.t)("More Reports"))),o.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,f.default)({"col-md-2":!d,"col-md-4":d,"hint--top":!0,"hint--yel":!0}),"aria-label":(0,p.t)("Your typing activities are recorded and can be played back at a later time to help assess the fluency of your typing.")},o.default.createElement("div",{className:"img"},o.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/playback.svg"})),o.default.createElement("h5",{style:M.iconTitle},(0,p.t)("Replay Attempts"))),o.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,f.default)({"col-md-2":!d,"col-md-4":d,"hint--top-left":!0,"hint--yel":!0}),"aria-label":(0,p.t)("Get access to more exciting new themes in your typing interface.")},o.default.createElement("div",{className:"img"},o.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/skins.svg"})),o.default.createElement("h5",{style:M.iconTitle},(0,p.t)("More Themes")))),n&&n.payments&&"modal"!=this.props.type&&o.default.createElement("div",null,o.default.createElement("hr",null),o.default.createElement(u.default,{payments:n.payments})))),"modal"!=this.props.type?o.default.createElement("div",{className:"col-md-4"},o.default.createElement(s.default,{active:"billing"})):null),o.default.createElement("div",{style:{display:this.state.show_cancel?"block":"none"}},o.default.createElement(c.default,{id:"cnl_sub",show_x:"false",width:500,onClose:this.handleCloseCancel.bind(this)},o.default.createElement("h3",{style:{marginTop:11,marginBottom:22}},(0,p.t)("Cancel Subscription")),o.default.createElement("p",null,(0,p.t)("You are about to cancel your {{plan}} subscription. Your account will remain on the Premium Edition for the rest of your billing period, but you will not be charged again. Are you sure you want to continue?",{plan:this.findPlanById(this.state.active_plan).description})," "),o.default.createElement("button",{className:"btn btn-default col-md-5 pull-left",onClick:this.handleCloseCancel.bind(this)},(0,p.t)("No, Thanks")),o.default.createElement("button",{className:"btn btn-primary col-md-5 pull-right",style:{marginLeft:10},onClick:this.handleDelete.bind(this)},(0,p.t)("Yes")))),o.default.createElement("div",{style:{display:this.state.show_change?"block":"none"}},o.default.createElement(c.default,{style:{marginTop:11,marginBottom:22},id:"chg_sub",show_x:"false",width:500,onClose:this.handleCloseUpgrade.bind(this)},o.default.createElement("h3",null,(0,p.t)("Change Plan")),o.default.createElement("p",null,(0,p.t)("Would you like to change your subscription to {{plan}}?",{plan:this.findPlanById(this.state.selected).description})),o.default.createElement("button",{className:"btn btn-default col-md-5 pull-left",onClick:this.handleCloseUpgrade.bind(this)},(0,p.t)("No, Thanks")),o.default.createElement("button",{className:"btn btn-primary col-md-5 pull-right",style:{marginLeft:10},onClick:function(){return t.onToken()}},"Yes")))))}}]),r}(o.default.Component);t.StudentPlansPage=q;var W=function(e){j(r,e);var t=E(r);function r(){var e;w(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return N(P(e=t.call.apply(t,[this].concat(a))),"state",{notice:null,oauths:null}),e}return x(r,[{key:"componentDidMount",value:function(){var e=this;n.default.getSchoolAccount("www",(function(t){delete t.oauths.clever,e.setState({oauths:t.oauths})})),this.keyHandlerId=approuter.keymanager.register((function(e){return!0}))}},{key:"componentWillUnmount",value:function(){approuter.keymanager.unregister(this.keyHandlerId)}},{key:"form_submit",value:function(e){e.preventDefault(),this.update_profile()}},{key:"clearNotice",value:function(){this.setState({notice:{}})}},{key:"showNotice",value:function(e,t){this.setState({notice:{type:e,text:t}})}},{key:"update_profile",value:function(){var e=this.props.profile,t=Boolean(e.fname),r=this.refs.email.value;if(!a.validateEmail(r))return this.showNotice("danger",(0,p.t)("Please provide a valid email"));if(t)approuter.update_profile({email:r}).then(this.props.onSuccess).catch(this.handle_error.bind(this));else{var n=this.refs.fname.value,o=this.refs.lname.value,i=this.refs.password.value;if(!n)return this.showNotice("danger",(0,p.t)("Please provide a valid first name"));if(!o)return this.showNotice("danger",(0,p.t)("Please provide a valid last name"));if(!i)return this.showNotice("danger",(0,p.t)("Please provide a password"));approuter.update_profile({fname:n,lname:o,password:i,email:r}).then(this.props.onSuccess).catch(this.handle_error.bind(this))}this.setState({disable_action:!0})}},{key:"handle_error",value:function(e,t){var r=e.responseJSON.student;for(var n in r){this.showNotice("danger",r[n][0]);break}this.setState({disable_action:!1})}},{key:"handle_oauth",value:function(){approuter.apply_env(approuter.current_app),this.props.onSuccess()}},{key:"render",value:function(){var e,t=this,r=this.props.profile,n=this.state;if((0,h.default)(n.notice)||(e=o.default.createElement("div",{style:{margin:"auto -20px"},className:"alert alert-"+n.notice.type,role:"alert"},o.default.createElement("button",{type:"button",className:"close",onClick:this.clearNotice.bind(this)},"×"),n.notice.text)),n.loading)return o.default.createElement("div",{style:{textAlign:"center"}},o.default.createElement("h3",{style:{textAlign:"center",padding:"10px 0 150px"}},"Checking Profile..."),o.default.createElement("div",{className:"boxLoading boxLoading-dark"}));var a=Boolean(r.fname);return o.default.createElement("div",null,o.default.createElement("h2",{style:{marginTop:0}},a?(0,p.t)("Update your profile email"):(0,p.t)("Create a profile to continue")),o.default.createElement("div",{style:{display:"inline-block",verticalAlign:"top",height:200,width:260,marginRight:55,position:"relative"}},n.oauths&&(0,d.listInOauthOptions)(n.oauths,!0,this.handle_oauth.bind(this),this.handle_error.bind(this),(function(e){return t.setState({loading:e})})),o.default.createElement("h3",{style:{position:"absolute",right:-80,top:"50%",color:"#aaa",background:"white",padding:10}},"OR")),o.default.createElement("form",{className:"form-horizontal",onSubmit:this.form_submit.bind(this),style:{width:250,paddingLeft:50,display:"inline-block",borderLeft:"solid 1px #ddd"}},e,!a&&o.default.createElement("div",{className:"form-group"},o.default.createElement("label",{htmlFor:"fname",className:"control-label"},(0,p.t)("First Name")),o.default.createElement("input",{type:"text",ref:"fname",className:"form-control",id:"fname",placeholder:(0,p.t)("First Name")})),!a&&o.default.createElement("div",{className:"form-group"},o.default.createElement("label",{htmlFor:"lname",className:"control-label"},(0,p.t)("Last Name")),o.default.createElement("input",{type:"text",ref:"lname",className:"form-control",id:"lname",placeholder:(0,p.t)("Last Name")})),o.default.createElement("div",{className:"form-group"},o.default.createElement("label",{htmlFor:"email",className:"control-label"},(0,p.t)("Email")),o.default.createElement("input",{type:"text",ref:"email",className:"form-control",id:"email",placeholder:(0,p.t)("email")})),!a&&o.default.createElement("div",{className:"form-group"},o.default.createElement("label",{htmlFor:"password"},(0,p.t)("Password")),o.default.createElement("input",{type:"password",ref:"password",className:"form-control",id:"password",placeholder:(0,p.t)("Password")})),o.default.createElement("div",{className:"form-group"},o.default.createElement("button",{type:"submit",disabled:n.disable_action,className:"btn btn-lg btn-primary"},(0,p.t)("Save & Proceed")))))}}]),r}(o.default.Component);t.SignupWithValidEmailView=W},41947:(e,t,r)=>{r(6678)},28891:(e,t,r)=>{r(92222),r(21249),r(65069),r(74916),r(23123),r(23157),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=h(r(67294)),a=h(r(10564)),o=p(r(84460)),i=p(r(30381)),s=p(r(88531)),u=p(r(55319)),l=r(66358),c=p(r(75564)),f=r(95343);function p(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=e.today,r=e.attempts,a=e.playback_attempt,o=e.profile;return i.default.locale(o.locale),n.default.createElement("div",{className:"typing-attempt-history stagger-show"},r.map((function(e,r){return n.default.createElement("div",{key:r,className:"details-panel"},n.default.createElement("div",{style:{width:"initial"}},n.default.createElement("label",null,(0,f.t)("When")),n.default.createElement("div",{style:{padding:"10px 20px"}},(0,i.default)(e.created).from(t))),n.default.createElement("div",{style:{width:195}},n.default.createElement("label",null,(0,f.t)("Stars")),n.default.createElement("div",{className:"number-value"},null!=e.stars?n.default.createElement("img",{src:"https://static.typingclub.com/m/STARS/"+e.stars+"-stars.png",style:{width:180}}):null)),n.default.createElement("div",{style:{width:"8%",padding:8}},n.default.createElement("label",null,(0,f.t)("Score")),n.default.createElement("div",{className:"number-value"},e.score)),n.default.createElement("div",{style:{width:"9%",padding:8}},n.default.createElement("label",null,(0,f.t)("Speed")),n.default.createElement("div",{className:"number-value"},e.wpm)),n.default.createElement("div",null,n.default.createElement("label",null,(0,f.t)("Accuracy")),n.default.createElement("div",{className:"number-value"},e.accuracy,"%")),n.default.createElement("div",{style:{width:"13%",padding:8}},n.default.createElement("label",null,(0,f.t)("Real Accuracy")),n.default.createElement("div",{className:"number-value"},e.real_accuracy,"%")),n.default.createElement("div",null,n.default.createElement("label",null,(0,f.t)("Duration")),n.default.createElement("div",{className:"number-value"},e.duration.split(" ")[0])),n.default.createElement("div",null,n.default.createElement("label",null,(0,f.t)("Playback")),n.default.createElement("div",null,n.default.createElement("button",{onClick:function(){return a(e)}},n.default.createElement("i",{className:"icon icon-controller-play"})))))})))},g=function(e){var t=e.profile,r=m((0,n.useState)(null),2),p=r[0],d=r[1],h=m((0,n.useState)(!1),2),y=h[0],g=h[1],_=(0,n.useRef)(null);(0,n.useEffect)((function(){var t=e.attempt;c.default.get("/api/v".concat(c.default.version,"/attempt/").concat(t.id,"/stats/")).then((function(e){t.history=e.lesson_attempts,d(t)}))}),[]),(0,n.useEffect)((function(){if(p&&(l.gsap.to(".stagger-show",{duration:.8,opacity:1,y:0,stagger:.2}),l.gsap.to(".tpmodes>a",{duration:.8,ease:"power2.in",opacity:0,delay:3}),l.gsap.delayedCall(1,(function(){return g(!0)})),p.details.lesson_text)){var e=p.lesson.activity,t=new o.default({lesson_id:p.lesson.id,text:p.details.lesson_text,on_error:e.app&&e.app.startsWith("typing.games")?"block":e.on_error,max_secs:e.max_secs,deletable:p.details.deletable,profile_block_on_errors:p.details.profile_block_on_errors,is_logograms:"logographic"==p.lesson.activity.render_engine,t:f.t});new a.default(_.current,b,t,!0),t.replay_history(p.details.history,!0)}}),[p]);var b=(0,a.get_render_props)("instant"),w=(0,i.default)();if(p)var k=p.history.map((function(e){return t=e.created,r=(0,i.default)(t),w.diff(r,"days")?r.format("MM/DD/Y"):r.format("LT");var t,r})).reverse(),x={chart:{type:"column",height:250},plotOptions:{column:{pointPadding:0,groupPadding:0}},title:"",xAxis:{categories:k},tooltip:{valueSuffix:(0,f.t)("WPM")},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},credits:{enabled:!1},yAxis:{min:0,title:null},series:[{name:(0,f.t)("Speed (WPM)"),data:p.history.map((function(e){return e.wpm})).reverse(),showInLegend:!1,maxPointWidth:50}]},j={title:"",xAxis:{categories:k},chart:{height:250},credits:{enabled:!1},tooltip:{valueSuffix:"%"},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},yAxis:{min:0,max:100,title:null},series:[{name:(0,f.t)("Accuracy"),data:p.history.map((function(e){return e.accuracy})).reverse(),showInLegend:!1}]};var O=function(e){return(0,u.default)(e.id,t)};return n.default.createElement("div",{className:"typing-attempt-details"},n.default.createElement("h3",{className:"stagger-show"},(0,f.t)("Realtime playback").toUpperCase()),n.default.createElement("div",{className:"details-panel stagger-show tpmodes "+b.display_className+" "+b.size},n.default.createElement("div",{className:"typable mono_standard",ref:_}),n.default.createElement("a",{className:"stagger-show",onClick:function(){return O(p)}},n.default.createElement("i",{className:"icon icon-controller-play"}))),p&&n.default.createElement("div",{id:"attempt-progress-sect"},n.default.createElement("div",{style:{display:"flex"}},n.default.createElement("div",{className:"stagger-show",style:{flex:1,marginRight:10}},n.default.createElement("h3",null,(0,f.t)("Speed WPM").toUpperCase())),n.default.createElement("div",{className:"stagger-show",style:{flex:1,marginLeft:10}},n.default.createElement("h3",null,(0,f.t)("Accuracy").toUpperCase()))),n.default.createElement("div",{style:{display:"flex"}},n.default.createElement("div",{className:"stagger-show details-panel",style:{flex:1,marginRight:10,height:302}},y&&n.default.createElement(s.default,{id:"lesson_progress_chart",className:"chart_box",options:x})),n.default.createElement("div",{className:"stagger-show details-panel",style:{flex:1,marginLeft:10,height:302}},y&&n.default.createElement(s.default,{id:"lesson_accuracy_chart",className:"chart_box",options:j}))),n.default.createElement("h3",{className:"stagger-show"},(0,f.t)("Your previous attempts on this lesson:").toUpperCase()),n.default.createElement(v,{profile:t,t:f.t,attempts:p.history,today:w,playback_attempt:O})))};t.default=g},51454:(e,t,r)=>{r(57327),r(91038),r(82772),r(66992),r(69600),r(21249),r(85827),r(65069),r(47042),r(2707),r(40561),r(47941),r(41539),r(26833),r(54678),r(91058),r(88674),r(74916),r(70189),r(78783),r(23123),r(54747),r(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.generate_dynamic_lesson=function(e,t){return h.apply(this,arguments)},r(35666);var n,a=(n=r(75564))&&n.__esModule?n:{default:n};function o(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function s(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,u,"next",e)}function u(e){s(o,n,a,i,u,"throw",e)}i(void 0)}))}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){if(!e)return 0;var t=l(e.split("|"),2),r=t[0],n=t[1];return parseInt(r)+50*parseFloat(n)}function d(e,t){for(var r=0,n=0,a=0;a<t.length-1;a++)e[t[a]]&&e[t[a]][t[a+1]]&&(r+=p(e[t[a]][t[a+1]]),n++);return r/n}function h(){return(h=u(regeneratorRuntime.mark((function e(t,n){var s,u,l,c,f,h,m,y,v,g,_,b,w,k,x,j,O,E,S,P,C,N,T,R,M,A,D,I,L,B,U,z,q,W,F,H,Y,$,K,G,J,V,Z,X,Q,ee,te,re,ne,ae,oe,ie,se,ue,le,ce,fe,pe,de,he,me,ye,ve,ge,_e,be,we,ke,xe,je,Oe,Ee,Se,Pe,Ce,Ne,Te,Re,Me,Ae,De,Ie,Le,Be,Ue,ze,qe;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(e){var t=Math.floor(Math.random()*e.length),r=e[t];return e.length>1&&e.splice(t,1),r},c=t.activity.dynamic_settings||t.activity.text5||{type:"progressive",corpus:""},f=c.type||"progressive",h=null===(s=n.shared)||void 0===s||null===(u=s.corpora)||void 0===u?void 0:u[c.corpus],e.next=6,new Promise((function(e){a.default.getSubjectStats(e,r.g.profile,n.subject_id)}));case 6:if(m=e.sent,"corpus"!==f){e.next=48;break}if(h){e.next=15;break}return e.next=11,fetch("https://static.typingclub.com/m/lpeditor/corpora/famous-quotes-simple.txt");case 11:return y=e.sent,e.next=14,y.text();case 14:h=e.sent;case 15:v=h.split("\n").map((function(e){return{text:e}})),g=i(v);try{for(g.s();!(_=g.n()).done;){(b=_.value).v={},w=b.text.toLowerCase().split("").filter((function(e){return" "===e?"":e})),k=i(w);try{for(k.s();!(x=k.n()).done;)j=x.value,b.v[j]=(b.v[j]||0)+1}catch(e){k.e(e)}finally{k.f()}for(O in b.v)b.v[O]=b.v[O]/w.length}}catch(e){g.e(e)}finally{g.f()}if(E=10*t.activity.goal_wpm,S="",!m.length){e.next=44;break}for(P=m.filter((function(e){return e.subject.id===n.subject_id}))[0],C=P||m[0],N={},T=0;T<C.length;T++)N[C[T].chr]=100/(100*C[T].acc+C[T].wpm);for(Math.sqrt(Object.keys(N).reduce((function(e,t){return e+N[t]*N[t]}),0)),R=function(e){return Object.keys(N).reduce((function(t,r){return t+N[r]*(e[r]||0)}),0)},M=[],A=0;A<E||A<5*E&&M.length<v.length/4;)D=v[Math.floor(Math.random()*v.length)],M.push({text:D.text,score:R(D.v)}),A+=D.text.length;M.sort((function(e,t){return e.score<t.score?1:-1})),I="",L=0;case 33:if(!(S.length<E&&L<M.length)){e.next=42;break}if(B=M[L].text,L++,I!==B){e.next=38;break}return e.abrupt("continue",33);case 38:I=B,S+=(S.length?" ":"")+B,e.next=33;break;case 42:e.next=45;break;case 44:for(;S.length<E;)S+=(S.length?" ":"")+l(v).text;case 45:return t.activity.text1=S,t.activity.dynamic_text_generated=!0,e.abrupt("return");case 48:if(U=[],z={},h){e.next=61;break}return e.next=52,fetch("https://static.typingclub.com/m/lpeditor/corpora/wiki/en-duals.json");case 52:return q=e.sent,e.next=55,q.json();case 55:for(W in h=e.sent,U=h.lowercase.words,z=h.lowercase.duals)z[W]=new Set(z[W]);e.next=68;break;case 61:for(F={},h.toLowerCase().split(/\s/).filter((function(e){return e.length>2&&e.length<12})).forEach((function(e){F[e]||(F[e]=0),F[e]+=1})),(U=Object.keys(F)).sort((function(e,t){return U[e]>U[t]?-1:1})),H=0;H<U.length;H++)for(Y=U[H],$=0;$<Y.length-1;$++)K=Y[$]+Y[$+1],z[K]||(z[K]=new Set),z[K].size<12&&z[K].add(H);if(Object.keys(z).forEach((function(e){return z[e]=o(z[e])})),z.size>100)for(G in z)z[G].size<4&&delete z[G];case 68:if(m.length)J=m[0].duals;else{for(J={},V=Object.keys(z),Z=new Set;Z.size<=10;)Z.add(V[Math.floor(Math.random()*V.length)]);X=i(Z);try{for(X.s();!(Q=X.n()).done;)ee=Q.value,J[ee[1]]||(J[ee[1]]=[]),J[ee[1]][ee[0]]="20|1"}catch(e){X.e(e)}finally{X.f()}}for(oe in te=Object.values(z).map((function(e){return e.length})),re=Math.max.apply(Math,o(te)),ne=Math.min.apply(Math,o(te)),ae={},z)ie=(re-z[oe].length)/(re-ne+1)*.2+1,se=0,J[oe[1]]&&J[oe[1]][oe[0]]&&(se=p(J[oe[1]][oe[0]])/ie),se&&(ae[oe]=se);if(ue=Object.keys(ae).sort((function(e,t){return ae[e]<ae[t]?-1:1})),le=new Set,ue.length>10)for(ue=ue.slice(0,10);le.size<4;)le.add(l(ue));else le=new Set(Object.keys(z).slice(0,5));ce=["ass","cum","dic","fag","fat","fuc","fuk","jap","jiz","pus","wop"],fe="",pe=i(le);try{for(pe.s();!(de=pe.n()).done;){if(he=de.value,me=[],ye=o(z[he]).map((function(e){return U[e]})),(ye=o(ye)).sort((function(e,t){return d(J,e)<d(J,t)?-1:1})),ye=ye.splice(0,6),"duals"===f){for(ve=0;ve<3;ve++)me.push(he);for(ge=0;ge<3;ge++)me.push(l(ye))}else if("words"===f)for(_e=0;_e<4;_e++)me.push(l(ye));else{for(me.push(he+" "+he),be=[],we=0;we<3;we++)be.push(l(ye));for(ke=new Set,xe=0,je=be;xe<je.length;xe++)Oe=je[xe],Ee=Oe.toLowerCase(),(Se=Ee.indexOf(he))>0&&(Pe=Ee.substr(Se-1,3),~ce.indexOf(Pe)||ke.add(Pe));if(ke.size<2){Ce=i(be.reverse());try{for(Ce.s();!(Ne=Ce.n()).done;)Te=Ne.value,Re=Te.toLowerCase(),(Me=Re.indexOf(he))<Re.length-2&&(Ae=Re.substr(Me,3),~ce.indexOf(Ae)||ke.add(Ae))}catch(e){Ce.e(e)}finally{Ce.f()}}(De=Array.from(ke).slice(0,2))&&De.length<2&&De.push(De[0]),Ie=i(De);try{for(Ie.s();!(Le=Ie.n()).done;)Be=Le.value,me.push(Be)}catch(e){Ie.e(e)}finally{Ie.f()}for(Ue=0,ze=be;Ue<ze.length;Ue++)qe=ze[Ue],me.push(qe)}fe+=me.join(" ")+"\n"}}catch(e){pe.e(e)}finally{pe.f()}t.activity.text1=fe,t.activity.dynamic_text_generated=!0;case 82:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},55319:(e,t,r)=>{r(82526),r(41817),r(96649),r(96078),r(9653),r(41539),r(23157),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){n.default.get("/api/v"+n.default.version+"/attemptdetailed/"+e+"/",(function(e){t.is_instructor?n.default.get(e.student,(function(t){P(t,e,r)})):P(t,e,r)}))};var n=g(r(75564)),a=v(r(71327)),o=g(r(42644)),i=g(r(84460)),s=v(r(10564)),u=g(r(94184)),l=(g(r(50056)),g(r(67294))),c=g(r(69606)),f=g(r(30381)),p=r(95343),d=g(r(76945)),h=g(r(60513)),m=g(r(13016));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function g(e){return e&&e.__esModule?e:{default:e}}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var a=O(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function E(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(y,e);var t,r,n,o=k(y);function y(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),t=o.call(this,e),r=j(t),a={sound:!1,is_playing:!1,played_once:!1,plays:0,speed:0,accuracy:100,noText:!1},(n=E(n="state"))in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.render_props=(0,s.get_render_props)(t.props.instant?"instant":"normal"),t}return t=y,(r=[{key:"componentDidMount",value:function(){this.place_typable()}},{key:"componentWillUnmount",value:function(){this.core&&(clearTimeout(this.core.play_next_timeout_id),this.core.end_lesson())}},{key:"place_typable",value:function(){var e=this.props.attempt;if(e.details.lesson_text){var t=e.lesson.activity,r="logographic"==e.details.render_engine,n=this.core=new i.default({lesson_id:e.lesson.id,text:e.details.lesson_text,is_logograms:r,on_error:t.app&&t.app.startsWith("typing.games")?"block":e.details.on_error,profile_block_on_errors:e.details.profile_block_on_errors,max_secs:t.max_secs,deletable:e.details.deletable,t:p.t});r&&(this.render_props.logographic=!0),this.typable=new s.default(this.refs.typable,this.render_props,n,!0),this.keepinview=new d.default(this.typable,this.render_props.line_transition,this.props.instant?20:r?2.5:4),this.soundfx=new h.default(this.core,!this.state.sound),n.events.on("stats_update",function(e){e.wpm>250||this.setState({speed:e.wpm,accuracy:e.accuracy})}.bind(this)),n.events.on("progress",function(e){(0,c.default)(this.refs.progress_percent).css({width:e+"%"})}.bind(this)),n.events.on("end",function(){this.setState({is_playing:!1,played_once:!0})}.bind(this)),this.setState({plays:this.state.plays+1}),this.props.instant&&this.core.replay_history(this.props.attempt.details.history,!0)}else this.setState({noText:!0})}},{key:"set_playbackspeed",value:function(e){this.core.playback_speed=e,this.forceUpdate()}},{key:"set_sound",value:function(e){this.setState({sound:e}),this.soundfx.is_mute=!e}},{key:"play",value:function(){if(!(approuter.profile||this.props.profile).is_instructor&&this.props.profile.is_basic)return approuter.paid_feature(this.play,null,"AttemptPlayback");this.setState({is_playing:!0}),this.state.played_once&&((0,c.default)(this.refs.typable).empty(),this.place_typable()),this.core.replay_history(this.props.attempt.details.history)}},{key:"render",value:function(){var e=this,t=l.default.createElement("div",{style:{cursor:"pointer",fontSize:"2em",right:15,top:0,position:"absolute",zIndex:100},onClick:function(){return approuter.hide_modal("att-playback")}},"×");if(this.state.noText)return l.default.createElement("div",{style:{position:"relative",padding:30,margin:15,textAlign:"right"}},l.default.createElement("h3",{style:{textAlign:"center"}},"This playback is no longer available."),t);var r=this.props.attempt,n=this.render_props,o=this.core,i=o&&this.core.stats,s={display:"inline-block",minWidth:85,lineHeight:1.6},c=this.props.profile,d={core:o,keyboard_schema:c.keyboard,show_keyboard:!0,show_hand:!0,keyboard_layout:c.keyboard_layout,use_hand:c.use_hand,anchoring:!1};return l.default.createElement("div",{style:{position:"relative",overflow:"hidden"}},l.default.createElement("div",{style:{minHeight:350},className:"PLYBK TPCMN row",ref:"root"},this.props.instant?l.default.createElement("div",{className:"col-sm-8 span8"},l.default.createElement("div",{className:"tpmodes "+n.display_className+" "+n.size,style:{transform:"scale(.85)"}},l.default.createElement("div",{className:"typable mono_standard",ref:"typable"}))):l.default.createElement("div",{className:"col-sm-8 span8",style:{position:"relative"}},!this.state.is_playing&&l.default.createElement("div",{style:{background:"radial-gradient(ellipse at center, rgba(0,0,0,0) 0%,rgba(0,0,0,0.10) 100%)",color:"#464646",position:"absolute",textAlign:"center",left:0,right:0,fontSize:180,lineHeight:"305px",zIndex:2,textShadow:"0 0 12px #888",cursor:"pointer",marginLeft:-5},onClick:this.play.bind(this)},l.default.createElement("i",{className:"icon icon-controller-play icon-play"})," "),l.default.createElement("div",{className:"tpmodes "+n.display_className+" "+n.size,style:{height:330,transform:"scale(.85)"}},l.default.createElement("div",{className:"typable mono_standard",ref:"typable"})),l.default.createElement("div",{id:"progress-bar",style:{margin:"-28px 50px -5px 40px"}},l.default.createElement("div",{ref:"progress_percent",id:"progress-percent"},l.default.createElement("div",{ref:"progress_dot",id:"progress-dot",style:{display:"block"}}))),l.default.createElement("div",{style:{position:"relative",margin:"35px 0 -15px",height:280}},this.state.plays&&l.default.createElement(m.default,_({key:this.state.plays},d,{style:{transform:"scale(0.6)",position:"absolute",top:-80,left:-100}})),i&&l.default.createElement("div",{ref:"row",style:{position:"absolute",top:0,right:20,padding:10,background:"rgba(255,255,255,0.85)"}},(0,p.t)("Speed"),l.default.createElement("div",{style:{fontSize:"2em",marginBottom:10}},Math.round(this.state.speed||0),l.default.createElement("sup",null,l.default.createElement("small",null,(0,p.t)("WPM")))),(0,p.t)("Accuracy"),l.default.createElement("div",{style:{fontSize:"2em"}},this.state.accuracy||100,"%")))),l.default.createElement("div",{className:"col-sm-4 span4 hidden-xs",style:{background:"#f2f2f2",fontSize:"1.1em",height:610,padding:"0 40px 0 25px"}},l.default.createElement("div",{style:{minHeight:260}},l.default.createElement("h2",{style:{maxHeight:140,marginTop:30,overflow:"hidden"}},r.lesson.name),!this.props.instant&&l.default.createElement("div",{style:{paddingTop:10,whiteSpace:"nowrap"}},l.default.createElement("label",null,(0,p.t)("Playback Speed")),l.default.createElement("br",null),l.default.createElement("a",{onClick:function(){return e.set_playbackspeed(1)},className:(0,u.default)({btn:!0,"btn-primary":!o||1==o.playback_speed})},"1X"),l.default.createElement("a",{onClick:function(){return e.set_playbackspeed(2)},className:(0,u.default)({btn:!0,"btn-primary":o&&2==o.playback_speed})},"2X"),l.default.createElement("a",{onClick:function(){return e.set_playbackspeed(4)},className:(0,u.default)({btn:!0,"btn-primary":o&&4==o.playback_speed})},"4X"),l.default.createElement("a",{onClick:function(){return e.set_playbackspeed(10)},className:(0,u.default)({btn:!0,"btn-primary":o&&10==o.playback_speed})},"10X"),l.default.createElement("a",{onClick:function(){return e.set_playbackspeed(1e3)},className:(0,u.default)({btn:!0,"btn-primary":o&&1e3==o.playback_speed})},"Max"),l.default.createElement("br",null),l.default.createElement("br",null),l.default.createElement("label",null,(0,p.t)("Playback Sound")),l.default.createElement("br",null),l.default.createElement("a",{onClick:function(){return e.set_sound(!0)},className:(0,u.default)({btn:!0,"btn-primary":this.state.sound})},(0,p.t)("On")),l.default.createElement("a",{onClick:function(){return e.set_sound(!1)},className:(0,u.default)({btn:!0,"btn-primary":!this.state.sound})},(0,p.t)("Off")))),l.default.createElement("hr",{style:{borderColor:"#aaa"}}),l.default.createElement("div",null,l.default.createElement("label",{style:s},(0,p.t)("Speed"),":")," ",r.wpm," ",(0,p.t)("WPM")),l.default.createElement("div",null,l.default.createElement("label",{style:s},(0,p.t)("Duration"),":")," ",f.default.utc(1e3*r.duration).format("HH:mm:ss")),l.default.createElement("div",null,l.default.createElement("label",{style:s},(0,p.t)("Accuracy"),":")," ",r.accuracy,"%"),l.default.createElement("div",null,l.default.createElement("label",{style:s},(0,p.t)("Points"),":")," ",a.intcomma(r.score)),l.default.createElement("div",null,l.default.createElement("label",{style:s},(0,p.t)("Stars"),":")," ",l.default.createElement("img",{src:"https://static.typingclub.com/m/STARS/"+r.stars+"s5.png"}))),t))}}])&&b(t.prototype,r),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),y}(l.default.Component);function P(e,t,r){approuter.show_modal(l.default.createElement(o.default,{id:"att-playback",width:1e3,padding:0,show_x:!1,onClose:function(){return approuter.events.fire_event("unload")}},l.default.createElement(S,{attempt:t,profile:e,instant:r})))}},23291:(e,t,r)=>{r(54678),r(91058),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(69606))&&n.__esModule?n:{default:n};function o(e,t,r,n,a){var o=t.get_typable();this.progress=parseInt(100*this.char_index/parseFloat(o.text_length)),this.id=r,this.index=n,this.char_dict=e,this.chr=e.chr,this.display_chr=a,this.dirty=!1,this.facts=t.facts,this.stats={valid:!1,dur:0,real_valid:!0},this.get_token=function(){return t},this.get_typable=function(){return o}}o.prototype.next=function(){var e=this.get_token();return this.id+1==e.length?e.next()?e.next().chars[0]:null:e.chars[this.id+1]},o.prototype.prev=function(){var e=this.get_token();if(0==this.id){var t=e.prev();return!!t&&t.chars[t.length-1]}return e.chars[this.id-1]},o.prototype.setPosition=function(e,t,r,n){this.left=t,this.top=e,this.width=n,this.token_left=r},o.prototype.focus=function(e){var t,r={1465:15,1473:35,1612:1,1614:1,1615:1,1616:1,1617:1},n=this.get_typable(),a=n.render_props,o=n.facts,i={width:this.width-o.char_margin_left-o.char_margin_right};"vertical_cursor"==a.cursor.className?(t=this.top+o.char_margin_top-7,a.is_cursive&&(t+=2),i.height=o.chr_h_with_lh+16):t=this.top+o.char_margin_top,i.marginTop=t;var s=this.get_token();if(a.is_rtl){var u=s.left,l=s.dom.offsetWidth,c=this.left-u;if(i.marginRight=o.offsetWidth-(this.left-c+l-c)+o.char_margin_right,this.width>0){var f=!1,p=s.dom.children[1].children[this.index],d=o.offsetWidth-p.offsetLeft-p.offsetWidth;if(Math.abs(d-i.marginRight)>2)f=!0;else if(this.index>0){s.dom.children[1].children[this.index-1].offsetLeft<=p.offsetLeft&&(f=!0)}f&&(i.marginRight=d+p.offsetWidth)}}else{var h=this.left;if(a.logographic){var m=s.dom.children[this.index+1].children[this.id];m&&(h=m.offsetLeft)}i.marginLeft=h+o.char_margin_left}if(a.is_cursive&&a.char_assist){var y=s.dom.children[1].lastElementChild;y.className="_cassist";for(var v=y.children,g=0;g<v.length&&!v[g].classList.contains("_clr");)g++;for(v[g].classList.contains("_dfcs")||(v[g].className+=" _dfcs");g>0&&!v[g].offsetWidth;)g--;if(g<v.length-1&&v[g].offsetWidth&&!v[g+1].offsetWidth){v[g].offsetWidth;for(v[g++].className+=" _diacritic_base";g<v.length&&!v[g].offsetWidth;){var _=v[g].innerText;v[g].className+=" _diacritic _m"+(r[_.charCodeAt(0)]||2);var b=document.createElement("SPAN");b.innerText=_,v[g].innerText="",v[g].appendChild(b),g++}}y.className="_cassist _hide_rest",a.is_rtl?y.style.marginRight=i.marginRight+"px":y.style.marginLeft=i.marginLeft+"px"}e.css(i)},o.prototype.keydown=function(e){this.get_typable();this.char_dict.valid||this.overlay_fade(e)},o.prototype.overlay_fade=function(e){var t=this.get_token(),r=t.meta_node,n=document.createElement("span");n.className="_errchr token_unit",n.innerHTML=e;t.get_typable().cursor[0];if(this.get_typable().render_props.is_rtl){var o=t.dom.children[1].children[this.index];n.style.right=t.dom.offsetWidth-o.offsetLeft-o.offsetWidth+t.dom.offsetLeft+"px"}else n.style.left=this.token_left+"px";r.appendChild(n),(0,a.default)(n).delay(0).fadeOut(1e3),setTimeout((function(){(0,a.default)(n).remove()}),1e3)};var i=o;t.default=i},98368:(e,t,r)=>{r(21249),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(711)),a=o(r(69606));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){this.tokens=[],this.index=t,this.dom=(0,a.default)("<span />").addClass("line")[0],this.is_focused=!1,this.get_typable=function(){return e},e.lines.push(this)}i.prototype.add_token=function(e){this.tokens.push(e),e.line=this},i.prototype.mount=function(){for(var e=0,t=this.tokens.length;e<t;e++)this.dom.appendChild(this.tokens[e].dom);this.dom.appendChild(document.createElement("SPAN")),this.get_typable().arena.append(this.dom)},i.prototype.focus=function(){var e=this.get_typable();this.is_focused=!0,(0,a.default)(this.dom).addClass("active").removeClass("done").prevAll().addClass("done"),e.focused_line&&e.focused_line.blur(),e.focused_line=this},i.prototype.blur=function(){this.is_focused=!1,this.is_done=(0,n.default)(this.tokens.map((function(e){return e.is_done()}))),(0,a.default)(this.dom).removeClass("active")};var s=i;t.default=s},76945:(e,t,r)=>{r(82526),r(41817),r(96649),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(69606)),a=o(r(47642));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}var s=function(){function e(t,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.line_transition=r,this.typable=t,this.events=new a.default(["cursor_move"]),this.typable.events.on("cursor_move",this.on_cursor_move.bind(this)),this.elm=(0,n.default)("<div />").css({height:0,overflow:"hidden"}).addClass("inview"),t.arena.replaceWith(this.elm),this.elm.append(t.arena),this.set_linecount(o),this.scroll(this.typable.cur_token.line.index),this.on_scroll_end=this.on_scroll_end.bind(this)}var t,r,o;return t=e,(r=[{key:"on_cursor_move",value:function(e){var t=e.position;this._last_position&&this._last_position.top==t.top&&this._last_position.left==t.left||(this._last_position=t,this.scroll(this.typable.cur_token.line.index,e.is_rerender))}},{key:"on_scroll_end",value:function(){var e=this.typable.cursor,t=e.offset();this.events.fire_event("cursor_move",{position:{top:t.top,left:t.left+e.width()/2}})}},{key:"set_linecount",value:function(e){switch(this.lines=e,this.line_transition){case"scroll-no-bounce":this.typable.arena.parent().css({height:"100%"});break;case"scroll":var t=this.typable.facts.line_h_allin*this.lines;this.typable.arena.parent().stop().animate({height:t},1e3,"bounceout")}}},{key:"scroll",value:function(e,t){var r,n=this.typable;switch(this.lines){case 1:case 2:r=e;break;case 3:r=e-1;break;default:r=e-Math.round(this.lines/2)}var a=-Math.max(0,r)*n.facts.line_h_allin;t?(n.arena.stop().css({marginTop:a}),this.on_scroll_end()):setTimeout(function(){n.arena.stop().animate({marginTop:a},500,"",this.on_scroll_end)}.bind(this),200)}}])&&i(t.prototype,r),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=s},43720:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(57327),r(66992),r(21249),r(96078),r(9653),r(41539),r(88674),r(74916),r(78783),r(23123),r(23157),r(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.get_keyboards=function(e){i.default.getJSON("https://static.typingclub.com/m/engine/keyboards/keyboards.json",(function(t){for(var n={},a=0;a<t.length;a++){var o=t[a];if(n[o.code]=o,r.g.cordova){for(var i=[],s=0;s<o.keyboards.length;s++)o.keyboards[s].browserOnly||i.push(o.keyboards[s]);o.keyboards=i}}e(t,n)}))},t.show_keyboard_assist=function(e){approuter.show_modal(a.default.createElement(n.default,{id:"keyboard-assist",width:550,padding:25,className:"keyboard-assist-modal"},a.default.createElement(w,e)))};var n=u(r(42644)),a=u(r(67294)),o=r(95343),i=u(r(69606)),s=u(r(76869));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var a=v(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var b=function(e){var t,r=e.schema,n=e.with_keys,o=e.selected,i=e.onClick,s=function(e){return"object"==typeof e?e&&e[0]&&(e[0].o||r.terminators[e[0]["->"]])||"":e},u=r.keymap[" "],l=r.keymap.shift,c={quote:s(u[2][10]),double_quote:s(l[2][10]),open_square:s(u[1][10]),close_square:s(u[1][11]),open_curly:s(l[1][10]),close_curly:s(l[1][11]),backslash:s(u[1][12]),pipe:s(l[1][12]),enter:r.labels&&r.labels.enter||"enter"};return t="iso"==r.layout?a.default.createElement("g",null,a.default.createElement("path",{className:"quote",d:"M587.4,141.5c0,1.6-1.4,3-3,3h-36.5c-1.7,0-3-1.4-3-3v-35.4c0-1.7,1.3-3,3-3h36.5c1.6,0,3,1.3,3,3V141.5z"}),a.default.createElement("path",{className:"open-bracket",d:"M576.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),a.default.createElement("path",{className:"close-bracket",d:"M621.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),a.default.createElement("path",{className:"backslash",d:"M634.8,141.4c0,1.6-1.3,3-3,3h-38.6c-1.6,0-3-1.4-3-3v-35.2c0-1.6,1.4-3,3-3h38.6c1.7,0,3,1.4,3,3V141.4z"}),a.default.createElement("path",{className:"path-enter active",d:"M668.9,141.4c0,1.6-1.3,3-3,3h-25.3c-1.7,0-3-1.4-3-3v-36.1c0-2.6-2.1-4.7-4.7-4.7h-5.6c-1.7,0-3-1.3-3-3V62.3c0-1.7,1.3-3,3-3h38.5c1.7,0,3.1,1.4,3.1,3V141.4z"}),a.default.createElement("text",{transform:"matrix(1 0 0 1 565.6211 138.7126)"},c.quote),a.default.createElement("text",{transform:"matrix(1 0 0 1 565.6211 120.3762)"},c.double_quote),a.default.createElement("text",{transform:"matrix(1 0 0 1 553.3923 94.426)"},c.open_square),a.default.createElement("text",{transform:"matrix(1 0 0 1 552.9709 74.877)"},c.open_curly),a.default.createElement("text",{transform:"matrix(1 0 0 1 598.7656 94.426)"},c.close_square),a.default.createElement("text",{transform:"matrix(1 0 0 1 598.3442 74.7849)"},c.close_curly),a.default.createElement("text",{transform:"matrix(1 0 0 1 610.4075 140.6807)"},c.backslash),a.default.createElement("text",{transform:"matrix(1 0 0 1 610.5442 118.677)"},c.pipe),a.default.createElement("text",{className:"text-enter",transform:"matrix(1 0 0 1 631.6479 72.5581)"},c.enter)):a.default.createElement("g",null,a.default.createElement("path",{className:"quote",d:"M587.4,141.5c0,1.6-1.4,3-3,3h-36.5c-1.7,0-3-1.4-3-3v-35.4c0-1.7,1.3-3,3-3h36.5c1.6,0,3,1.3,3,3V141.5z"}),a.default.createElement("path",{className:"open-bracket",d:"M576.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),a.default.createElement("path",{className:"close-bracket",d:"M621.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),a.default.createElement("path",{className:"backslash",d:"M668.8,97.6c0,1.6-1.3,3-3,3h-38.6c-1.6,0-3-1.4-3-3V62.4c0-1.6,1.4-3,3-3h38.6c1.7,0,3,1.4,3,3V97.6z"}),a.default.createElement("path",{className:"path-enter",d:"M668.8,141.5c0,1.6-1.3,3-3,3h-72.9c-1.7,0-3-1.4-3-3v-35.4c0-1.7,1.3-3,3-3h72.9c1.7,0,3,1.3,3,3V141.5z"}),a.default.createElement("text",{transform:"matrix(1 0 0 1 565.621 138.7127)"},c.quote),a.default.createElement("text",{transform:"matrix(1 0 0 1 565.621 120.3763)"},c.double_quote),a.default.createElement("text",{transform:"matrix(1 0 0 1 553.3923 94.426)"},c.open_square),a.default.createElement("text",{transform:"matrix(1 0 0 1 552.9709 74.8769)"},c.open_curly),a.default.createElement("text",{transform:"matrix(1 0 0 1 598.7657 94.426)"},c.close_square),a.default.createElement("text",{transform:"matrix(1 0 0 1 598.3443 74.7849)"},c.close_curly),a.default.createElement("text",{transform:"matrix(1 0 0 1 644.3574 96.8807)"},c.backslash),a.default.createElement("text",{transform:"matrix(1 0 0 1 644.4941 74.8769)"},c.pipe),a.default.createElement("text",{className:"text-enter",transform:"matrix(1 0 0 1 636.3144 137.7128)"},c.enter)),a.default.createElement("svg",{className:"sample-layout"+(o?" selected":"")+(n?" with-keys":""),viewBox:"515 50 180 105",onClick:i},t)},w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(c,e);var t,r,n,u=h(c);function c(){var e;f(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(y(e=u.call.apply(u,[this].concat(r))),"prev_pages",[]),g(y(e),"state",{page:0,selected_schema_slug:e.props.keyboard,selected_schema_name:e.props.schema_name,selected_lang:e.props.schema_name.split(",")[0],layout_choices:e.props.layout_choices,enter_shape:null}),e}return t=c,(r=[{key:"go_next",value:function(){var e=this.state,t=e.page,r=e.enter_shape,n=e.layout_choices;if(1==t)this.set_language_keyboard(this.state.selected_lang);else if(this.prev_pages.push(t),0==t)this.setState({page:1});else if(2==t){var a=n.filter((function(e){return e.schema.layout.startsWith(r)}));1==a.length?this.set_schema(a[0],!0):this.setState({page:3})}else this.setState({page:4})}},{key:"set_enter_shape",value:function(e){this.state.enter_shape=e,this.go_next()}},{key:"set_schema",value:function(e){this.setState({page:4,selected_schema_name:e.name,selected_schema_slug:e.slug})}},{key:"set_language_keyboard",value:function(e){var t=this,r=this.props.keyboards.filter((function(t){return t.code==e}))[0].keyboards;this.setState({layout_choices:r});var n,a=[],o=l(r);try{var s=function(){var e=n.value;e.schema||a.push(new Promise((function(t,r){i.default.ajax({url:"".concat("https://static.typingclub.com/m/","engine/keyboards/schema/").concat(e.slug,".json"),dataType:"json",success:function(r){e.schema=r,t()},error:r})})))};for(o.s();!(n=o.n()).done;)s()}catch(e){o.e(e)}finally{o.f()}Promise.all(a).then((function(){var e,n;t.prev_pages.push(t.state.page);var a,o=l(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;!i.schema.layout||i.schema.layout.startsWith("ansi")?n=i.schema:"iso"==i.schema.layout&&(e=i.schema)}}catch(e){o.e(e)}finally{o.f()}e&&n?t.setState({page:2,iso_kb:e,ansi_kb:n}):1==r.length?t.set_schema(r[0]):t.setState({page:3})}))}},{key:"componentWillUpdate",value:function(e,t){4==t.page?(this.vkeyboard.style.display="block",t.selected_schema_slug==this.state.selected_schema_slug&&this.kb||(this.kb=new s.default(this.vkeyboard,t.selected_schema_slug,!0,!1))):this.vkeyboard.style.display="none"}},{key:"componentDidUpdate",value:function(){if(1==this.state.page){(0,i.default)(".languages").scrollTop(1).scrollTop(0);var e=(0,i.default)(".languages .selectable.selected")[0];e&&e.scrollIntoView()}}},{key:"componentWillUnmount",value:function(){this.kb&&this.kb.release()}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.keyboards,i=r.update_keyboard_schema,s=this.state,u=s.page,l=s.selected_schema_slug,c=s.selected_lang,f=s.layout_choices,p=s.enter_shape;if(0==u&&(e=a.default.createElement("div",null,a.default.createElement("span",{className:"inline-settings-label"},(0,o.t)("Layouts")),a.default.createElement("div",{className:"layouts",style:{marginTop:12}},f.map((function(e){return a.default.createElement("span",{key:e.slug,className:"selectable "+(l==e.slug?"selected":""),onClick:function(){i(e.slug),t.setState({selected_schema_slug:e.slug})}},a.default.createElement("span",{className:"edicon-layout-keyboard-icon"}),e.name)}))))),1==u&&(e=a.default.createElement("div",null,a.default.createElement("span",{className:"inline-settings-label"},(0,o.t)("Language")),a.default.createElement("div",{className:"languages"},n.map((function(e){return a.default.createElement("span",{key:e.code,style:{pointerEvents:"initial"},className:"selectable "+(c==e.code?"selected":""),onClick:function(){t.state.selected_lang=e.code,t.go_next()}},e.name," ",a.default.createElement("br",null),a.default.createElement("small",null,e.nativeName))}))))),2==u&&(e=a.default.createElement("div",null,a.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,o.t)("What does the <b>enter key</b> on your keyboard look like?")}}),a.default.createElement("div",{style:{paddingTop:20,textAlign:"center"}},a.default.createElement(b,{selected:"ansi"==p,onClick:function(){return t.set_enter_shape("ansi")},schema:this.state.ansi_kb}),a.default.createElement("hr",{className:"divider",style:{height:130}}),a.default.createElement(b,{selected:"iso"==p,onClick:function(){return t.set_enter_shape("iso")},iso:!0,schema:this.state.iso_kb})))),3==u){var d=f;p&&(d=f.filter((function(e){return e.schema.layout.startsWith(p)}))),e=a.default.createElement("div",null,a.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,o.t)("Which of the following options match the <b>keys around</b> the <b>enter key</b> on your keyboard?")}}),a.default.createElement("div",{style:{paddingTop:20,textAlign:d.length>2?"left":"center"}},d.map((function(e,r){return a.default.createElement("span",{style:{display:"inline-block",verticalAlign:"top",width:181},key:r},r%3?a.default.createElement("hr",{className:"divider"}):null,a.default.createElement(b,{selected:e.slug==l,onClick:function(){t.prev_pages.push(u),t.set_schema(e)},schema:e.schema,with_keys:!0}),a.default.createElement("div",{style:{marginBottom:10,textAlign:"center",padding:"0 10px"}},e.name))}))))}return 4==u&&(e=a.default.createElement("div",null,a.default.createElement("span",null,(0,o.t)("Based on the information you provided, your keyboard is {{name}}",{name:""}),a.default.createElement("span",{className:"highlighted"},this.state.selected_schema_name),"."))),a.default.createElement("div",null,a.default.createElement("div",{style:{fontWeight:500,margin:-25,padding:"15px 25px",borderBottom:"solid 1px #ddd"}},(0,o.t)("Identify Keyboard Layout")),a.default.createElement("div",{className:"settings-panel",style:{padding:"50px 0"}},e,a.default.createElement("div",{className:"keyboard-identified",ref:function(e){return t.vkeyboard=e}})),a.default.createElement("div",{style:{margin:-25,padding:"15px 20px",fontSize:17,borderTop:"solid 1px #ddd"}},this.prev_pages.length?a.default.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return t.setState({page:t.prev_pages.pop()})}},a.default.createElement("span",{className:"icon icon-chevron-left"}),(0,o.t)(" Back")):null,a.default.createElement("div",{className:"pull-right"},u>0&&u<4?a.default.createElement("button",{className:"btn btn-primary",onClick:function(){return t.go_next()}},(0,o.t)("Next")):a.default.createElement("button",{className:"btn "+(0==u?"btn-default":"btn-primary"),onClick:function(){4==u&&t.props.update_keyboard_schema(l),approuter.hide_modal("keyboard-assist")}},(0,o.t)("Done")),a.default.createElement("span",{className:"hspacer"}),0==u&&a.default.createElement("button",{className:"btn btn-primary",onClick:function(){return t.go_next()}},(0,o.t)("Help me identify my layout")))))}}])&&p(t.prototype,r),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.default.Component)},13016:(e,t,r)=>{r(92222),r(57327),r(19601),r(30489),r(74916),r(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(35666);var n=l(r(76869)),a=l(r(67294)),o=l(r(69606)),i=r(95343),s=r(43720),u=l(r(42644));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function f(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function h(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var a=w(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var k="ignore_possible_keyboard_mismatch",x=function(e){y(r,e);var t=g(r);function r(e){var n;return p(this,r),(n=t.call(this,e)).ele=null,n}return h(r,[{key:"show",value:function(){var e=this;this.ele.animateCss("flipInX",(function(){return e.ele.show()}))}},{key:"hide",value:function(){var e=this;this.ele.animateCss("fadeOut",(function(){return e.ele.hide()}))}},{key:"componentDidMount",value:function(){this.show()}},{key:"componentDidUpdate",value:function(){this.props.hidden&&this.ele.is(":visible")?this.hide():this.props.hidden||this.ele.is(":visible")||this.show()}},{key:"render",value:function(){var e=this,t=this.props,r=t.width,n=t.indicatorTop,i={marginTop:Math.min(20,window.innerHeight-200),width:r,minHeight:n+30};return a.default.createElement("div",{ref:function(t){return e.ele=(0,o.default)(t)},style:i,className:"keyboard-popup",tabIndex:-1,"aria-hidden":!0},a.default.createElement("div",null,this.props.children,a.default.createElement("i",{className:"right-indicator",style:{top:n}})))}}]),r}(a.default.Component),j=function(e){y(r,e);var t=g(r);function r(){var e;p(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return f(b(e=t.call.apply(t,[this].concat(a))),"state",{hidden:!1}),e}return h(r,[{key:"hide",value:function(){this.setState({hidden:!0})}},{key:"render",value:function(){var e=this;return a.default.createElement(x,{width:306,indicatorTop:40,hidden:this.state.hidden},a.default.createElement("h4",{style:{marginTop:0}},(0,i.t)("Incorrect Keyboard Detected")),(0,i.t)("It looks like you have the wrong keyboard layout selected. We suggest you review your keyboard layout and make sure it’s compatible with this lesson."),a.default.createElement("div",{style:{marginTop:15}},a.default.createElement("button",{className:"btn btn-primary",onClick:function(){(0,s.get_keyboards)((function(t,r){var n=e.props,a=n.keyboard_schema,o=n.update_keyboard_schema,i=approuter.profile,u=r[i.keyboard.split(",")[0]].keyboards,l=(u.filter((function(e){return i.keyboard==e.slug}))[0]||{name:i.keyboard}).name;(0,s.show_keyboard_assist)({keyboard_schema:a,keyboards:t,lang_keyboard_map:r,layout_choices:u,update_keyboard_schema:o,schema_name:l})})),e.hide()}},(0,i.t)("Update Keyboard Layout")),a.default.createElement("button",{className:"btn btn-link",onClick:function(){localStorage.setItem(k,!0),e.hide()}},"Dismiss")))}}]),r}(a.default.Component),O=function(e){y(r,e);var t=g(r);function r(e){var n;return p(this,r),(n=t.call(this,e)).ele=null,n.ignore=n.props.core.ignore_case,n.state={active:!1,hidden:!1},n}return h(r,[{key:"hide",value:function(){this.setState({hidden:!0})}},{key:"componentDidMount",value:function(){var e=this;this.ignore||this.props.core.events.on("capslock_detected",(function(t){t?e.ignore||e.setState({hidden:!1,active:!0}):e.state.active&&e.hide()}))}},{key:"render",value:function(){var e=this,t=(0,i.t)("We detected that you have CapsLock key ON. Press the CapsLock key again to turn it off.");return this.state.active?a.default.createElement(x,{width:241,indicatorTop:85,hidden:this.state.hidden},a.default.createElement("h4",{style:{marginTop:0}},(0,i.t)("CapsLock ON")),t,a.default.createElement("button",{className:"btn btn-link",style:{display:"block",marginTop:10,marginLeft:-10},"aria-label":t,onClick:function(){localStorage.setItem(k,!0),e.hide(),e.ignore=!0}},"Dismiss")):null}}]),r}(a.default.Component),E=function(e){y(s,e);var t,r,o=g(s);function s(e){var t;p(this,s),f(b(t=o.call(this,e)),"state",{possible_keyboard_mismatch:!1,showPopups:!1});var r=e.keyboard_layout,n=e.core,a=e.is_junior,i=e.use_minimal;return t.minimal_keyboard_ui=i&&/^[a-z| ]*$/.test(n.text),t.keyboard_layout=!a&&t.minimal_keyboard_ui?0:r,t.theme=t.minimal_keyboard_ui&&!a?"bone":null,t}return h(s,[{key:"componentDidMount",value:(t=regeneratorRuntime.mark((function e(){var t,r,a,o,i,s,u,l,c,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.onLoaded,a=t.keyboard_schema,o=t.show_keyboard,i=t.show_hand,s=t.use_hand,u=t.anchoring,l=new n.default(this.refs.kb,a,o,i,this.keyboard_layout,s,null,this.theme,this.props.one_char_per_key),core.events.on("keydown",(function(e){(e.new_char_dict||!e.is_valid||e.deadkey)&&l.handle_keydown_event(e,core.cur_char.chr,core.dead_key_active,core.chars[core.cur_char_index+1],core.chars[core.cur_char_index+2])})),core.events.on("abort",(function(e){return e.punching&&f.show_warn_keyboard_punching()})),core.events.on("end",(function(){f.setState({showPopups:!1}),l.release()})),l.events.on("layout_updated",function(e){if(!core.use_hand&&u){var t,r=l.get_anchor_chars(),n=l.detect_anchoring_hand(core.text);n?(t="right"==n?r[0]:r[1],core.anchor(n,t)):core.clear_anchor()}else core.clear_anchor()}.bind(this)),l.events.on("possible_keyboard_mismatch",(function(){localStorage.getItem(k)||f.setState({possible_keyboard_mismatch:!0})})),e.next=9,l.loading;case 9:r?r(l,this.refs.kb):this.refs.kb.style.opacity=1,c=i,l.highlight(core.cur_char.chr,core.dead_key_active,core.chars[core.cur_char_index+1]),c&&("left"==c?l.$left_hand&&l.$left_hand.hide():l.$right_hand&&l.$right_hand.hide()),this.setState({showPopups:!0}),this.keyboard=l;case 15:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){c(o,n,a,i,s,"next",e)}function s(e){c(o,n,a,i,s,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.keyboard&&this.keyboard.release()}},{key:"show_warn_keyboard_punching",value:function(){var e;function t(){approuter.hide_modal("keyboard_punching"),approuter.refresh(),e&&clearTimeout(e)}approuter.show_modal(a.default.createElement(u.default,{id:"keyboard_punching",width:"100vw",padding:0,show_x:!1,close_outside:!1,esc_close:!1,style:{boxShadow:"0 0 200px #444"}},a.default.createElement("div",{style:{background:"rgba(0,0,0,.9)",fontSize:25,textAlign:"center",padding:60}},a.default.createElement("div",null,(0,i.t)("Please focus on your accuracy and try again.")),a.default.createElement("div",{className:"btn btn-default btn-lg",style:{marginTop:10},onClick:t},(0,i.t)("Restart Lesson"))))),e=setTimeout(t,4e3)}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,n=t.style,o=t.keyboard_schema,i=(t.show_keyboard,t.show_hand,t.use_hand,t.is_junior);return a.default.createElement("div",{className:"keyboard-plugin",style:{width:"100%"}},this.state.showPopups&&a.default.createElement(a.default.Fragment,null,a.default.createElement(O,{core:core}),this.state.possible_keyboard_mismatch&&a.default.createElement(j,{keyboard_schema:o,update_keyboard_schema:function(t){approuter.update_profile({keyboard:t}).then((function(){return e.props.refreshUI(t)}))}})),a.default.createElement("div",{ref:"kb",className:(r||"")+(i?" junior-kb":this.minimal_keyboard_ui?" bone":""),style:Object.assign({opacity:0},n),tabIndex:-1,"aria-hidden":!0}))}}]),s}(a.default.Component);t.default=E},60513:(e,t,r)=>{r(82526),r(41817),r(96649),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(71327)),o=(n=r(24040))&&n.__esModule?n:{default:n};function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(s(this,e),u(this,"play_keystroke",(function(e){if(e.chr&&!r.is_mute){var t=!r.no_error&&!(e.is_valid||e.deadkey);r.audio_player.play(t?"error":"typewriter",!0)}})),this.disable_sound=a.isIOS,!this.disable_sound)if(this.core=t,this.is_mute=n,this.no_error=i,l)this.audio_player=l;else{var c=this.audio_player=new o.default;c.load("typewriter").then((function(){t.events.on("keydown",r.play_keystroke)})).catch((function(){return console.log("failed to load audio")})),c.load("error").catch((function(){return r.is_mute=!0}))}}},51546:(e,t,r)=>{r(69600),r(21249),r(74916),r(4723),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(23291)),a=s(r(69606)),o=r(71327),i=r(95343);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,a){this.id=r,this.signs=e,this.color=n||"",this.facts=t.facts,this.render_props=t.render_props,this.focused=!1,this.get_typable=function(){return t},this.create_char_objs(),this.initial_dom_setup()}function f(e,t){if(!t||5==t)return null;var r={a:["a","ā","á","ă","à"],o:["o","ō","ó","ŏ","ò"],e:["e","ē","é","ĕ","è"],i:["i","ī","í","ĭ","ì"],u:["u","ū","ú","ŭ","ù"]},n=e.map((function(e){return e.chr})),a=-1;for(var o in e){if("aoe".indexOf(n[o])>=0)return n[o]=r[n[o]][t],n.join("");"ui".indexOf(n[o])>=0&&(a=o)}return a>=0&&(n[a]=r[n[a]][t]),n.join("")}c.prototype.focus=function(){this.focused=!0,(0,a.default)(this.dom).addClass("_fcs"),this.line&&this.line!=this.get_typable().focused_line&&this.line.focus(),this.meta_node.innerHTML=""},c.prototype.blur=function(){this.focused=!1,(0,a.default)(this.dom).removeClass("_fcs"),this.render_props.annotate_speed&&this.speed_feedback()},c.prototype.is_done=function(){for(var e=this.chars,t=0,r=e.length;t<r;t++)if(!e[t].char_dict.dirty)return!1;return!0},c.prototype.next=function(){return this.get_typable().tokens[this.id+1]},c.prototype.prev=function(){return this.id?this.get_typable().tokens[this.id-1]:null},c.prototype.create_char_objs=function(){for(var e=this.chars=[],t=this.signs,r=0,a=this.signs.length;r<a;r++){var o=t[r].t,i=t[r].tone,s=null;i&&"1234".indexOf(i)>=0&&(s=f(t[r].t,i));for(var u=0,l=o.length;u<l;u++){var c=new n.default(o[u],this,u,r,s&&s[u]);e.push(c),this.get_typable().chars.push(c)}}},c.prototype.initial_dom_setup=function(){var e=this.meta_node=document.createElement("SPAN");e.className="_toknmeta";var t=document.createElement("SPAN"),r=document.createElement("SPAN");t.appendChild(r),t.appendChild(e),this.dom=t,this.render()};var p={"&":"&amp;",">":"&gt;","<":"&lt;","\n":'<span class="_enter">&nbsp;</span><br />'," ":"&nbsp;<i> </i>","\t":'<span class="_tab">&nbsp;&nbsp;&nbsp;&nbsp;</span>'};function d(e){return e in p?p[e]:e}c.prototype.render=function(){var e=this,t=this.render_props.logographic,r=this.render_props.is_cursive&&this.render_props.char_assist,n=this.chars,o=this.signs,i=document.createElement("SPAN");i.appendChild(this.meta_node);var s=i;r&&((s=document.createElement("SPAN")).className="_chars",i.appendChild(s));for(var l=function(t,r){var n=document.createElement("SPAN");return 1==t.length?n.appendChild(document.createTextNode(t)):n.innerHTML=t,n.className="token_unit "+e.color+" "+r,n},c=0,f=!1,p=null,h=null,m=!0,y=0,v=o.length;y<v;y++){for(var g=o[y],_=!0,b=!1,w="",k=[],x=null,j=0,O=g.t.length;j<O;j++){var E,S=n[c++],P=S.char_dict;"\n"==P.chr&&(f=!0),P.dirty||(_=!1),P.valid||(b=!0);for(var C=P.valid,N=P.real_valid,T=c;T<v&&!n[T].width&&n[T].char_dict.dirty;)C=C&&n[T].char_dict.valid,N=N&&n[T].char_dict.real_valid,T++;E=C&&!N?"_ervld":P.dirty?C?"_vld":"_err":"_clr";var R=S.display_chr||S.chr;x?("_clr"==x||w&&(k.push(l(w,x)),w="",x=E),w+=d(R)):(w=d(R),x=E)}if(w&&k.push(l(w,x)),t){(p=document.createElement("SPAN")).className="lgram"+(_?b?" _err_gram":" _vld_gram":m?" _fcs_gram":""),m=_;var M,A=u(k);try{for(A.s();!(M=A.n()).done;){var D=M.value;p.appendChild(D)}}catch(e){A.e(e)}finally{A.f()}(h=document.createElement("DIV")).innerHTML=g.g,p.appendChild(h),s.appendChild(p)}else{var I,L=u(k);try{for(L.s();!(I=L.n()).done;){var B=I.value;s.appendChild(B)}}catch(e){L.e(e)}finally{L.f()}}}if(r){var U=(0,a.default)(s).clone()[0];U.className="_cassist",s.appendChild(U)}f&&t&&i.appendChild(document.createElement("BR")),i.className="token"+(this.focused?" _fcs":"")+(t?" _logo":""),(0,a.default)(this.dom).replaceWith(i),this.dom=i},c.prototype.set_char_positions=function(e,t,r,n){var a,o=this.top=this.dom.offsetTop-e,i=this.left=this.dom.offsetLeft-t;this.first_word_in_line=0==i;for(var s=this.chars,u=0,l=0,c=0,f=s.length;c<f;c++){var p=s[c],d=n<0?r[p.chr]:r[n+c];a=i+u,p.setPosition(o,a-(0==d?l:0),u,d),u+=d,0==d?0:(0,l=d)}},c.prototype.speed_feedback=function(){for(var e=0,t=0,r=(this.get_typable(),0),n=this.chars.length;r<n;r++){var s=this.chars[r];s.chr.match("[., ]")||s.char_dict.dur&&(s.char_dict.valid&&e++,t+=s.char_dict.dur)}if(e>3){var u=(0,o.calc_wpm)(e,t),l=(0,a.default)("<span />").addClass("meta-word").html(u+" <sup>"+(0,i.t)("wpm")+"</sup> "),c=(0,a.default)('<img src="https://static.typingclub.com/m/engine/img/star.png" width="10px" />'),f=function(){return c.clone()};e>4&&(30<=u&&u<40?l.append((0,a.default)("<b />").html((0,i.t)("Good"))):40<=u&&u<50?l.append((0,a.default)("<b />").html((0,i.t)("Nice!"))):50<=u&&u<60?l.append((0,a.default)("<b />").html((0,i.t)("Great!"))):60<=u&&u<70?l.append((0,a.default)("<b />").html((0,i.t)("Great!")).append(f())):70<=u&&u<80?l.append((0,a.default)("<b />").html((0,i.t)("WOW")).append(f())):80<=u&&u<100&&l.append((0,a.default)("<b />").html((0,i.t)("WOW!")).append(f(),f())),u>=100&&l.append((0,a.default)("<b />").html((0,i.t)("WOW!")).append(f(),f(),f()))),(0,a.default)(this.meta_node).prepend(l.fadeIn("slow"))}},c.prototype.green_check=function(){(0,a.default)(this.meta_node).prepend((0,a.default)('<div style="text-align:center;color:#a9d000;"><i style="position:absolute;" class="icon icon-check gcheck"></i></div>'))};var h=c;t.default=h},10564:(e,t,r)=>{r(69600),r(21249),r(47042),r(19601),r(91058),r(74916),r(4723),r(23123),r(54747),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.get_render_props=function(e,t){var r={annotate_speed:!0,display_className:"normal",display_row_range:[3,5],line_transition:"scroll",token_split_regex:/\n| |\t/,cursor:{className:"normal_cursor"},anchor_hand:{"right-anchor":"right","left-anchor":"left"}[e]||null,size:"med"};switch(e){case"abjad":return Object.assign(r,{cursor:{className:"vertical_cursor"},is_rtl:!0,is_cursive:!0,char_assist:!0});case"story":return Object.assign(r,{annotate_speed:!1,line_transition:"scroll-no-bounce",cursor:{className:"story_cursor"}});case"instant":return Object.assign(r,{display_className:"normal hide-bottom-line hide-cursor",line_transition:"scroll-no-bounce",size:"small"});case"placement":return Object.assign(r,{display_className:"normal hide-bottom-line",line_transition:"scroll-no-bounce",size:"small"});case"code":return Object.assign(r,{display_className:"code",token_split_regex:/\n| |\t|\./,size:"small",display_row_range:[3,15]});case"logographic":return Object.assign(r,{logographic:!0});default:return r}};var n=c(r(51546)),a=c(r(98368)),o=(c(r(67294)),c(r(47642))),i=c(r(69606)),s=r(71327),u=c(r(5171)),l=c(r(75933));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.arena=(0,i.default)(e),this.core=r,this.render_props=t,this.replay_mode=n,this.lines=[],this.tokens=[],this.chars=[],this.events=new o.default(["cursor_move"]),this.token_opts={show_extras:!0},this.tokenize(),this.clean_rerender(),this.check_for_font_change_interval=100,this.check_for_font_change(),this.core.events.on("keydown",this.keydown.bind(this)),this.render_props.farsiFont&&l.default.load({custom:{families:["Abjad"],urls:["https://static.typingclub.com/m/corp2/css/font-abjad.css"]},classes:!1}),h(this.core.chars.map((function(e){return e.chr})))&&(this.render_props.is_cursive=!0)}function h(e){var t,r=0,n=f(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a>="က"&&a<="႟"&&r++}}catch(e){n.e(e)}finally{n.f()}return r/e.length>.1}d.prototype.clean_rerender=function(e){this.gather_arena_facts(),this.initial_dom_setup(),this.linify(),this.create_cursor(),this.cache_char_positions(),this.cur_token||this.focus_token(this.tokens[0]),this.cur_char().focus(this.cursor),this.announce_cursor_position({is_rerender:!0})},d.prototype.announce_cursor_position=function(e){e=e||{};var t=this.cursor.offset();this.events.fire_event("cursor_move",Object.assign(e,{position:{top:t.top,left:t.left}}))},d.prototype.keydown=function(e){if(!e.deadkey){var t=this.chars[e.old_char_dict.index];if("<-"!=e.chr&&t.keydown(e.chr),(e.new_char_dict||e.end_lesson)&&t.get_token().render(),e.new_char_dict){var r=this.chars[e.new_char_dict.index];r.get_token().render(),r.get_token()!=t.get_token()&&this.focus_token(r.get_token()),r.focus(this.cursor),this.announce_cursor_position()}}},d.prototype.focus_token=function(e){e!=this.cur_token&&(this.cur_token&&this.cur_token.blur(),this.cur_token=e,e.focus())},d.prototype.linify=function(){if(this.arena.removeClass("linified"),this.lines=[],this.tokens.length){var e,t,r=[],n=[],o=f(this.tokens);try{for(o.s();!(t=o.n()).done;){var s=t.value,u=s.dom.childNodes[1].offsetTop;null==e&&(e=u),u!=e&&(e=u,r.push(n),n=[]),n.push(s)}}catch(e){o.e(e)}finally{o.f()}n.length>0&&r.push(n);for(var l=0,c=0,p=r;c<p.length;c++){var d,h=p[c],m=new a.default(this,l++),y=f(h);try{for(y.s();!(d=y.n()).done;){var v=d.value;m.add_token(v)}}catch(e){y.e(e)}finally{y.f()}}var g,_=f(this.lines);try{for(_.s();!(g=_.n()).done;){g.value.mount()}}catch(e){_.e(e)}finally{_.f()}(0,i.default)(this._tokens_nd).remove(),this.arena.addClass("linified")}},d.prototype.cache_char_positions=function(){for(var e=this.tokens,t=this.render_props.is_cursive,r=t?0:-1,n=0,a=e.length;n<a;n++)e[n].set_char_positions(this.facts.offsetTop,this.facts.offsetLeft,this.facts.per_char_facts,r),t&&(r+=e[n].chars.length)},d.prototype.initial_dom_setup=function(){var e=document.createElement("SPAN");e.className="line";for(var t=this.tokens,r=0,n=t.length;r<n;r++)e.appendChild(t[r].dom),e.appendChild(document.createTextNode(" "));this.replay_mode?this.arena.addClass("replay_mode"):this.arena.addClass("play_mode"),this.core.ignore_case&&this.arena.css("text-transform",this.render_props.keyboard_lowercase?"lowercase":"uppercase"),this.arena.html(""),this.arena.append(e),this._tokens_nd=e},d.prototype.get_per_char_facts=function(){var e=this.render_props.is_cursive,t=e?[]:{},r=(0,i.default)("<div/>");r.css("position","absolute");var n=this.core.text.split("");if(!n.length)return t;for(var a in n){var o=n[a];if(e||!t[o]){var u=(0,i.default)("<span/>");u.addClass("token_unit __no-lineheight");var l={"\t":"&nbsp;&nbsp;&nbsp;&nbsp;"," ":"&nbsp;","\n":"&nbsp;"}[o];u.html(l||o),r.append(u),t[e?a:o]=u}}this.arena.prepend(r);var c=t[e?0:n[0]];function f(e){return(0,s.px2int)(c.css(e))}var p=f("padding-left")+f("padding-right")+f("border-left-width")+f("border-right-width")+f("margin-right")+f("margin-left"),d=s.isSafari?-1:0;for(var h in t)t[h]=t[h].width()+p+d;return(0,i.default)(r).remove(),t},d.prototype.gather_arena_facts=function(){var e=this.arena;this.facts||(this.facts={});var t=this.facts;t.per_char_facts=this.get_per_char_facts();var r="A"+this.chars.slice(0,10).map((function(e){return e.chr})).join("");this.render_props.logographic&&(r=escape(r));var n=(0,i.default)("<span />").html(r).addClass("token_unit"),a=(0,i.default)("<span />").addClass("line").append(n);function o(e){return(0,s.px2int)(n.css(e))}function u(e){return(0,s.px2int)(a.css(e))}e.prepend(a);var l=a.height(),c=o("padding-top")+o("padding-bottom")+o("border-top-width")+o("border-bottom-width");t.chr_h_with_lh=l+c,t.chr_h_allin=l*(this.render_props.logographic?2:1)+c+o("margin-top")+o("margin-bottom"),t.line_h_allin=t.chr_h_allin+u("margin-top")+u("margin-bottom")+u("padding-top")+u("padding-bottom"),t.char_margin_top=o("margin-top"),t.char_margin_bottom=o("margin-bottom"),t.char_margin_left=o("margin-left"),t.char_margin_right=o("margin-right"),t.offsetTop=e[0]?e[0].offsetTop:0,t.offsetLeft=e[0]?e[0].offsetLeft:0,t.offsetWidth=e[0]?e[0].offsetWidth:0,n.addClass("__no-lineheight token_unit"),t.chr_h=n.height(),a.remove()},d.prototype.tokenize=function(){var e=this.tokens,t=[],r=!1,a=0,o=this.render_props.token_split_regex;if(this.render_props.logographic){var i,s=0,l=f(this.core.tokens);try{for(l.s();!(i=l.n()).done;){var c,p=i.value,d=[],h=f(p.signs);try{for(h.s();!(c=h.n()).done;){var m=c.value;for(var y in t=[],m.t){var v=this.core.chars[s++];t.push(v)}d.push({g:m.g,t:t,tone:m.tone})}}catch(e){h.e(e)}finally{h.f()}e.push(new n.default(d,this,a++,O,this.token_opts))}}catch(e){l.e(e)}finally{l.f()}}else{var g,_,b,w,k,x,j=0,O="",E=f(this.render_props.format?(g=this.core.text,_=this.render_props.format,b=u.default.highlight(_,g).value,w=(new DOMParser).parseFromString("<i>".concat(b,"</i>"),"text/xml").firstElementChild,k=[],function e(t,r){if(t.nodeType==t.TEXT_NODE){var n=t.nodeValue;k.length>0&&(" "==n[0]||"\n"==n[0])&&(k[k.length-1].text+=n[0],n=n.substr(1)),n.length>0&&k.push({color:r,text:n})}else t.nodeType==t.ELEMENT_NODE&&t.childNodes.forEach((function(n){return e(n,r+(t.className?" "+t.className:""))}))}(w,"hljs"),k):[{text:this.core.text,color:""}]);try{for(E.s();!(x=E.n()).done;){for(var S=x.value,P=0;P<S.text.length;P++){v=this.core.chars[j];r&&(e.push(new n.default(t,this,a++,O,this.token_opts)),r=!1,t=[]),O=S.color,t.push({g:v.chr,t:[v]}),r=null!=v.chr.match(o)||t.length>20,j++}r=!0}}catch(e){E.e(e)}finally{E.f()}t&&e.push(new n.default(t,this,a++,O,this.token_opts))}},d.prototype.cur_char=function(){return this.chars[this.core.cur_char_index]},d.prototype.did_font_change=function(){var e=parseInt((0,i.default)(this.tokens[0].dom).height());return e!=this.facts.chr_h&&(this.font_change_report_count=this.font_change_report_count||0,this.font_change_report_count++),e!=this.facts.chr_h},d.prototype.check_for_font_change=function(){this.did_font_change()&&this.update_font_change(),this.check_for_font_change_interval+=600,this.check_for_font_change_interval<3e3&&(0,s.setTimeout)(this.check_for_font_change.bind(this),this.check_for_font_change_interval)},d.prototype.update_font_change=function(){this.gather_arena_facts(),this.cache_char_positions(),this.cursor.css({height:this.facts.chr_h_with_lh})},d.prototype.change_font=function(e){e?this.render_props.is_cursive?this.render_props.farsiFont?this.arena.css("font-family","YekanBold"):this.arena.css("font-weight","bold"):this.arena.css("font-family",e):e=""},d.prototype.create_cursor=function(){var e=this.cursor=(0,i.default)("<span>").addClass("cursor");this.render_props&&this.render_props.cursor&&this.render_props.cursor&&this.cursor.addClass(this.render_props.cursor.className),e.css({width:22,height:this.facts.chr_h_with_lh}),this.arena.prepend((0,i.default)("<div/>").append(e))};var m=d;t.default=m},84460:(e,t,r)=>{r(92222),r(82772),r(69600),r(21249),r(85827),r(47042),r(56977),r(91058),r(74916),r(23123),r(23157),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=f(r(47642)),a=f(r(69606)),o=f(r(1469)),i=f(r(63137)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(71327)),u=f(r(38452)),l=r(95343);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=!(navigator.platform&&navigator.platform.startsWith("Linux armv"));function m(e){window.core=this;var t="kanji"==(((window.approuter||{}).lesson||{}).activity||{}).format;this.no_input_mode=s.isIOS&&(e.is_logograms||!function(e){for(var t=0;t<e.length;t++)if(e.charCodeAt(t)>127)return!0;return!1}(e.text))||e.handle_pinyin||t,this.is_logograms=e.is_logograms,e.is_logograms?(this.tokens=e.text,this.create_char_profiles(this.tokens.map((function(e){return e.signs.reduce((function(e,t){return e.concat(t.t)}),[]).join("")})),this.tokens.map((function(e){return e.signs.reduce((function(e,t){return e.concat(t.g)}),[]).join("")})))):this.create_char_profiles(e.text.split(/(?= )/g)),e.handle_pinyin?this.special_input_punctuation_map=s.pinyin_input_punctuation_map():t&&(this.special_input_punctuation_map=(0,i.default)(s.jp_input_punctuation_map())),this.handle_special_punctuation=e.handle_pinyin||t,this.text=this.chars.map((function(e){return e.chr})).join("");var r=!1;window.approuter&&window.approuter.profile&&(r=approuter.profile.is_blind),this.lesson_id=e.lesson_id,this.on_error=r?"block":e.on_error,this.profile_block_on_errors=e.profile_block_on_errors,this.latest_error_count=0,this.deletable=null==e.deletable||e.deletable,this.start_on_correct=e.start_on_correct||!1,this.max_secs=e.max_secs,this.is_test=e.is_test,this.ignore_case=e.ignore_case||!1,this.no_auto_end_lesson=e.no_auto_end_lesson||!1,this.no_beater=e.no_beater||!1,this.log=[],this.per_char_performance_profile=[],this.text&&(this.cur_char=this.chars[0]),this.cur_char_index=0,this.cur_word_index=0,this.reset_stats(),this.prev_capslock_detected=!1,this.has_started=!1,this.has_ended=!1,this.pause_start=0,this.paused=!1,this.last_pause_duration=0,this.pause_count=0,this.capturing=!1,this.use_hand=e.use_hand,this.anchor_key=null,this.anchor_side=null,this.is_anchoring=!1,this.playback_speed=1,this.events=new n.default(["start","pause","unpause","stats_update","end","progress","backspace_prevented","keydown","attached","detached","word_changed","anchor_start","anchor_stop","abort","anchor_updated","anchor_abort","capslock_detected"]),this.stats={duration:0,valids:0,errors:0,total_chars:0},this.no_input_mode||this.init_keyboard_focus(),this.bound_keypress_handler=this._keypress_handler.bind(this),this.bound_input_handler=this._input_handler.bind(this),this.bound_input_handler_keydown=this._input_handler_keydown.bind(this),this.bound_input_handler_keyup=this._input_handler_keyup.bind(this)}m.prototype.start=function(){this.events.fire_event("start",{}),this.reset_stats(),this.has_started=!0,this.last_pause_duration=0,this.no_auto_end_lesson||this.no_beater||this.start_beater()},m.prototype.end_lesson=function(e){this.detach_capture(),this.end_time=new Date,this.has_ended=!0,this.stop_beater();var t,r=[],n=p(this.log);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.chr?r.push([a.chr,a.delay]):r.push(a)}}catch(e){n.e(e)}finally{n.f()}this.last_keydown&&r.push(["",new Date-this.last_keydown-(this.last_pause_duration||0)]);var o,i=0,s=p(this.chars);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.dirty&&(i=u.index)}}catch(e){s.e(e)}finally{s.f()}var l={per_chr:this.chars.slice(0,i+1),history:r,lesson_text:this.text.slice(0,i+1),is_partial:e?1:0,deletable:this.deletable,on_error:this.on_error,profile_block_on_errors:this.profile_block_on_errors,use_hand:this.use_hand};this.is_logograms&&(l.render_engine="logographic",l.lesson_text=this.tokens),this.report_performance_profile(),this.$ios_keyboard&&(this.$ios_keyboard.remove(),this.$ios_keyboard=null),this.events.fire_event("end",l)},m.prototype.clear_anchor=function(){this.anchor_side=null,this.anchor_key=null,this.events.fire_event("anchor_abort",{})},m.prototype.force_input_capture_mode=function(){this.no_input_mode&&(this.capturing?(this.detach_capture(),this.no_input_mode=!1,this.init_keyboard_focus(),this.attach_capture()):(this.no_input_mode=!1,this.init_keyboard_focus()))},m.prototype.anchor=function(e,t){this.anchor_side=e,this.anchor_key=t,(0,s.setTimeout)(function(){this.events.fire_event("anchor_updated",{side:this.anchor_side,key:this.anchor_key}),this.events.fire_event("anchor_stop",{})}.bind(this))},m.prototype.calc_progress=function(){var e=this.text.length,t=parseInt(1e3*this.cur_char_index/e)/10;t!=this.progress&&(this.progress=t,this.events.fire_event("progress",this.progress))},m.prototype.profile_keydown_start=function(){this.keydown_t1=new Date},m.prototype.profile_keydown_end=function(){var e=new Date-this.keydown_t1;this.per_char_performance_profile.push(e)},m.prototype.report_performance_profile=function(){try{if(!window.localStorage)return;if(localStorage.getItem("performance-logged"))return;localStorage.setItem("performance-logged",1)}catch(e){return}var e,t=100,r=0,n=0,a=0,o=p(this.per_char_performance_profile);try{for(o.s();!(e=o.n()).done;){var i=e.value;n+=i,t=Math.min(t,i),r=Math.max(r,i),a+=1}}catch(e){o.e(e)}finally{o.f()}parseInt(.5+n/a)},m.prototype.is_valid=function(e){if(cur_char=this.cur_char,!cur_char)return!1;var t=!1;if(!(t=this.ignore_case?cur_char.chr.toUpperCase()==e.toUpperCase():cur_char.chr==e))if(this.handle_special_punctuation)t=cur_char.chr==this.special_input_punctuation_map[e];else{t=cur_char.chr=={"е":"ё","Е":"Ё","’":"'","”":'"',1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"}[e]}return t},m.prototype.record_keydown_time=function(e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.profile_keydown_start();var n,a=this.cur_char,o=!1;if("<-"==e){if(0==this.cur_char_index)return!1;if(!this.deletable)return r&&this.events.fire_event("backspace_prevented")}else(n=this.is_valid(e))&&(e=a.chr),n||"block"!=this.on_error&&this.latest_error_count!=this.profile_block_on_errors-1||(o=!0);if(!this.has_started||a&&0==a.index){if(!n&&this.start_on_correct)return;this.start()}if(this.paused&&this.unpause(),null==t){t=0;var i=new Date;this.last_keydown&&(t=i-this.last_keydown-this.last_pause_duration),this.last_keydown=i}this.last_pause_duration=0,this.stats.duration+=t,this.log.push({chr:e,delay:t,is_valid:n});var s=this.cur_char,u=!1,l=!1;return a.dur+=t,"<-"==e?(a.dirty=!1,a=this.goto_prev_char(),this.set_cur_char_status(!1,!0),a.dirty=!1,n=!0,l=!0,this.latest_error_count>0&&this.latest_error_count--):o||!n&&"block"==this.on_error?n||(a.real_valid=!1):(this.set_cur_char_status(n),0==this.goto_next_char()&&(u=!0),n?this.latest_error_count=0:this.latest_error_count++),r&&this.events.fire_event("keydown",{old_char_dict:s,new_char_dict:u||o?null:this.cur_char,end_lesson:u,deadkey:!1,is_backspace:l,chr:e,delay:t,is_valid:n}),this.calc_progress(),u&&!this.no_auto_end_lesson&&this.end_lesson(),this.profile_keydown_end(),!0},m.prototype.set_cur_char_status=function(e,t){var r=this.cur_char,n=this.stats;t?(r.dirty=!1,n.total_chars--,r.valid?n.valids--:n.errors--):(r.real_valid=r.real_valid&&e,r.dirty=!0,n.total_chars++,e?n.valids++:n.errors++),r.valid=e},m.prototype.start_beater=function(){this.beater_timeout_id&&this.stop_beater(),this.beater_timeout_id=(0,s.setInterval)(this.beat.bind(this),1e3)},m.prototype.stop_beater=function(){clearInterval(this.beater_timeout_id),this.beater_timeout_id=null},m.prototype.is_keyboard_punching=function(){for(var e=this.log,t=0,r=0,n=e.length-1;n>=0;n--){var a=e[n];if(a.delay&&(t+=a.delay,0==a.is_valid&&r++),t>2e3)break}r>15&&(this.pause(),this.detach_capture(),this.events.fire_event("abort",{punching:!0}))},m.prototype.beat=function(){if(!this.paused&&this.has_started&&!this.end_time&&this.cur_char){var e=this.cur_char,t=this.stats,r=t.duration;this.last_keydown&&(r+=new Date-this.last_keydown),t.wpm=s.calc_wpm(t.valids,r),t.accuracy=s.calc_accuracy(t.valids,t.total_chars),t.progress=e.index/this.chars.length,t.chars_left=this.chars.length-e.index,this.events.fire_event("stats_update",this.stats)}if(this.max_secs&&!this.paused&&this.stats.duration+(new Date-(this.last_keydown||new Date))>=1e3*this.max_secs)return this.end_lesson();this.is_test&&this.max_secs||!this.last_keydown||this.end_time||this.paused||!(new Date-this.last_keydown>1e4)||this.pause(),this.is_keyboard_punching()},m.prototype.pause=function(){!this.paused&&this.has_started&&(this.pause_start=new Date,this.paused=!0,this.pause_count++,this.stop_beater(),this.events.fire_event("pause",this.pause_count))},m.prototype.unpause=function(){this.last_pause_duration=new Date-this.pause_start,this.pause_start=null,this.paused=!1,this.start_beater(),this.events.fire_event("unpause",this.pause_count)},m.prototype.toggle_pause=function(){this.paused?this.unpause():this.pause()},m.prototype.create_char_profiles=function(e,t){this.words={},this.chars=[];var r,n,a=0,o=0,i=p(e);try{for(i.s();!(n=i.n()).done;){var s,u=n.value,l=[],c=p(u);try{for(c.s();!(s=c.n()).done;){var f=s.value;r={index:a,valid:!1,dur:0,real_valid:!0,chr:f,word_index:o},this.chars.push(r)," "!=f&&l.push(r),a++}}catch(e){c.e(e)}finally{c.f()}l.length>0&&(this.words[o]={char_list:l,logo_word:t&&t[o]||null},o++)}}catch(e){i.e(e)}finally{i.f()}},m.prototype.is_done=function(){return this.cur_char_index>=this.text.length-1},m.prototype.jump_focus=function(e){if("number"==typeof e)var t=e;else t=e.index;this.cur_char_index=t,this.cur_char=this.chars[this.cur_char_index],this.log.push({action:"focus",i:this.cur_char_index})},m.prototype.skip_current_word=function(e){var t=this.cur_word_index+1;if(null==this.words[t]){if(this.has_started)return void this.end_lesson();this.events.fire_event("abort",{all_words_long:!0})}this.cur_word_index=t,this.events.fire_event("word_changed",{next_word:this.words[this.cur_word_index],index:this.cur_word_index})},m.prototype.goto_prev_char=function(){return this.cur_char_index>=0&&this.cur_char_index--,this.cur_char=this.chars[this.cur_char_index],this.cur_char.word_index!=this.cur_word_index&&(this.cur_word_index=this.cur_char.word_index,this.events.fire_event("word_changed",{next_word:this.words[this.cur_word_index],index:this.cur_word_index})),this.cur_char},m.prototype.goto_next_char=function(){return this.cur_char_index<this.text.length-1&&(this.cur_char_index++,this.cur_char=this.chars[this.cur_char_index],this.cur_char.word_index!=this.cur_word_index&&(this.cur_word_index=this.cur_char.word_index,this.events.fire_event("word_changed",{next_word:this.words[this.cur_word_index],index:this.cur_word_index})),this.cur_char)},m.prototype.reset_stats=function(){this.stats={duration:this.is_test&&this.stats?this.stats.duration:0,valids:0,errors:0,total_chars:0}},m.prototype.attach_capture=function(){this.capturing||(this._keydown_handler=function(e){this.keydown_evt(e)}.bind(this),(0,a.default)(document).keydown(this._keydown_handler),this.no_input_mode?((0,s.setTimeout)((function(){return document.activeElement&&document.activeElement.blur()})),(0,a.default)(document).keypress(this.bound_keypress_handler),this.handle_special_punctuation||(this.$ios_keyboard=(0,a.default)("<div />",{class:"edicon-keyboard",click:function(){this.detach_capture(),this.no_input_mode=!1,this.user_selected_input_mode=!0,this.init_keyboard_focus(),this.attach_capture()}.bind(this)}).css({borderTopLeftRadius:6,borderTopRightRadius:6,position:"fixed",padding:15,boxShadow:"0 -1px 10px rgba(0,0,0,0.6)",width:80,textAlign:"center",background:"#444",color:"white",zIndex:1001,fontSize:22,marginLeft:-40,left:"50%",bottom:-5}),(0,a.default)("body").append(this.$ios_keyboard))):(this.$focus_input.on("input",this.bound_input_handler),this.$focus_input.keydown(this.bound_input_handler_keydown),this.$focus_input.keyup(this.bound_input_handler_keyup)),this.capturing=!0,this.events.fire_event("attached"),0==this.cur_char_index&&this.events.fire_event("word_changed",{next_word:this.words[this.cur_word_index],index:this.cur_word_index}),this.prev_key=null)},m.prototype.detach_capture=function(e){this.capturing&&((0,a.default)(document).unbind("keydown",this._keydown_handler),this.no_input_mode?((0,a.default)(document).unbind("keypress",this.bound_keypress_handler),this.$ios_keyboard&&this.$ios_keyboard.remove(),this.$ios_keyboard=null):(this.$focus_input.unbind("input",this.bound_input_handler),this.$focus_input.unbind("keydown",this.bound_input_handler_keydown),this.$focus_input.unbind("keyup",this.bound_input_handler_keyup)),this.capturing=!1,this.events.fire_event("detached"),e&&this.remove_focus_input())},m.prototype.remove_focus_input=function(){this.$focus_input&&this.$focus_input.remove()},m.prototype.init_keyboard_focus=function(){var e=this.$focus_input=(0,a.default)("<input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' autofocus />");e.attr("aria-hidden",!0),e.css({outline:"none",color:"white",border:"white",position:"fixed",fontSize:"1px",left:"50%",top:"-21px"}),window.approuter&&approuter.events.on("unload",this.remove_focus_input.bind(this)),this.dead_key_active=!1,this.keyDown=-1,this.lastComposedInput="",this.lastInputTime=null,(0,a.default)("body").prepend(e);var t=function(){var t=document.getElementById("adl-ad-report-modal");if(t){if("block"===t.style.display&&this.capturing)return this.detach_capture(),void(this.detached_by_report_ad=!0);"none"===t.style.display&&this.detached_by_report_ad&&(this.detached_by_report_ad=!1,this.attach_capture())}this.capturing&&(!e.is(":focus")||e.val().length>1||!this.lastComposedInput)&&(!s.isIOS||e.is(":focus")||this.$ios_focus_div&&this.$ios_focus_div[0].parentNode?e[0].focus():this.$ios_focus_div=s.show_ios_focus_popup((0,l.t)("Touch here to start"),e),e.val(""))}.bind(this);this.events.on("attached",function(){s.isIOS&&!this.user_selected_input_mode&&(this.$ios_focus_div=s.show_ios_focus_popup((0,l.t)("Touch here to start"),e)),e[0].focus()}.bind(this)),this.events.on("detached",function(){e[0].blur(),this.$ios_focus_div&&this.$ios_focus_div.remove()}.bind(this)),(0,s.setInterval)(t,500)},m.prototype.idkfa=function(e,t){e=e||500;var r=this.cur_char_index,n=t+r||this.text.length,a={keydown_msecs:0,keydown_count:0},o=new Date,i=function(t){if(t!=n)a.keydown_count++,this.record_keydown_time(this.chars[t].chr,e),(0,s.setTimeout)((function(){i(t+1)}));else{a.keydown_msecs=new Date-o;var r=a.keydown_msecs/a.keydown_count;console.log("%c"+r.toFixed(2)+"ms/key","background: #257107; color: white; font-size:22px;")}}.bind(this);i(r)},m.prototype.replay_history=function(e,t){var r=function(n,a){if(a=a||e[n])if(this.beat(),(0,o.default)(a)){if(a[0]&&this.record_keydown_time(a[0],a[1],!1),!t){var i=n+1,u=e[i];if(!u)return void this.end_lesson();this.play_next_timeout_id=(0,s.setTimeout)((function(){return r(i)}),u[1]/this.playback_speed)}}else"focus"==a.action&&this.jump_focus(a.i),t||r(n+1);else this.end_lesson()}.bind(this);if(t){var n,a=p(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;r(0,i)}}catch(e){a.e(e)}finally{a.f()}this.end_lesson()}else r(0);this.stop_beater()},m.prototype.keydown_evt=function(e){var t=e||window.event,r=t.keyCode||t.which,n=e.ctrlKey||e.metaKey;switch(this.$focus_input&&this.$focus_input.focus(),r){case u.default.backspace:e.preventDefault(),this.record_keydown_time("<-");break;case u.default.enter:e.preventDefault(),this.record_keydown_time("\n");break;case u.default.tab:e.preventDefault(),this.record_keydown_time("\t");break;case u.default.p:n&&(e.preventDefault(),this.toggle_pause());break;case u.default.space:this.no_input_mode&&s.isIOS&&(e.preventDefault(),this.record_keydown_time(" "))}},m.prototype._keypress_handler=function(e){this.record_keydown_time(e.key||String.fromCharCode(e.keyCode))},m.prototype._input_handler=function(e){if(this.keyDown<0&&(this.dead_key_active=!0,this.events.fire_event("keydown",{deadkey:!0,key_code:229,delay:0,is_valid:!0})),[8,13,9].indexOf(this.keyDown)>=0&&(this.keyDown=-1),s.isSafari){if("insertCompositionText"==e.originalEvent.inputType)return this.lastComposedInput=this.$focus_input.val(""),void this.events.fire_event("keydown",{deadkey:!0,key_code:229,delay:0,is_valid:!0});"insertText"==e.originalEvent.inputType&&this.keyDown<0&&(this.keyDown=0)}if(s.isFirefox&&!e.originalEvent.isComposing&&this.keyDown<0&&(this.keyDown=0),this.keyDown>=0){var t=this.$focus_input.val();if("﷼"==this.cur_char.chr&&t.length>0){var r="ریال";if(0==r.indexOf(t)){if(t!=r)return;t="﷼"}}var n=new Date;this.lastInputTime||(this.lastInputTime=n);this.lastInputTime;if(this.lastInputTime=n,t.length>0){var a,o=t[t.length-1],i=null;(function(e){return!(e.length<2)&&("ل"==e[0]||("ို"==e||("ော"==e||("ော်"==e||"င်္"==e))))})(t)&&(o=t[0],i=t[1],a=t[2],this.dead_key_active=!1);var u=this.is_valid(o);if(u||!this.dead_key_active||this.lastComposedInput){if(!h||this.prev_key!=o){if(!this.record_keydown_time(o))return;if(u&&i&&(o=i,!this.record_keydown_time(o,0)))return;if(u&&a&&(o=a,!this.record_keydown_time(o,0)))return;this.prev_key=o}this.$focus_input.val(""),this.lastComposedInput=""}else this.dead_key_active?(this.lastComposedInput=t,this.events.fire_event("keydown",{deadkey:!0,chr:t,delay:0,is_valid:!0})):this.lastComposedInput="";"ل"===t&&u||(this.keyDown=-1)}else this.lastComposedInput=""}},m.prototype._input_handler_keydown=function(e){if(this.anchor_key&&!e.metaKey&&!e.ctrlKey){if((e.key||String.fromCharCode(e.keyCode)).toLowerCase()==this.anchor_key)return this.is_anchoring||(this.is_anchoring=!0,this.events.fire_event("anchor_start",{})),void e.preventDefault();if(!this.is_anchoring)return void e.preventDefault()}this.dead_key_active=229==e.keyCode||"Dead"==e.key||"Unidentified"==e.key,s.isSafari&&this.dead_key_active?this.keyDown=-1:(this.keyDown=e.keyCode,(this.use_hand&&(16==e.keyCode||18==e.keyCode)||this.dead_key_active)&&this.events.fire_event("keydown",{deadkey:!0,key_code:e.keyCode,delay:0,is_valid:!0}))},m.prototype._input_handler_keyup=function(e){var t=this;if((this.prev_key=null,this.anchor_key)&&(e.key||String.fromCharCode(e.keyCode)).toLowerCase()==this.anchor_key)return this.is_anchoring=!1,this.events.fire_event("anchor_stop",{}),void e.preventDefault();var r=function(e){t.prev_capslock_detected!=e&&(t.prev_capslock_detected=e,t.events.fire_event("capslock_detected",e))};if(!this.ignore_case){var n=e.key||String.fromCharCode(e.keyCode)||"";1==n.length?n.toLowerCase()==n.toUpperCase()||e.shiftKey||r(n.toUpperCase()==n):"capslock"==n.toLowerCase()&&r(!1)}};var y=m;t.default=y},76869:(e,t,r)=>{r(92222),r(43290),r(69826),r(91038),r(82772),r(66992),r(21249),r(65069),r(19601),r(41539),r(88674),r(24603),r(74916),r(39714),r(70189),r(27852),r(78783),r(4723),r(15306),r(64765),r(23123),r(23157),r(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=m(r(47642)),a=m(r(63137)),o=m(r(1469)),i=m(r(69606)),s=m(r(47414)),u=m(r(48583)),l=m(r(19851)),c=r(66358),f=r(95343),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(71327)),d=m(r(75933));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=g(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){return new Promise((function(t){e.one("load",(function(){t(e)})).one("error",(function(){t(null)}))}))}function w(e,t,r){function n(){e.removeEventListener(t,a)}function a(e){n(),r(e)}return e.addEventListener(t,a),n}function k(e,t,r,a,o,s,l,c,f){this.elm=(0,i.default)(e),this.keys=[],this.char_to_key_mapping={},this.show_hand=a,this.show_keyboard=r,this.shift_key_pressed=!1,this.alt_key_pressed=!1,this.keyboard_layout_file_id=o||0,this.state="none",this.use_hand=s,this.callback_when_loaded=l,this.events=new n.default(["highlight_finger","layout_updated","possible_keyboard_mismatch"]),this.theme=c,this.one_char_per_key=f,this.is_svg_loaded=!1,this.is_unloading=!1,(0,u.default)(t,"missing schema name"),this.load_schema(t),this.gotham_rounded_loaded=!1,this.keyboard_layout_file_id%100==7&&r&&(this.load_gotham_rounded(),this.gotham_rounded_loaded=!0)}function x(e){var t=e.match(/\{\{.\}\}/);if(t)return t[0].replace("{{","").replace("}}","")}function j(e,t,r,n){if(this.modifier_char_map=t,this.build_char_to_modifier_map(),this.layout_data=e,this.is_special_key=n,r){var a=r.find("#"+e.key_id);a.length&&(this.svg_keybox=a[0])}}function O(e,t){return!!e&&(e.classList?e.classList.contains(t):!!((0,i.default)(e).attr("class")||"").match(new RegExp("(\\s|^)"+t+"(\\s|$)")))}function E(e,t){e.classList?e.classList.add(t):O(e,t)||(0,i.default)(e).attr("class",(0,i.default)(e).attr("class")+" "+t)}function S(e,t){if(e.classList)e.classList.remove(t);else if(O(e,t)){var r=new RegExp("(\\s|^)"+t+"(\\s|$)");(0,i.default)(e).attr("class",(0,i.default)(e).attr("class").replace(r," "))}}function P(e){return e.toUpperCase()!=e?1:"_"==e?6:",.".indexOf(e)>-1?4:";:/§".indexOf(e)>-1?2:"\\*".indexOf(e)>-1?-2:0}function C(e,t,r,n,a){e.textContent;t+=(n-e.getBoundingClientRect().width)/2,e.setAttribute("dx",t),r+=P(a)-P(e.textContent),e.setAttribute("dy",r)}function N(e,t,r){e.textContent;var n=t-e.getBoundingClientRect().width;e.setAttribute("dx",n)}k.prototype.release=function(){this.is_unloading=!0,this.pointer&&this.pointer.hide()},k.prototype.show_both=function(){return this.show_keyboard&&this.show_hand},k.prototype.show_both_standalone=function(){return this.show_keyboard&&this.show_hand&&this.keyboard_options().is_standalone_hands},k.prototype.show_hands_only=function(){return!this.show_keyboard&&this.show_hand},k.prototype.show_keyboard_only=function(){return this.show_keyboard&&!this.show_hand},k.prototype.show_neither=function(){return!this.show_keyboard&&!this.show_hand},k.prototype.load_schema=function(e){((0,u.default)(-1!=e.search(","),'Invalid keyboard schema name "'.concat(e,'". Should be <language-code>,<keyboard-schema>')),this.schema_name=e,"zh,pinyin"==e)?this.special_input_punctuation_map=p.pinyin_input_punctuation_map():"kanji"==(((window.approuter||{}).lesson||{}).activity||{}).format&&(this.special_input_punctuation_map=p.jp_input_punctuation_map());var t=v(e.split(","),2);this.schema_lang=t[0],this.schema_key=t[1];var r=new Promise((function(t,r){i.default.ajax({url:"".concat("/m/","engine/keyboards/schema/").concat(e,".json"),dataType:"json",success:t,error:r})}));this.loading=r.then(this.init_kb_and_hands.bind(this)),this.key_not_found=0},k.prototype.init_kb_and_hands=function(e,t){var r;return this.elm.empty(),this.schema=e,this.layout=T,this.cur_active_modifier_key=null,this.cur_second_active_modifier_key=null,this.cur_active_key=null,this.show_keyboard&&this.keyboard_options().is_standalone_hands?r=Promise.all([this.init_keyboard(),this.init_standalone_hands(t)]):this.show_keyboard?r=this.init_keyboard():this.show_hand?(this.init_keys(),r=this.init_standalone_hands(t)):(this.init_keys(),r=Promise.resolve()),r.then(function(){if(this.cur_char)this.highlight(this.cur_char);else if("bone"==this.theme){var e=core.cur_char.chr,t=k.special_key_to_char_map[e]||e;this.focus_row_for_char(t)}this.show_keyboard&&this.show_hand&&c.gsap.to(this.$hands,{delay:.5,duration:.4,opacity:.8})}.bind(this)),r},k.prototype.init_keyboard=function(){var e=this.init_dom_setup().then(function(e){return this.is_svg_loaded=!0,this.svg_class=this.$object_elm[0].getElementsByTagName("svg")[0].getAttribute("class"),this.set_theme(this.theme),this.$kb_svg=(0,i.default)(this.$object_elm[0]),this.$hands_svg=this.$hands[0].getSVGDocument(),this.init_keys(),this.render(),e}.bind(this));return this.callback_when_loaded?e.then(this.callback_when_loaded):e},k.prototype.load_gotham_rounded=function(){this.gotham_rounded_loaded||d.default.load({custom:{families:["GothamRounded-Bold"],urls:["https://static.typingclub.com/m/corp2/css/font-gotham-rounded.css"]},classes:!1})},k.prototype.set_theme=function(e){var t=window.approuter&&approuter.profile&&approuter.profile.is_blind?" is-blind":"";if(this.theme=e,this.$hands&&this.$hands[0]&&this.$hands[0].getSVGDocument()){var r=this.$hands[0].getSVGDocument().getElementsByTagName("svg")[0],n=this.$object_elm[0].getElementsByTagName("svg")[0];this.keyboard_layout_file_id%100==7?(this.load_gotham_rounded(),r.setAttribute("class","kb-colorful")):e?r.setAttribute("class","theme-"+e):r.setAttribute("class",""),e||t?n.setAttribute("class",this.svg_class+(e?" theme-"+e:"")+t):n.setAttribute("class",this.svg_class)}},k.prototype.height=function(){return this.show_keyboard&&this.show_hand&&this.keyboard_options().is_standalone_hands?505:this.show_keyboard&&this.show_hand?320:this.show_keyboard||this.show_hand?200:10},k.prototype.apply_settings=function(e,t,r,n,a,o){this.show_keyboard=e,this.show_hand=t,this.keyboard_layout_file_id=n,this.use_hand=a,this.theme=o,r!=this.schema_name?this.load_schema(r):this.init_kb_and_hands(this.schema,!0)},k.prototype.get_key_for_char=function(e){var t;if(k.special_key_to_char_map[e]){var r=k.special_key_to_char_map[e];t=this.char_to_key_mapping[r]}else t=this.char_to_key_mapping[e];return t},k.prototype.get_fill_color_for_char=function(e){var t=this.get_key_for_char(e);if(t)return window.getComputedStyle(t.svg_keybox).fill},k.prototype.handle_keydown_event=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;e.deadkey?e.key_code&&this.set_mod_keys(e.key_code):(this.reset_state_and_mods(),this.attempted_key(e.chr)),this.highlight(t,r,n,a)},k.prototype.attempted_key=function(e,t){var r=this.get_key_for_char(e);r&&(this.highlighted_chr&&this.highlighted_chr[0]==e||t?r.animate_correct():r.animate_incorrect())},k.prototype.keyboard_options=function(){return function(e){switch(e){case 11:case 12:case 13:case 14:return{is_whimsical:!0,is_standalone_hands:!0,has_pointer:!0,width:680,className:"keyboard-junior"};default:return{is_whimsical:!1,is_standalone_hands:!1,has_pointer:!1,width:685}}}(this.keyboard_layout_file_id)},k.prototype.init_dom_setup=function(){var e=this,t=[];p.isIOS&&7===this.keyboard_layout_file_id&&(this.keyboard_layout_file_id=0);var r=this.keyboard_layout_file_id+(this.iso_layout()?100:this.jis_layout()?200:this.ansi_hp_layout()?300:0);this.$object_elm=(0,i.default)("<div/>").attr("tabindex","-1"),this.$object_elm.attr("id","vkeyboardkeys"),t.push(new Promise((function(t,n){i.default.ajax({url:"".concat("/m/","engine/img/keyboard-layout/").concat(T.svg_files[r]),dataType:"html",success:function(r){e.$object_elm[0].innerHTML=r,t()},error:n})}))),this.elm.append(this.$object_elm);var n=this.use_hand?this.use_hand:"both";this.$hands=(0,i.default)("<object />").attr("type","image/svg+xml").attr("tabindex","-1"),t.push(b(this.$hands)),this.$hands.attr("data","".concat("/m/","engine/img/hand/hand-").concat(n,".svg")),this.$hands.css({position:"absolute",pointerEvents:"none",height:363,top:-10,left:0,opacity:0,transform:"translateX(55px) scale(1.55)"}),this.elm.append(this.$hands),("bone"==this.theme||this.keyboard_options().has_pointer)&&(this.pointer=new l.default("bone"==this.theme?"glowing":null),t.push(this.pointer.attach(this.elm)));var a=this.keyboard_options().width;return this.elm.css({width:a,position:"relative"}),this.$object_elm.css("width",a),Promise.all(t)},k.prototype.focus_hand=function(e,t){var r=this.$hands_svg;if(r){for(var n=[!1,!1],a=[null,null],o=0,i=Array.from(r.querySelectorAll(".st0"));o<i.length;o++){var s=i[o];"neutral-left"==s.id&&(a[0]=s),"neutral-right"==s.id&&(a[1]=s),s.id==e||s.id==t?(s.style.display="block",n[s.id==e?0:1]=!0):s.style.display="none"}for(var u=0;u<2;u++)!n[u]&&a[u]&&(a[u].style.display="block")}},k.prototype.fire_highlight_finger_event=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.get_key_for_char(e);if(r){var n,a=e.startsWith("dk");n=this.use_hand?{state:this.state,modifier:"no-hand"}:r.char_modifier_map[e]||{state:this.state,modifier:" "};var o=this.iso_layout()&&r.layout_data.iso_hint||r.layout_data.hint;if(o){var i=x(o);if(i){var u=this.qchar_to_char_mapping[i];";"==u&&(u=(0,f.t)("semicolon")),o=(0,f.t)(o,{[i]:u})}else o=(0,f.t)(o)}var l=(0,f.t)(s.default.trans_chr_to_text(e));if(1==l.length&&l.toUpperCase()!=l.toLowerCase()&&l.toUpperCase()==l&&(l=(0,f.t)("capital {{character}}",{character:l})),a){l=e.replace("dk","");var c=(0,f.t)("First")}else if(t)c="Next";else c=(0,f.t)("To type {{key}}",{key:l});if(" "!=n.modifier){var p=1==r.layout_data.hand?(0,f.t)("right"):(0,f.t)("left"),d=(0,f.t)("hold the {{right_or_left}} {{key}} and",{key:(0,f.t)(s.default.trans_chr_to_text(n.modifier)),right_or_left:p});o="".concat(c,", ").concat(d," ").concat(o)}else o="".concat(c,", ").concat(o);this.events.fire_event("highlight_finger",{chr:e,hint:o})}},k.prototype.highlight_finger=function(e){if(!this.is_svg_loaded)return setTimeout(function(){this.highlight_finger(e)}.bind(this),100);var t,r,n=this.get_key_for_char(e);if(n){var a;a=this.use_hand?{state:this.state,modifier:"no-hand"}:n.char_modifier_map[e]||{state:this.state,modifier:" "};var o=this.iso_layout()&&n.layout_data.iso_key_id||this.ansi_hp_layout()&&n.layout_data.ansi_hp_key_id||this.jis_layout()&&n.layout_data.jis_key_id||n.layout_data.key_id;t=1==n.layout_data.hand?o:this.pc_os()&&a.modifier.endsWith("opt")?"shift+opt"==a.modifier?"shift-left":"neutral-left":T.modifier[a.modifier].left,r=2==n.layout_data.hand?o:T.modifier[a.modifier].right}else console.warn("Missing key for ("+e+")"),t="neutral-left",r="neutral-right";this.focus_hand(t,r),this.hands_visible||(this.hands_visible=!0,this.$hands.show().fadeIn(1e3))},k.prototype.render=function(e){if((!e||this.schema.keymap[e.modifier])&&(!e||this.current_render_modifier!=e.modifier||this.state!=e.state||this.schema_name!=this.rendered_schema_name)){e||(e={state:this.state,modifier:" "}),this.rendered_schema_name=this.schema_name,this.current_render_modifier=e;for(var t=0,r=this.keys.length;t<r;t++){var n=this.keys[t],a=this.keyboard_layout_file_id%100==7;n.render(this.$kb_svg,e,n==this.cur_active_key,!1,this.schema.magnify_keys,a)}}},k.finger_modifier_map={1:{shift:"shift-right",opt:"option-right"},2:{shift:"shift-left",opt:"option-left"}},k.special_key_to_char_map={"\n":"enter"," ":"space","\t":"tab"},k.prototype.highlight=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null!==(t=approuter.program)&&void 0!==t&&t.is_junior&&(e=e.toLowerCase()),!this.is_unloading){if(this.show_keyboard&&!this.is_svg_loaded)return setTimeout(function(){this.highlight(e,r,n,a)}.bind(this),100);var o=null;if(!this.one_char_per_key&&n){var i=e+n.chr;"ل"!=e&&"ို"!=i&&"ော"!=i&&"င်္"!=i||(o=i),a&&"ော်"==(i+=a.chr)&&(o=i)}if(o?(e=this.char_to_key_mapping[o]?o:e,r=!1):this.special_input_punctuation_map&&(e=this.special_input_punctuation_map[e]||e),this.cur_char=e,this.show_keyboard?(this.highlight_keyboard(e),this.show_hand&&this.keyboard_options().is_standalone_hands?this.highlight_standalone_hands(e):this.show_hand&&this.highlight_finger(this.highlighted_chr)):this.show_hand&&this.highlight_standalone_hands(e),this.highlighted_chr&&(this.fire_highlight_finger_event(this.highlighted_chr,r),"bone"==this.theme)){var s=k.special_key_to_char_map[e]||e;this.focus_row_for_char(s)}}},k.SHIFT_KEY_CODE=16,k.ALT_KEY_CODE=18,k.prototype.reset_state_and_mods=function(){this.state="none",this.shift_key_pressed=!1,this.alt_key_pressed=!1},k.prototype.set_mod_keys=function(e){e==k.SHIFT_KEY_CODE&&(this.shift_key_pressed=!this.shift_key_pressed),e==k.ALT_KEY_CODE&&(this.alt_key_pressed=!this.alt_key_pressed)},k.prototype.colour_keyboard=function(e,t,r){var n,o=(0,a.default)(k.special_key_to_char_map),i=y(this.keys);try{var s=function(){var a=n.value,i=a.modifier_char_map[" "];"object"==typeof i&&(i=i[0].o),i in o&&(i=o[i]),i==t?a.colour("orange"):e[i]?a.colour(e[i],r&&function(){return r(i)}):a.colour("white")};for(i.s();!(n=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}},k.prototype.highlight_keyboard=function(e){this.highlighted_chr=e,this.cur_active_modifier_key&&(this.cur_active_modifier_key.remove_highlight("active"),this.cur_active_modifier_key=null),this.cur_second_active_modifier_key&&(this.cur_second_active_modifier_key.remove_highlight("active"),this.cur_second_active_modifier_key=null),this.cur_active_key&&(this.cur_active_key.remove_highlight("active"),this.cur_active_key.remove_highlight("deadkey"));var t=this.get_key_for_char(e);if(!t)return this.key_not_found++,3==this.key_not_found&&this.events.fire_event("possible_keyboard_mismatch"),void console.warn("Did not find a key for",e);var r=t.char_modifier_map[e];if(!r)switch(e){case" ":case"\n":case"\t":r={state:"none",modifier:" "};break;default:return}var n=!1,a=null;if(r.state!=this.state)if(a=this.state,"none"==r.state)a="none";else if("none"==this.state){if(a=r.state,this.highlighted_chr="dk"+this.schema.terminators[a],!(t=this.state_to_key_mapping[a]))throw"No key mapping for state "+a+". chr="+e+". kb="+this.schema.name+","+this.schema.layout;r=t.char_modifier_map[this.highlighted_chr],n=!0}else a="none";var o=!1;if(" "!=r.modifier){var i,s,u,l=r.modifier.split("+").reverse(),c=1==t.layout_data.hand?"left":"right",f=y(l);try{for(f.s();!(u=f.n()).done;){var p=u.value;if(this.use_hand){if("shift"==p&&!this.shift_key_pressed){o=!0,this.highlighted_chr="shift-"+c,t=this.char_to_key_mapping[this.highlighted_chr];break}if("opt"==p&&!this.alt_key_pressed){o=!0,this.highlighted_chr="option-"+c,t=this.char_to_key_mapping[this.highlighted_chr];break}}else{var d="opt"==p&&this.pc_os()?1:t.layout_data.hand;(i=k.finger_modifier_map[d][p])||console.warn("Missing modifier key:",p,t),(s=this.char_to_key_mapping[i]).highlight("active"),this.cur_active_modifier_key?this.cur_second_active_modifier_key=s:this.cur_active_modifier_key=s}}}catch(e){f.e(e)}finally{f.f()}}a&&!o&&(this.state=a),this.cur_active_key&&this.cur_active_key.render(this.$kb_svg,r,!1,!0,this.schema.magnify_keys),this.cur_active_key=t,this.render(r);var h=this.keyboard_options().has_pointer,m=null;h&&(m="space"==t.layout_data.key_id?"monkey_spacebar2":"enter"==t.layout_data.key_id?"monkey_enter":"monkey_halo2"),(h||"bone"==this.theme)&&this.pointer.focus(t.svg_keybox,this.$object_elm,m),t.highlight("active"),n&&t.highlight("deadkey")},k.prototype.get_finger_for_char=function(e){var t=this.get_key_for_char(e);if(!t)return null;var r="left"==this.use_hand?"l":"right"==this.use_hand?"r":"";return t.layout_data[r+"fin"]},k.prototype.highlight_standalone_hands=function(e){var t=this.get_finger_for_char(e);if(!t)return this.key_not_found++,3==this.key_not_found&&this.events.fire_event("possible_keyboard_mismatch"),void console.warn("Can't find finger for",e);(0,i.default)("#hand .visible").hide().removeClass("visible"),(0,i.default)("#hand #f"+t).show().addClass("visible")},k.prototype.init_standalone_hands=function(e){var t=[],r=380,n=(0,i.default)("<div />").attr("id","hand").css({width:r,height:200,position:"absolute",overflow:"hidden",left:"50%",marginTop:-5,marginLeft:-190}).hide(),a={position:"absolute",width:r},o=(0,i.default)("<img/>").attr("id","handimg").css(a);t.push(b(o));var s;o.attr("src","".concat("/m/","engine/img/hand/k_hands").concat("en"===(s=approuter.program.locale.split("_")[0])?"_en":"es"===s?"_es":"",".svg")),n.append(o);for(var u=1;u<=10;u++){var l=(0,i.default)("<img/>").attr("id","f".concat(u)).addClass("finger").css(a).hide();t.push(b(l)),l.attr("src","".concat("/m/","engine/img/hand/k_").concat(u,".svg")),n.append(l)}return this.use_hand&&n.css({width:190,marginLeft:-80}),"right"==this.use_hand&&n.children().css({marginLeft:-190}),this.elm.append(n),e?n.show():n.delay(1500).fadeIn("slow"),Promise.all(t)},k.prototype.init_keys=function(){this.keys=[];var e,t=this.schema,r={0:{},1:{},2:{},3:{}};for(var n in t.keymap){e=t.keymap[n];for(var a=0;a<e.length;a++)for(var i=r[a],s=e[a],u=0,l=s.length;u<l;u++)i[u]||(i[u]={}),i[u][n]=s[u],(0,o.default)(s[u])&&s[u].length>0&&"->"in s[u][0]&&(i[u].state||(i[u].state=[]),i[u].state.push(s[u][0]["->"]),i[u][n][0].o="dk"+t.terminators[s[u][0]["->"]])}this.state_to_key_mapping={};for(var c=function(e,t,r){var n=e.char_modifier_map[r],a=t.char_modifier_map[r];if(n.state!=a.state){if("none"==n.state)return!1;if("none"==a.state)return!0}var o={" ":0,shift:1,opt:2,"shift+opt":3};return o[a.modifier]<o[n.modifier]},f=0,p=T.rows.length;f<p;f++)for(var d=-1,h=(u=0,(a=T.rows[f]).length);u<h;u++){var m=a[u];if("iso-key"==m.key_id&&"jis"==t.layout&&(m=a[u+1]),m.special_key){var y={" ":m.key_id};if("space"==m.key_id)for(var v in y[" "]=[{o:"space",s:"none"}],y.shift="‌",t.terminators)y[" "].push({o:t.terminators[v],s:v});var g=new j(m,y,this.$kb_svg,!0);this.keys.push(g)}else if(m.qchar){if(d++,r[f][d]&&(g=new j(m,r[f][d],this.$kb_svg)),g&&(this.keys.push(g),g.modifier_char_map.state)){var _=g.modifier_char_map.state;for(var b in _){var w=_[b];if(w in this.state_to_key_mapping){var k="dk"+this.schema.terminators[w];if(!c(this.state_to_key_mapping[w],g,k))continue}this.state_to_key_mapping[_[b]]=g}}}else console.warn("Layout issue: Must either have qchar or special_key",m)}this.char_to_key_mapping={};var x={};this.qchar_to_char_mapping={};for(u=0,l=this.keys.length;u<l;u++){g=this.keys[u];for(var O in g.char_modifier_map){if(!(O in this.char_to_key_mapping)||c(this.char_to_key_mapping[O],g,O)){this.char_to_key_mapping[O]=g;var E=g.char_modifier_map[O];" "==E.modifier&"none"==E.state&&(this.qchar_to_char_mapping[g.layout_data.qchar]=O)}}g.layout_data.qchar?(x[g.layout_data.qchar.toLowerCase()]=g,x[g.layout_data.qchar.toUpperCase()]=g,g.layout_data.qchartop&&(x[g.layout_data.qchartop]=g)):x[g.layout_data.key_id]=g}if(this.$kb_svg){this.pc_os()&&(this.$kb_svg.find("#text-option-left")[0].textContent="alt",this.$kb_svg.find("#text-option-right")[0].textContent="alt gr");var S=this.$kb_svg.find("text");for(u=0,l=S.length;u<l;u++){var P=S[u];if(!(g=x[O=P.textContent])&&(O=P.id.replace("text-",""),g=this.char_to_key_mapping[O],this.schema.labels&&this.schema.labels[O])){var C=P.getBoundingClientRect().width,R=P.textContent;P.textContent=this.schema.labels[O],~["shift-right","backspace","enter"].indexOf(O)&&N(P,C,R)}P.setAttribute("class",P.getAttribute("class")+" st2"),g&&g.set_svg_text(P)}}this.events.fire_event("layout_updated",{})},k.prototype.get_anchor_chars=function(){return[this.qchar_to_char_mapping.f,this.qchar_to_char_mapping.j]},k.prototype.detect_anchoring_hand=function(e){var t,r=new Set,n=y(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(" "!=a){var o=this.char_to_key_mapping[a];o&&r.add(o.layout_data.hand)}}}catch(e){n.e(e)}finally{n.f()}if(1==r.size){var i,s=y(r);try{for(s.s();!(i=s.n()).done;){return{1:"left",2:"right"}[i.value]}}catch(e){s.e(e)}finally{s.f()}}},j.prototype.build_char_to_modifier_map=function(){function e(e,t,r,n){if(t in e){var a=e[t].modifier;if("shift"==a&&"opt"==n||a.length<n.length)return}e[t]={state:r,modifier:n}}var t=this.char_modifier_map={},r=this.modifier_char_map;for(var n in r){var a=r[n];if(null==a);else if("string"==typeof a)e(t,a,"none",n);else for(var o=0,i=a.length;o<i;o++){var s=a[o];s.o&&e(t,s.o,s.s,n)}}},j.prototype.set_svg_text=function(e){var t=e.textContent;this.layout_data.qchartop&&this.layout_data.qchartop==t?(this.svg_text_top=e,this.svg_text_top_width=this.svg_text_top.getBoundingClientRect().width):(this.svg_text=e,this.svg_text_width=this.svg_text.getBoundingClientRect().width)},j.prototype.colour=function(e,t){if(this.svg_keybox&&(this.svg_keybox.style.fill=e,"white"!=e)){var r=(0,i.default)(this.svg_keybox);E(this.svg_keybox,"clickable"),t&&r.on("click",t)}this.svg_text&&Object.assign(this.svg_text.style,{fill:"black","pointer-events":"none"}),this.svg_text_top&&Object.assign(this.svg_text_top.style,{fill:"black","pointer-events":"none"})},j.prototype.highlight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";this.svg_keybox&&(this.svg_keybox&&E(this.svg_keybox,e),this.svg_text&&E(this.svg_text,e),this.svg_text_top&&E(this.svg_text_top,e))},j.prototype.highlight_animated=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;function r(r){if(r){var n;E(r,e);var a=setTimeout((function(){S(r,e),n&&n()}),t);n=w(r,"animationstart",(function(){clearTimeout(a),w(r,"animationend",(function(){S(r,e)}))}))}}this.svg_keybox&&(r(this.svg_keybox),r(this.svg_text),r(this.svg_text_top))},j.prototype.remove_highlight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";this.svg_keybox&&(this.svg_keybox&&S(this.svg_keybox,e),this.svg_text&&S(this.svg_text,e),this.svg_text_top&&S(this.svg_text_top,e))},j.prototype.get_modifier_char=function(e){var t=this.modifier_char_map[e.modifier];if((0,o.default)(t)){for(var r=t,n=0,a=r.length;n<a;n++)if(e.state==r[n].s&&r[n].o)return r[n].o.startsWith("dk")?r[n].o.substr(2):r[n].o;if("none"!=e.state)for(n=0,a=r.length;n<a;n++)if("none"==r[n].s&&r[n].o)return r[n].o.startsWith("dk")?r[n].o.substr(2):r[n].o;return"#"}return t},j.prototype.render=function(e,t,r,n,a,o){var i=this;if(this.svg_text&&!this.is_special_key&&(n||r||!this.current_render_modifier||this.current_render_modifier.modifier!=t.modifier||this.current_render_modifier.state!=t.state)){this.current_render_modifier=t;var s=t.modifier.indexOf("opt")>-1,u=t.modifier.indexOf("shift")>-1,l=this.svg_text.classList.contains("focus-row");this.svg_text.textContent=this.get_modifier_char({modifier:" ",state:t.state}),this.svg_text_top&&(this.svg_text_top.textContent=s?this.get_modifier_char(t):this.get_modifier_char({modifier:"shift",state:t.state}));var c=0,f=0,p=0,d=0;a||s||!o&&this.svg_text_top&&this.svg_text_top.textContent&&!function(){if(i.svg_text.textContent.toUpperCase()===i.svg_text_top.textContent)return!0;return{i:"İ"}[i.svg_text.textContent]===i.svg_text_top.textContent}()?a||s?s||u?(this.svg_text_top&&this.svg_text_top.setAttribute("class","st1 st2 b"),this.svg_text.setAttribute("class","st1 st2"),d=16,p=5,c=-10,f=-22):(this.svg_text_top&&this.svg_text_top.setAttribute("class","st1 st2"),this.svg_text.setAttribute("class","st1 st2 b"),d=-1,p=-12,c=6,f=-3):(this.svg_text_top&&this.svg_text_top.setAttribute("class","st1 st2"),this.svg_text.setAttribute("class","st1 st2")):(this.svg_text_top&&this.svg_text_top.setAttribute("class","st1"),this.svg_text.setAttribute("class","st1 st2 b"),c+=1,f-=6,u&&(this.svg_text.textContent=this.get_modifier_char({modifier:"shift",state:t.state})));".,".indexOf(this.svg_text.textContent)>-1&&this.svg_text.setAttribute("class","st1 st2 b2"),this.svg_text_top&&".,".indexOf(this.svg_text_top.textContent)>-1&&this.svg_text_top.setAttribute("class","st1 st2 b2"),C(this.svg_text,c,f,this.svg_text_width,this.layout_data.qchar),this.svg_text_top&&"none"!=this.svg_text_top.style.display&&C(this.svg_text_top,p,d,this.svg_text_top_width,this.layout_data.qchartop),l&&(this.svg_text_top&&this.svg_text_top.classList.add("focus-row"),this.svg_text.classList.add("focus-row"))}},j.prototype.animate_correct=function(){this.highlight_animated("correct",250)},j.prototype.animate_incorrect=function(){this.highlight_animated("incorrect",260)},k.prototype.iso_layout=function(){return"iso"==this.schema.layout},k.prototype.jis_layout=function(){return"jis"==this.schema.layout},k.prototype.ansi_hp_layout=function(){return"ansi-hp"==this.schema.layout},k.prototype.pc_os=function(){return"pc"==this.schema.os},k.prototype.focus_row_for_char=function(e){var t=this.char_to_key_mapping[e];if(t&&"space"!=e){var r,n=t.layout_data.key_id,a=[],o=y(this.layout.rows);try{for(o.s();!(r=o.n()).done;){var i,s=r.value,u=!1,l=y(s);try{for(l.s();!(i=l.n()).done;){if(i.value.key_id==n){u=!0;break}}}catch(e){l.e(e)}finally{l.f()}if(u){a=s.map((function(e){return e.key_id}));break}}}catch(e){o.e(e)}finally{o.f()}var c,f=y(this.keys);try{for(f.s();!(c=f.n()).done;){var p=c.value;a.indexOf(p.layout_data.key_id)>=0?p.svg_text&&E(p.svg_text,"focus-row"):p.svg_text&&S(p.svg_text,"focus-row")}}catch(e){f.e(e)}finally{f.f()}}};var T={svg_files:{0:"keyboard-ansi.svg",1:"wobbly-ansi.svg",2:"classic-ansi.svg",3:"modern-ansi.svg",4:"glass-ansi.svg?",5:"cartoon-ansi.svg",6:"marble-ansi.svg",7:"colorful-ansi.svg",10:"stats-ansi.svg",11:"kinder-ansi.svg",12:"kinder-ansi-lower.svg",13:"kinder-ansi-es.svg",14:"kinder-ansi-lower-es.svg",100:"keyboard-iso.svg",101:"wobbly-iso.svg",102:"classic-iso.svg",103:"modern-iso.svg",104:"glass-iso.svg",105:"cartoon-iso.svg",106:"marble-iso.svg",107:"colorful-ansi.svg",110:"keyboard-iso.svg",200:"keyboard-jis.svg",201:"keyboard-jis.svg",202:"keyboard-jis.svg",203:"keyboard-jis.svg",204:"keyboard-jis.svg",205:"keyboard-jis.svg",206:"keyboard-jis.svg",207:"colorful-ansi.svg",210:"keyboard-jis.svg",300:"keyboard-ansi-hp.svg",301:"keyboard-ansi-hp.svg",302:"keyboard-ansi-hp.svg",303:"keyboard-ansi-hp.svg",304:"keyboard-ansi-hp.svg",305:"keyboard-ansi-hp.svg",306:"keyboard-ansi-hp.svg",307:"colorful-ansi.svg",310:"stats-ansi.svg"},modifier:{" ":{left:"neutral-left",right:"neutral-right"},shift:{left:"shift-left",right:"shift-right"},opt:{left:"option-left",right:"option-right"},"shift+opt":{left:"shift-option-left",right:"shift-option-right"},"no-hand":{left:"no-hand",right:"no-hand"}},rows:[[{key_id:"tilda",qchar:"`",qchartop:"~",code:192,fin:1,lfin:1,rfin:7,hand:1,hint:"move your left pinky up two keys from {{a}} and one to the left.",iso_key_id:"shift-left",iso_hint:"move your left pinky down one key from {{a}} and one to the left.",ansi_hp_key_id:"no-hand",ansi_hp_hint:"move your left pinky down two keys from {{;}} and to the right."},{key_id:"key-1",qchar:"1",qchartop:"!",code:49,fin:1,lfin:1,rfin:7,hand:1,hint:"move your left pinky up two keys from {{a}}."},{key_id:"key-2",qchar:"2",qchartop:"@",code:50,fin:2,lfin:1,rfin:7,hand:1,hint:"move your left ring finger up two keys from {{s}}."},{key_id:"key-3",qchar:"3",qchartop:"#",code:51,fin:3,lfin:1,rfin:7,hand:1,hint:"move your left middle finger up two keys from {{d}}."},{key_id:"key-4",qchar:"4",qchartop:"$",code:52,fin:4,lfin:1,rfin:7,hand:1,hint:"move your left index finger up to two keys from the {f}."},{key_id:"key-5",qchar:"5",qchartop:"%",code:53,fin:4,lfin:2,rfin:8,hand:1,hint:"move your left index finger up to two keys from the {f}."},{key_id:"key-6",qchar:"6",qchartop:"^",code:54,fin:7,lfin:3,rfin:9,hand:2,hint:"move your left index finger up to two keys from {{f}} and one to the right."},{key_id:"key-7",qchar:"7",qchartop:"&",code:55,fin:7,lfin:4,rfin:10,hand:2,hint:"move your right index finger up to two keys from {{j}} and two to the left."},{key_id:"key-8",qchar:"8",qchartop:"*",code:56,fin:8,lfin:4,rfin:10,hand:2,hint:"move your right middle finger up two keys from {{k}} and to the left."},{key_id:"key-9",qchar:"9",qchartop:"(",code:57,fin:9,lfin:4,rfin:10,hand:2,hint:"move your right ring finger up two keys from {{l}} and to the left."},{key_id:"key-0",qchar:"0",qchartop:")",code:48,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up two keys from {{;}} and to the left."},{key_id:"minus",qchar:"-",qchartop:"_",code:189,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up two keys from {{;}}."},{key_id:"equal",qchar:"=",qchartop:"+",code:187,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up two keys from {{;}} and to the right."},{key_id:"iso-key",iso_key_id:"tilda",ansi_hp_key_id:"tilda",qchar:"§",qchartop:"±",lfin:1,rfin:7,fin:1,hand:1,hint:"move your left pinky up two keys from {{a}} and one to the left."},{key_id:"jis-key",jis_key_id:"equal",qchar:"¥",qchartop:"ı",lfin:4,rfin:10,fin:10,hand:2,hint:"move your right pinky up two keys from {{;}} and two keys to the right."}],[{key_id:"tab",special_key:!0,qchar:"\t",code:9,fin:1,lfin:1,rfin:7,hand:1,hint:"move your left pinky up one key from {{a}} and one key to the left."},{key_id:"q",qchar:"q",qchartop:"Q",code:81,fin:1,lfin:1,rfin:7,hand:1,hint:"move your left pinky up one key from {{a}}."},{key_id:"w",qchar:"w",qchartop:"W",code:87,fin:2,lfin:1,rfin:7,hand:1,hint:"move your left ring finger up one key from {{s}}."},{key_id:"e",qchar:"e",qchartop:"E",code:69,fin:3,lfin:1,rfin:7,hand:1,hint:"move your left middle finger up one key from {{d}}."},{key_id:"r",qchar:"r",qchartop:"R",code:82,fin:4,lfin:1,rfin:7,hand:1,hint:"move your left index finger up one key from {{f}}."},{key_id:"t",qchar:"t",qchartop:"T",code:84,fin:4,lfin:2,rfin:8,hand:1,hint:"move your left index finger up one key from {{f}} and to the right."},{key_id:"y",qchar:"y",qchartop:"Y",code:89,fin:7,lfin:3,rfin:9,hand:2,hint:"move your right index finger up one key from {{j}} and to the left."},{key_id:"u",qchar:"u",qchartop:"U",code:85,fin:7,lfin:4,rfin:10,hand:2,hint:"move your right index finger up one key from {{j}}."},{key_id:"i",qchar:"i",qchartop:"I",code:73,fin:8,lfin:4,rfin:10,hand:2,hint:"move your right middle finger up one key from {{k}}."},{key_id:"o",qchar:"o",qchartop:"O",code:79,fin:9,lfin:4,rfin:10,hand:2,hint:"move your right ring finger up one key from {{l}}."},{key_id:"p",qchar:"p",qchartop:"P",code:80,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up one key from {{;}}."},{key_id:"open-bracket",qchar:"[",qchartop:"{",code:219,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up one key from {{;}} and to the right."},{key_id:"close-bracket",qchar:"]",qchartop:"}",code:221,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up one key from {{;}} and two to the right."},{key_id:"backslash",qchar:"\\",qchartop:"|",code:220,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up one key from {{;}} and three keys to the right.",iso_key_id:"enter",iso_hint:"move your right pinky two keys to the right."}],[{key_id:"capslock",special_key:!0,code:0,fin:1,lfin:1,rfin:7,hand:1},{key_id:"a",qchar:"a",qchartop:"A",code:65,fin:1,lfin:1,rfin:7,hand:1,hint:"press down with your left pinky."},{key_id:"s",qchar:"s",qchartop:"S",code:83,fin:2,lfin:1,rfin:7,hand:1,hint:"press down with your left ring finger."},{key_id:"d",qchar:"d",qchartop:"D",code:68,fin:3,lfin:1,rfin:7,hand:1,hint:"press down with your left middle finger."},{key_id:"f",qchar:"f",qchartop:"F",code:70,fin:4,lfin:1,rfin:7,hand:1,bump:!0,hint:"press down with your left index finger."},{key_id:"g",qchar:"g",qchartop:"G",code:71,fin:4,lfin:2,rfin:8,hand:1,hint:"move your left index finger one key to the right."},{key_id:"h",qchar:"h",qchartop:"H",code:72,fin:7,lfin:3,rfin:9,hand:2,hint:"move your right index finger one key to the left."},{key_id:"j",qchar:"j",qchartop:"J",code:74,fin:7,lfin:4,rfin:10,hand:2,bump:!0,hint:"press down with your right index finger."},{key_id:"k",qchar:"k",qchartop:"K",code:75,fin:8,lfin:4,rfin:10,hand:2,hint:"press down with your right middle finger."},{key_id:"l",qchar:"l",qchartop:"L",code:76,fin:9,lfin:4,rfin:10,hand:2,hint:"press down with your right ring finger."},{key_id:"semicolon",qchar:";",qchartop:":",code:186,fin:10,lfin:4,rfin:10,hand:2,hint:"press down with your right pinky."},{key_id:"quote",qchar:"'",qchartop:'"',code:222,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky one key to the right."},{key_id:"enter",special_key:!0,code:13,fin:10,lfin:4,rfin:10,hand:2,qchar:"\n",hint:"move your right pinky two keys to the right.",iso_key_id:"backslash",iso_hint:"move your right pinky three keys to the right."}],[{key_id:"shift-left",special_key:!0,code:16,fin:1,lfin:1,rfin:7,hand:1},{key_id:"z",qchar:"z",qchartop:"Z",code:90,fin:1,lfin:1,rfin:7,hand:1,hint:"move your left pinky down one key from {{a}} and to the right."},{key_id:"x",qchar:"x",qchartop:"X",code:88,fin:2,lfin:1,rfin:7,hand:1,hint:"move your left ring finger down one key from {{s}} and to the right."},{key_id:"c",qchar:"c",qchartop:"C",code:67,fin:3,lfin:1,rfin:7,hand:1,hint:"move your left middle finger down one key from {{d}} and to the right."},{key_id:"v",qchar:"v",qchartop:"V",code:86,fin:4,lfin:1,rfin:7,hand:1,hint:"move your left index finger down one key from {{f}} and to the right."},{key_id:"b",qchar:"b",qchartop:"B",code:66,fin:4,lfin:2,rfin:8,hand:1,hint:"move your left index finger down one key from {{f}} and two keys to the right."},{key_id:"n",qchar:"n",qchartop:"N",code:78,fin:7,lfin:3,rfin:9,hand:2,hint:"move your right index finger down one key from {{j}} and to the left."},{key_id:"m",qchar:"m",qchartop:"M",code:77,fin:7,lfin:4,rfin:10,hand:2,hint:"move your right index finger down one key from {{j}} and to the right."},{key_id:"comma",qchar:",",qchartop:"<",code:188,lfin:4,rfin:10,fin:8,hand:2,hint:"move your right middle finger down one key from {{k}} and to the right."},{key_id:"dot",qchar:".",qchartop:">",code:190,lfin:4,rfin:10,fin:9,hand:2,hint:"move your right ring finger down one key from {{l}} and to the to the right."},{key_id:"slash",qchar:"/",qchartop:"?",code:191,lfin:4,rfin:10,fin:10,hand:2,hint:"move your right pinky down one key from {{;}} and to the right."},{key_id:"shift-right",special_key:!0,code:16,lfin:4,rfin:10,fin:10,hand:2},{key_id:"jis-key2",jis_key_id:"shift-right",qchar:"§",qchartop:"±",lfin:4,rfin:10,fin:10,hand:2,hint:"move your right pinky down one key from {{;}} and two keys to the right."}],[{key_id:"control",special_key:!0,fin:1,lfin:1,rfin:7,hand:1},{key_id:"option-left",special_key:!0,fin:1,lfin:1,rfin:7,hand:1},{key_id:"space",special_key:!0,code:32,fin:5,lfin:5,rfin:6,hand:2,qchar:" ",hint:"use either thumb."},{key_id:"option-right",special_key:!0,fin:10,lfin:4,rfin:10,hand:2}]]},R=k;t.default=R},3056:(e,t,r)=>{r(92222),r(47042),r(30489),r(74916),r(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(67294))&&n.__esModule?n:{default:n},o=r(66358),i=r(95343);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,c=l(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=c.call(this,e)).explanation=t.explain_results(),t}return t=f,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.attempt.requirements,r=t.goal_wpm,n=t.min_accuracy,a=(t.min_wpm,this.props.attempt),i=a.accuracy,s=(a.real_accuracy,a.duration),u=.4,l=1.4,c={val:0},f={val:0};o.gsap.to(c,{duration:1,delay:u,val:i,roundProps:"val",onUpdate:function(){e.refs.accuracyText.innerHTML=c.val}}),o.gsap.to(f,{duration:1,delay:l,val:this.props.attempt.wpm,roundProps:"val",onUpdate:function(){e.refs.wpmText.innerHTML=f.val}});var p,d="".concat(Math.floor(s/60),":").concat(s%60<10?0:"").concat(s%60).split("").slice(0,4),h=0;if(o.gsap.to(this.refs.rollingTimer.children,{duration:.3,delay:.9,y:40,stagger:{each:.1,onComplete:function(e){this.targets()[0].innerText=d[h++],o.gsap.fromTo(this.targets()[0],{y:-40},{y:0,duration:.3})}}}),p=100==n&&100==i?1:i<n?i/n*.5:.5+(i-n)/(100-n)*.5,o.gsap.to(this.refs.accuracyBar,{duration:1,delay:u,ease:"none",strokeDashoffset:"".concat(100*(1-p),"%")}),i>=n){var m=.5/p*1;o.gsap.to(this.refs.accuracyBar,{duration:1/8,delay:u+m,stroke:"#ffc22a"})}var y=Math.min(2*r,this.props.attempt.wpm),v=y/(2*r);if(o.gsap.to(this.refs.speedBar,{duration:1,delay:l,ease:"none",strokeDashoffset:"".concat(100*(1-v),"%")}),y>r){var g=r/y*1,_=(y-r)/(2*r);o.gsap.to(this.refs.aboveSpeedDashes,{delay:l+g,duration:1-g,ease:"none",strokeDashoffset:"".concat(84*-_,"%")}),o.gsap.to(this.refs.aboveSpeedLine,{delay:l+g,duration:1-g,ease:"none",rotation:360*_,transformOrigin:"-60.54px 0"}),o.gsap.to(this.refs.aboveSpeedBar,{delay:l+g,duration:1-g,ease:"none",strokeDashoffset:"".concat(84*(1-_),"%")})}o.gsap.fromTo([this.refs.accuracyLabel,this.refs.speedLabel,this.refs.durationLabel],{scale:0,rotationZ:-15},{delay:u,duration:.5,rotationZ:0,scale:1}),this.props.onExplain(this.explanation)}},{key:"componentWillUnmount",value:function(){o.gsap.globalTimeline.clear()}},{key:"explain_results",value:function(){var e,t,r,n=this.props.attempt,a=approuter.team.settings.min_stars||1;if((approuter.lesson||{}).is_test)e=(0,i.t)("Thank you for taking the test."),n.is_failed&&(e=(0,i.t)("You did not pass the test.")+(n.no_redo?"":" "+(0,i.t)("Try again")+"."));else{var o=[(0,i.t)("Nice job"),(0,i.t)("Excellent work"),(0,i.t)("Good job"),(0,i.t)("Good work"),(0,i.t)("Well done")],s=o[Math.floor(Math.random()*o.length)],u="";a>1&&n.stars<a&&n.score&&(u=" "+(0,i.t)("To move on, you need to get {{min_stars}} stars.",{min_stars:a})),t=n,r=n.requirements,e=(5==t.stars?s+"! "+(0,i.t)("Time to move on to the next lesson."):t.accuracy<r.min_accuracy?(0,i.t)("This lesson has a minimum accuracy of {{min_acc}}%. Try to get 100% accuracy on the next try. You'll build speed later.",{min_acc:r.min_accuracy}):t.wpm>=r.goal_wpm?t.accuracy<100?(0,i.t)("{{good_work}} on your speed!",{good_work:s})+"<br/>"+(0,i.t)("Now focus on getting 100% accuracy."):(0,i.t)("{{good_work}} on your speed and accuracy!",{good_work:s})+" "+(t.real_accuracy<100?(0,i.t)("For a perfect score you also need 100% real accuracy."):(0,i.t)("Time to move on to the next lesson.")):t.wpm<r.min_wpm?(t.accuracy>95?(0,i.t)("{{good_work}} on your accuracy",{good_work:s}):(0,i.t)("Your accuracy is good"))+" "+(0,i.t)("but you need to work on your speed.")+" "+(0,i.t)("To pass this lesson, you need to type {{x}}WPM faster.",{x:r.min_wpm-t.wpm}):t.accuracy<100?(0,i.t)("Focus on accuracy first, then build speed. You don't want to make any mistakes."):t.real_accuracy<80?(0,i.t)("{{good_work}} on your speed and accuracy!",{good_work:s})+" "+(0,i.t)("You can improve your real accuracy by not making mistakes in the first place."):(0,i.t)("Great work on accuracy. Now it's time to build up your speed.")+" "+(0,i.t)("Type {{x}}WPM faster to earn more stars.",{x:r.goal_wpm-t.wpm}))+u}return e}},{key:"render",value:function(){var e=this.props.with_ads,t=this.props.attempt.requirements,r=t.goal_wpm,n=t.min_accuracy,o=t.min_wpm,s=this.props.attempt,u=s.wpm,l=s.accuracy,c=s.real_accuracy,f=s.duration;return a.default.createElement("div",{className:"performance-results",style:{position:"relative",width:770,margin:"0 -50px",display:"inline-block"}},a.default.createElement("div",{className:"st0 st7 st24",style:{position:"absolute",top:108,left:119,width:150,textAlign:"center"}},a.default.createElement("span",{ref:"accuracyText"},0),a.default.createElement("small",{style:{marginLeft:3}},"%")),a.default.createElement("div",{ref:"wpmText",className:"st0 st7 st17",style:{position:"absolute",top:108,left:522,width:100,textAlign:"center"}},0),a.default.createElement("div",{className:"st9 st1 st10",style:{position:"absolute",top:146,left:687}},a.default.createElement("span",{style:{margin:"0 2px"}},r),a.default.createElement("span",{style:{whiteSpace:"nowrap",fontSize:"65%",margin:"0 2px"}},(0,i.t)("wpm"))),a.default.createElement("div",{className:"st9 st1 st10 st12",style:{position:"absolute",top:165,left:687}},(0,i.t)("Requirement:")," ",o," ",(0,i.t)("wpm")),a.default.createElement("div",{className:"st9 st1 st10",style:{position:"absolute",top:146,left:37,width:50,textAlign:"right"}},n,a.default.createElement("small",{style:{marginLeft:1}},"%")),a.default.createElement("div",{ref:"rollingTimer",className:"st0 st7 st8",style:{position:"absolute",direction:"ltr",top:119,left:356,width:60,lineHeight:".95em",height:".9em",fontSize:34,overflow:"hidden"}},a.default.createElement("span",null,"0"),a.default.createElement("span",null,":"),a.default.createElement("span",null,"0"),a.default.createElement("span",null,"0")),a.default.createElement("div",null,a.default.createElement("div",{ref:"accuracyLabel",className:"performance-label",style:{top:e?260:30,left:73}},(0,i.t)("accuracy")),a.default.createElement("div",{ref:"durationLabel",className:"performance-label",style:{top:e?206:30,left:266}},(0,i.t)("duration")),a.default.createElement("div",{ref:"speedLabel",className:"performance-label",style:{top:e?260:30,left:456}},(0,i.t)("speed"))),a.default.createElement("div",{tabIndex:3,style:{color:"transparent",height:240,margin:"30px 90px -270px"}},"your accuracy was "+l+"%, with real accuracy of "+c+"% and speed of "+u+" wpm in "+f+" seconds."),a.default.createElement("div",{tabIndex:4,style:{color:"transparent",height:320,marginBottom:-320}},"Requirements for this lesson are: accuracy of "+n+" percent, min speed of "+o+" wpm and goal speed of"+r+" wpm"),a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 681 268",style:{height:300,direction:"ltr"}},a.default.createElement("g",{transform:"translate(-826.329 -818.271)"},a.default.createElement("g",{transform:"translate(-0.081 16)"},a.default.createElement("circle",{className:"st4",cx:"1167.8",cy:"924.9",r:"46.6"}),a.default.createElement("circle",{className:"st5",cx:"1167.8",cy:"924.9",r:"40"}),a.default.createElement("circle",{className:"st6",cx:"1167.8",cy:"924.9",r:"53.2"})),a.default.createElement("text",{transform:"matrix(1 0 0 1 901 972)",className:"st9 st1 st12",textAnchor:"end"},(0,i.t)("minimum accuracy")),a.default.createElement("g",{transform:"translate(-2 16)"},a.default.createElement("text",{transform:"matrix(1 0 0 1 1170 942)",className:"st9 st1 st12",textAnchor:"middle"},(0,i.t)("min")," : ",(0,i.t)("seconds")))),a.default.createElement("circle",{id:"Ellipse_118_12_",className:"st13",cx:"511.3",cy:"146.5",r:"69.7"}),a.default.createElement("circle",{id:"Ellipse_118_1_",className:"st16",cx:"511.3",cy:"146.5",r:"69.7"}),a.default.createElement("text",{transform:"matrix(1 0 0 1 510 178)",className:"st18 st7 st19",textAnchor:"middle"},(0,i.t)("wpm")),a.default.createElement("line",{id:"Line_128_6_",className:"st20",x1:"572",y1:"146.1",x2:"599.1",y2:"146.1"}),a.default.createElement("line",{id:"Line_128_1_",className:"st21",x1:"423.5",y1:"146.1",x2:"450.6",y2:"146.1"}),a.default.createElement("circle",{className:"st13",cx:"170",cy:"147",r:"69.7"}),a.default.createElement("path",{className:"st22",d:"M239.7,146.2v0.8c0,38.5-31.2,69.7-69.7,69.7s-69.7-32-69.7-70.5"}),a.default.createElement("line",{className:"st28",x1:"230.6",y1:"146.3",x2:"257.5",y2:"146.3"}),a.default.createElement("line",{className:"st28",x1:"82.5",y1:"146.3",x2:"109.3",y2:"146.3"}),a.default.createElement("text",{transform:"matrix(1.2 0 0 1.2 170 177)",className:"st0 st7 st29",textAnchor:"middle"},(0,i.t)("real accuracy")),a.default.createElement("text",{transform:"matrix(1.4 0 0 1.4 168.3583 196)",className:"st0 st7 st30",textAnchor:"middle"},c,"%"),a.default.createElement("circle",{className:"l",ref:"accuracyBar",cx:"170.21",cy:"147",r:"83",style:{stroke:"#0eb168",strokeDasharray:"100%",strokeDashoffset:"100%"}}),a.default.createElement("circle",{className:"l",ref:"speedBar",cx:"511.21",cy:"147",r:"83",transform:"rotate(180,511,147)",style:{strokeDasharray:"100%",strokeDashoffset:"100%"}}),a.default.createElement("circle",{className:"j",cx:"511.46",cy:"146.5",r:"69.6",transform:"rotate(180,511,147)",style:{strokeDasharray:"84%",strokeDashoffset:"".concat(84*(1-o/(2*r)),"%")}}),a.default.createElement("circle",{className:"i",ref:"aboveSpeedBar",cx:"511.46",cy:"146.5",r:"69.6",style:{strokeDasharray:"84%",strokeDashoffset:"84%"}}),a.default.createElement("path",{className:"st13",ref:"aboveSpeedDashes",style:{strokeDasharray:"84%",strokeDashoffset:"0%"},d:"M581,146.5c0,38.5-31.2,69.7-69.7,69.7s-69.7-31.2-69.7-69.7"}),a.default.createElement("line",{className:"o",ref:"aboveSpeedLine",x1:"572",y1:"146.28",x2:"599",y2:"146.28"})))}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.default.Component);t.default=p},26314:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(96078),r(9653),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(67294)),a=o(r(69606));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(p,e);var t,r,o,c=l(p);function p(){var e;i(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(f(e=c.call.apply(c,[this].concat(r))),"state",{}),e}return t=p,(r=[{key:"componentDidMount",value:function(){var e=(0,a.default)(this.refs.card);e.css({opacity:0,top:200,marginLeft:-1*this.props.width/2,width:this.props.width,transform:"scale(.8)"}),setTimeout((function(){return e.css({opacity:1,transform:"scale(1)"})}))}},{key:"render",value:function(){return n.default.createElement("div",{className:"ed-card",ref:"card"},this.props.children)}}])&&s(t.prototype,r),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.default.Component);t.default=m},42644:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(96078),r(9653),r(19601),r(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(67294))&&n.__esModule?n:{default:n};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(f,e);var t,r,n,l=u(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return p(c(e=l.call.apply(l,[this].concat(r))),"close",(function(){e.props.close_outside&&approuter.hide_modal(e.props.id)})),e}return t=f,(r=[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.modal_div&&e.modal_div.focus()}),10)}},{key:"render",value:function(){var e=this,t=Object.assign({},this.props.style,{width:this.props.width,padding:null==this.props.padding?30:this.props.padding});return this.props.height&&(t.height=this.props.height),a.default.createElement("div",{onClick:this.close,className:"edmodal"+(this.props.scrollable?" scrollable":"")},a.default.createElement("div",{ref:function(t){e.modal_div=t},role:"dialog",tabIndex:"0","aria-label":"dialog",style:t,onClick:function(e){return e.stopPropagation()},className:"edmodal-box ".concat(this.props.className||"")},1==this.props.show_x?a.default.createElement("div",{onClick:this.close.bind(this),className:"edmodal-x"},"×"):"",this.props.children))}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.default.Component);h.defaultProps={show_x:!0,close_outside:!0,esc_close:!0};var m=h;t.default=m},19851:(e,t,r)=>{r(82526),r(41817),r(96649),r(92222),r(96078),r(9653),r(41539),r(88674),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(69606))&&n.__esModule?n:{default:n},o=r(66358);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}function s(e){e.css("z-index",5)}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.styles={glowing:{className:"active-key-pointer",width:40,top_offset:0,left_offset:0},monkey_enter:{image:"monkey",width:150,top_offset:68,left_offset:74},monkey_halo2:{image:"monk&circ",width:114,top_offset:68,left_offset:55},monkey_spacebar2:{image:"monk&circ-space",width:401,top_offset:89,left_offset:204}},this.default_style=t||"monkey_halo2",this.last_target=null,this.last_target_bounds=null,this.tm=null,this.graphic_image=null}var t,r,n;return t=e,r=[{key:"attach",value:function(e){var t;return this.styles[this.default_style].className?(t=(0,a.default)("<span/>")).attr("class",this.styles[this.default_style].className):((t=(0,a.default)("<img/>")).hide(),t.css({position:"absolute"})),(0,a.default)(e).append(t),this.element=t,new Promise((function(e){e(t)}))}},{key:"hide",value:function(){this.element.hide()}},{key:"focus",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.tm&&(this.tm.seek(0).kill(),this.tm=null),e){n||(n=this.default_style),this.active_style=n,this.active_target=e,this.active_svg=t;var i,u=this.styles[n],l=this.element;if(u.image&&u.image!=this.graphic_image){this.graphic_image=u.image;var c="".concat("https://static.typingclub.com/m/","/engine/img/keyboard-highlight/").concat(u.image,".svg");this.element.attr("src",c),this.element.css({opacity:0})}if(this.graphic_image=u.image,s(l),l.show(),e==this.last_target)i=this.last_target_bounds;else{(0,a.default)(e).removeClass("correct"),this.last_target=e;var f=e.ownerSVGElement,p=f.viewBox.baseVal.width,d=f.parentElement.offsetWidth,h=d/p,m=e.getBBox();i=this.last_target_bounds={x:m.x*h,y:m.y*h,width:m.width*h}}setTimeout((function(){l.css({opacity:1,marginTop:-u.top_offset,marginLeft:-u.left_offset,width:u.width,top:i.y,left:i.x+i.width/2}),u.image&&(r.tm=o.gsap.to(l,{duration:.1,y:-2,scale:1.06,yoyo:!0,repeat:1}))}),100)}else this.hide()}}],r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=u},64967:(e,t,r)=>{"use strict";r.r(t)},30844:(e,t,r)=>{var n={"./es":55655};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=30844},25893:()=>{},84542:e=>{"use strict";e.exports=JSON.parse('{"sentryDSN":"https://395fecf8768243eead8a6a93295f3b11@sentry.io/50133","sentryDSN_NOADS":"https://a069cd499c504c3084b7c8853b98e752@sentry.io/1275414","sentryDSN_teacher":"https://489f01b2ff4e4c1ab69e319802dcfd89@sentry.io/1763178"}')},33563:e=>{"use strict";e.exports=JSON.parse('{"staticURL":"m","localization":{"defaultLocale":"en_US","spaceLocales":["en_US","en_GB","es_MX","es_ES","ar_SA","bg_BG","de_DE","nl_NL","fa_IR","fr_FR","fr_CA","he_IL","hu_HU","it_IT","ja_JP","pl_PL","pt_PT","ru_RU","sk_SK","sv_SE","zh_CN"],"contentLocales":["ar","bg","zh","en","en_GB","fa","fr","fr_CA","de","de_CH","he","hu","it","ja","pl","pt","pt_BR","ru","nl","sk","es","sv"],"namespaces":["common","badge","website","options"],"userLocaleKeys":["account.locale","locale"]}}')},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"uix","version":"1.1.1-1121","description":"TypingClub Frontend Build","repository":"https://github.com/EdClub/tpclub/tree/master/uix","applications":["student","student_tp","student_authoring","student_cordova","teacher","adminportal","playback","auth_class_import","auth","website:website/website","school_entry:website/school_entry","approuter_simple","editor_simple"],"scripts":{"clean":"make clean","build-svg":"make build-svg","watch":"npm run build-svg && node ./scripts/builder/index.js --mode=development --watch","build:dev":"npm run build-svg && node ./scripts/builder/index.js --mode=development","build:staging":"npm run crowdin && npm run build-svg && node ./scripts/builder/index.js --mode=production --staging","build:prod":"npm run build-svg && node ./scripts/builder/index.js --mode=production","build:deploy":"npm version prerelease && npm run build:prod","test":"jest","test:clear-cache":"jest --clearCache","test:verbose":"jest --verbose","test:coverage":"jest --coverage","test:watch":"jest --watch","test:website":"jest --testPathPattern=js/website","test:watch:website":"jest --watch --testPathPattern=js/website","lint:teacher":"eslint \'./js/teacher/**/*.{js,jsx,ts,tsx}\'","lint:teacher:fail-on-error":"eslint --max-warnings 0 \'./js/teacher/**/*.{js,jsx,ts,tsx}\'","lint:teacher:fix":"eslint --fix \'./js/teacher/**/*.{js,jsx,ts,tsx}\'","commit-checks:teacher":"npm-run-all lint:teacher:fail-on-error --parallel translate:teacher test","postinstall":"touch ./node_modules/.metadata_never_index","crowdin":"npm -prefix ./scripts/crowdin-client install && node ./scripts/crowdin-client/build/index.js ./scripts/crowdin.config.json","tscan":"node ./scripts/t-scanner/build/scan.js ./uix/scripts/tscanner.config.json"},"author":"","license":"ISC","devDependencies":{"@babel/core":"7.10.2","@babel/plugin-proposal-class-properties":"7.10.1","@babel/plugin-proposal-decorators":"7.10.1","@babel/plugin-proposal-export-default-from":"7.10.1","@babel/plugin-proposal-export-namespace-from":"7.10.1","@babel/plugin-syntax-dynamic-import":"7.8.3","@babel/plugin-syntax-export-default-from":"7.10.1","@babel/plugin-syntax-export-namespace-from":"7.8.3","@babel/plugin-transform-modules-commonjs":"7.10.1","@babel/preset-env":"7.10.2","@babel/preset-react":"7.10.1","@babel/preset-stage-0":"7.8.3","@sentry/cli":"^1.58.0","@testing-library/jest-dom":"5.14.1","@testing-library/react":"11.0.4","@types/crypto-js":"^4.1.1","@types/dom-mediacapture-record":"1.0.9","@types/faker":"5.5.6","@types/highlightjs":"9.12.1","@types/jest":"26.0.23","@types/js-cookie":"2.2.6","@types/lodash":"4.14.170","@types/react":"16.9.52","@types/react-dom":"16.9.8","@types/react-helmet":"^6.1.5","@types/react-router-dom":"5.1.7","@types/react-window":"1.8.3","@types/video.js":"^7.3.46","@types/wavesurfer.js":"^6.0.3","@types/yup":"0.29.11","@typescript-eslint/eslint-plugin":"^5.48.0","@typescript-eslint/parser":"^5.48.0","acorn":"7.2.0","babel":"6.23.0","babel-cli":"6.26.0","babel-core":"7.0.0-bridge.0","babel-eslint":"10.1.0","babel-jest":"26.5.2","babel-loader":"^8.2.2","babel-plugin-espower":"3.0.1","babel-plugin-jsx-remove-data-test-id":"2.1.3","babel-plugin-transform-react-remove-prop-types":"0.4.24","babel-plugin-transform-remove-strict-mode":"0.0.2","babel-root-import":"4.1.8","browserify":"16.5.1","circular-dependency-plugin":"^5.2.2","clean-webpack-plugin":"^3.0.0","common":"file:./js/common","crowdin-client":"file:./scripts/crowdin-client","css-loader":"^5.1.2","envify":"4.1.0","eslint":"7.29.0","eslint-plugin-jsx-a11y":"6.4.1","eslint-plugin-prettier":"3.4.0","eslint-plugin-react":"7.24.0","eslint-plugin-react-hooks":"4.2.0","eslint-plugin-testing-library":"3.9.1","eslint-plugin-you-dont-need-lodash-underscore":"6.12.0","exorcist":"1.0.1","exports-loader":"0.7.0","expose-loader":"^2.0.0","file-replace-loader":"1.2.0","find-imports":"1.1.0","fork-ts-checker-webpack-plugin":"^7.2.14","html-webpack-plugin":"^5.3.1","identity-obj-proxy":"3.0.0","imports-loader":"0.8.0","jest":"26.5.3","mini-css-extract-plugin":"^1.3.9","node-sass":"^9.0.0","normalize.css":"8.0.1","npm-run-all":"4.1.5","parse-svg-path":"0.1.2","pbf":"3.2.1","pbf-loader":"1.1.0","prop-types":"15.7.2","react-test-renderer":"16.13.1","sass-loader":"^11.0.1","script-loader":"0.7.2","svg-inline-loader":"^0.8.2","svg-sprite":"^1.5.4","t-scanner-webpack-plugin":"file:./scripts/t-scanner-webpack-plugin","terser-webpack-plugin":"^5.1.1","ts-jest":"26.4.1","ts-loader":"^9.4.2","ts-migrate":"^0.1.35","typescript":"^4.9.4","wavesurfer.js":"^6.2.0","webpack":"^5.24.4","webpack-cli":"^4.5.0","webpack-manifest-plugin":"^4.1.1","webpack-merge":"^5.7.3","webpack-strip-block":"^0.3.0","webpack-visualizer-plugin":"^0.1.11"},"dependencies":{"@babel/polyfill":"7.8.7","@babel/runtime":"^7.13.10","@emotion/react":"^11.1.5","@popperjs/core":"^2.9.2","@reach/rect":"0.15.2","@reach/skip-nav":"0.15.2","@reach/visually-hidden":"0.15.2","@sentry/browser":"5.27.0","@vimeo/player":"github:EdClub/player.js","ajv":"6.12.6","aws-sdk":"^2.1210.0","bootstrap":"^5.2.3","classnames":"^2.3.1","clsx":"^1.1.1","copy-webpack-plugin":"^9.0.1","core-js":"3.25.1","createjs":"1.0.1","crypto-js":"^4.1.1","dagre":"^0.8.5","dashjs":"^4.4.1","date-fns":"2.15.0","downloadjs":"1.4.7","downshift":"5.4.7","draft-js":"^0.11.7","draft-js-plugins-editor":"^3.0.0","draft-js-static-toolbar-plugin":"^3.0.1","easing":"1.2.1","faker":"4.1.0","formik":"2.2.9","framer-motion":"4.1.17","fuse.js":"3.6.1","gridlex":"^2.7.1","gsap":"^3.6.1","highcharts":"^6.2.0","highcharts-more":"0.1.7","highcharts-react-official":"2.2.2","highlightjs":"9.16.2","immer":"^8.0.1","immutable":"3.8.2","interactjs":"^1.10.3","jquery":"2.2.3","jquery.transit":"0.9.12","js-cookie":"2.2.1","jstimezonedetect":"1.0.7","lity":"^2.4.1","lodash":"4.17.15","lottie-web":"5.6.6","mediainfo.js":"^0.1.8","moment":"2.24.0","moment-timezone":"0.5.28","named-urls":"2.0.0","path-to-regexp":"3.2.0","pdfmake":"^0.2.4","phaser":"2.6.2","popper.js":"1.16.1","react":"16.13.1","react-bootstrap":"0.33.1","react-dom":"16.13.1","react-error-boundary":"2.3.0","react-focus-lock":"2.5.1","react-ga":"2.7.0","react-helmet":"^6.1.0","react-hook-form":"^7.1.1","react-hotkeys":"2.0.0","react-intersection-observer":"^8.32.0","react-popper":"^2.2.5","react-query":"^3.18.1","react-router-dom":"5.2.0","react-sortable-hoc":"1.11.0","react-stripe-checkout":"2.6.3","react-transition-group":"4.3.0","react-window":"1.8.5","sbd":"^1.0.18","scrollmagic":"2.0.7","ssml-check-core":"^0.3.4","stream-browserify":"^3.0.0","swagger-client":"3.10.5","terser-webpack-plugin":"^5.1.2","url-search-params":"1.1.0","use-deep-compare-effect":"^1.6.1","use-immer":"^0.4.2","use-onclickoutside":"0.4.0","valtio":"1.0.6","video.js":"^7.20.2","videojs-contrib-dash":"^5.1.1","videojs-contrib-quality-levels":"^2.1.0","videojs-http-source-selector":"^1.1.6","webfontloader":"1.6.28","webpack-merge":"^5.7.3","yup":"0.32.9"}}')}},e=>{e.O(0,[839],(()=>{[736,513,486,742,930,900,602,426,903].map(e.E)}),5);e.O(0,[736],(()=>{return t=41947,e(e.s=t);var t}));var t=e.O();student_tp=t}]);
//# sourceMappingURL=student_tp.1121.min.js.map